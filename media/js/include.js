var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function r(e,t){var r,n,o,a,i,s,u,l,c,p,d,f=t&&t.split("/"),m=g.map,h=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=e.split("/"),i=e.length-1,g.nodeIdCompat&&k.test(e[i])&&(e[i]=e[i].replace(k,"")),e=f.concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||h)&&m){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(p=f.length;p>0;p-=1)if(o=m[f.slice(0,p).join("/")],o&&(o=o[n])){a=o,s=c;break}if(a)break;!u&&h&&h[n]&&(u=h[n],l=c)}!a&&u&&(a=u,s=l),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function n(t,r){return function(){return c.apply(e,b.call(arguments,0).concat([t,r]))}}function o(e){return function(t){return r(t,e)}}function a(e){return function(t){f[e]=t}}function i(r){if(t(m,r)){var n=m[r];delete m[r],h[r]=!0,l.apply(e,n)}if(!t(f,r)&&!t(h,r))throw new Error("No "+r);return f[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,c,p,d,f={},m={},g={},h={},v=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;p=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=i(u)),u?e=n&&n.normalize?n.normalize(e,o(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=i(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},d={require:function(e){return n(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:u(e)}}},l=function(r,o,s,u){var l,c,g,v,b,k,y=[],_=typeof s;if(u=u||r,"undefined"===_||"function"===_){for(o=!o.length&&s.length?["require","exports","module"]:o,b=0;b<o.length;b+=1)if(v=p(o[b],u),c=v.f,"require"===c)y[b]=d.require(r);else if("exports"===c)y[b]=d.exports(r),k=!0;else if("module"===c)l=y[b]=d.module(r);else if(t(f,c)||t(m,c)||t(h,c))y[b]=i(c);else{if(!v.p)throw new Error(r+" missing "+c);v.p.load(v.n,n(u,!0),a(c),{}),y[b]=f[c]}g=s?s.apply(f[r],y):void 0,r&&(l&&l.exports!==e&&l.exports!==f[r]?f[r]=l.exports:g===e&&k||(f[r]=g))}else r&&(f[r]=s)},requirejs=require=c=function(t,r,n,o,a){if("string"==typeof t)return d[t]?d[t](r):i(p(t,r).f);if(!t.splice){if(g=t,g.deps&&c(g.deps,g.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=o,o=a),o?l(e,t,r,n):setTimeout(function(){l(e,t,r,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=f,define=function(e,r,n){r.splice||(n=r,r=[]),t(f,e)||t(m,e)||(m[e]=[e,r,n])},define.amd={jQuery:!0}}(),define("lib/almond",function(){}),function(e){define("underscore",[],function(){return function(){return function(){var e=this,t=e._,r={},n=Array.prototype,o=Object.prototype,a=Function.prototype,i=n.push,s=n.slice,u=n.concat,l=o.toString,c=o.hasOwnProperty,p=n.forEach,d=n.map,f=n.reduce,m=n.reduceRight,g=n.filter,h=n.every,v=n.some,b=n.indexOf,k=n.lastIndexOf,y=Array.isArray,_=Object.keys,w=a.bind,x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var L=x.each=x.forEach=function(e,t,n){if(null!=e)if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(t.call(n,e[o],o,e)===r)return}else for(var i in e)if(x.has(e,i)&&t.call(n,e[i],i,e)===r)return};x.map=x.collect=function(e,t,r){var n=[];return null==e?n:d&&e.map===d?e.map(t,r):(L(e,function(e,o,a){n[n.length]=t.call(r,e,o,a)}),n)};var O="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=x.bind(t,n)),o?e.reduce(t,r):e.reduce(t);if(L(e,function(e,a,i){o?r=t.call(n,r,e,a,i):(r=e,o=!0)}),!o)throw new TypeError(O);return r},x.reduceRight=x.foldr=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return n&&(t=x.bind(t,n)),o?e.reduceRight(t,r):e.reduceRight(t);var a=e.length;if(a!==+a){var i=x.keys(e);a=i.length}if(L(e,function(s,u,l){u=i?i[--a]:--a,o?r=t.call(n,r,e[u],u,l):(r=e[u],o=!0)}),!o)throw new TypeError(O);return r},x.find=x.detect=function(e,t,r){var n;return F(e,function(e,o,a){return t.call(r,e,o,a)?(n=e,!0):void 0}),n},x.filter=x.select=function(e,t,r){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,r):(L(e,function(e,o,a){t.call(r,e,o,a)&&(n[n.length]=e)}),n)},x.reject=function(e,t,r){return x.filter(e,function(e,n,o){return!t.call(r,e,n,o)},r)},x.every=x.all=function(e,t,n){t||(t=x.identity);var o=!0;return null==e?o:h&&e.every===h?e.every(t,n):(L(e,function(e,a,i){return(o=o&&t.call(n,e,a,i))?void 0:r}),!!o)};var F=x.some=x.any=function(e,t,n){t||(t=x.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(L(e,function(e,a,i){return o||(o=t.call(n,e,a,i))?r:void 0}),!!o)};x.contains=x.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):F(e,function(e){return e===t})},x.invoke=function(e,t){var r=s.call(arguments,2),n=x.isFunction(t);return x.map(e,function(e){return(n?t:e[t]).apply(e,r)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,r){return x.isEmpty(t)?r?null:[]:x[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,r){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return L(e,function(e,o,a){var i=t?t.call(r,e,o,a):e;i>=n.computed&&(n={value:e,computed:i})}),n.value},x.min=function(e,t,r){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return L(e,function(e,o,a){var i=t?t.call(r,e,o,a):e;i<n.computed&&(n={value:e,computed:i})}),n.value},x.shuffle=function(e){var t,r=0,n=[];return L(e,function(e){t=x.random(r++),n[r-1]=n[t],n[t]=e}),n};var E=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,r){var n=E(t);return x.pluck(x.map(e,function(e,t,o){return{value:e,index:t,criteria:n.call(r,e,t,o)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var A=function(e,t,r,n){var o={},a=E(t||x.identity);return L(e,function(t,i){var s=a.call(r,t,i,e);n(o,s,t)}),o};x.groupBy=function(e,t,r){return A(e,t,r,function(e,t,r){(x.has(e,t)?e[t]:e[t]=[]).push(r)})},x.countBy=function(e,t,r){return A(e,t,r,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,r,n){r=null==r?x.identity:E(r);for(var o=r.call(n,t),a=0,i=e.length;i>a;){var s=a+i>>>1;r.call(n,e[s])<o?a=s+1:i=s}return a},x.toArray=function(e){return e?x.isArray(e)?s.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:s.call(e,0,t)},x.initial=function(e,t,r){return s.call(e,0,e.length-(null==t||r?1:t))},x.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,r){return s.call(e,null==t||r?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var C=function(e,t,r){return L(e,function(e){x.isArray(e)?t?i.apply(r,e):C(e,t,r):r.push(e)}),r};x.flatten=function(e,t){return C(e,t,[])},x.without=function(e){return x.difference(e,s.call(arguments,1))},x.uniq=x.unique=function(e,t,r,n){x.isFunction(t)&&(n=r,r=t,t=!1);var o=r?x.map(e,r,n):e,a=[],i=[];return L(o,function(r,n){(t?n&&i[i.length-1]===r:x.contains(i,r))||(i.push(r),a.push(e[n]))}),a},x.union=function(){return x.uniq(u.apply(n,arguments))},x.intersection=function(e){var t=s.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=u.apply(n,s.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=s.call(arguments),t=x.max(x.pluck(e,"length")),r=new Array(t),n=0;t>n;n++)r[n]=x.pluck(e,""+n);return r},x.object=function(e,t){if(null==e)return{};for(var r={},n=0,o=e.length;o>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},x.indexOf=function(e,t,r){if(null==e)return-1;var n=0,o=e.length;if(r){if("number"!=typeof r)return n=x.sortedIndex(e,t),e[n]===t?n:-1;n=0>r?Math.max(0,o+r):r}if(b&&e.indexOf===b)return e.indexOf(t,r);for(;o>n;n++)if(e[n]===t)return n;return-1},x.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(k&&e.lastIndexOf===k)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var o=n?r:e.length;o--;)if(e[o]===t)return o;return-1},x.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),o=0,a=new Array(n);n>o;)a[o++]=e,e+=r;return a},x.bind=function(e,t){if(e.bind===w&&w)return w.apply(e,s.call(arguments,1));var r=s.call(arguments,2);return function(){return e.apply(t,r.concat(s.call(arguments)))}},x.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},x.bindAll=function(e){var t=s.call(arguments,1);return 0===t.length&&(t=x.functions(e)),L(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var r={};return t||(t=x.identity),function(){var n=t.apply(this,arguments);return x.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},x.delay=function(e,t){var r=s.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(s.call(arguments,1)))},x.throttle=function(e,t){var r,n,o,a,i=0,s=function(){i=new Date,o=null,a=e.apply(r,n)};return function(){var u=new Date,l=t-(u-i);return r=this,n=arguments,0>=l?(clearTimeout(o),o=null,i=u,a=e.apply(r,n)):o||(o=setTimeout(s,l)),a}},x.debounce=function(e,t,r){var n,o;return function(){var a=this,i=arguments,s=function(){n=null,r||(o=e.apply(a,i))},u=r&&!n;return clearTimeout(n),n=setTimeout(s,t),u&&(o=e.apply(a,i)),o}},x.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var r=[e];return i.apply(r,arguments),t.apply(this,r)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)x.has(e,r)&&(t[t.length]=r);return t},x.values=function(e){var t=[];for(var r in e)x.has(e,r)&&t.push(e[r]);return t},x.pairs=function(e){var t=[];for(var r in e)x.has(e,r)&&t.push([r,e[r]]);return t},x.invert=function(e){var t={};for(var r in e)x.has(e,r)&&(t[e[r]]=r);return t},x.functions=x.methods=function(e){var t=[];for(var r in e)x.isFunction(e[r])&&t.push(r);return t.sort()},x.extend=function(e){return L(s.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},x.pick=function(e){var t={},r=u.apply(n,s.call(arguments,1));return L(r,function(r){r in e&&(t[r]=e[r])}),t},x.omit=function(e){var t={},r=u.apply(n,s.call(arguments,1));for(var o in e)x.contains(r,o)||(t[o]=e[o]);return t},x.defaults=function(e){return L(s.call(arguments,1),function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var S=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var o=l.call(e);if(o!=l.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=r.length;a--;)if(r[a]==e)return n[a]==t;r.push(e),n.push(t);var i=0,s=!0;if("[object Array]"==o){if(i=e.length,s=i==t.length)for(;i--&&(s=S(e[i],t[i],r,n)););}else{var u=e.constructor,c=t.constructor;if(u!==c&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(c)&&c instanceof c))return!1;for(var p in e)if(x.has(e,p)&&(i++,!(s=x.has(t,p)&&S(e[p],t[p],r,n))))break;if(s){for(p in t)if(x.has(t,p)&&!i--)break;s=!i}}return r.pop(),n.pop(),s};x.isEqual=function(e,t){return S(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=y||function(e){return"[object Array]"==l.call(e)},x.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return c.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,r){for(var n=Array(e),o=0;e>o;o++)n[o]=t.call(r,o);return n},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};V.unescape=x.invert(V.escape);var T={escape:new RegExp("["+x.keys(V.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(V.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(T[e],function(t){return V[e][t]})}}),x.result=function(e,t){if(null==e)return null;var r=e[t];return x.isFunction(r)?r.call(e):r},x.mixin=function(e){L(x.functions(e),function(t){var r=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return i.apply(e,arguments),z.call(this,r.apply(x,e))}})};var j=0;x.uniqueId=function(e){var t=++j+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,r){var n;r=x.defaults({},r,x.templateSettings);var o=new RegExp([(r.escape||N).source,(r.interpolate||N).source,(r.evaluate||N).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(o,function(t,r,n,o,s){return i+=e.slice(a,s).replace(q,function(e){return"\\"+P[e]}),r&&(i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(i+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(i+="';\n"+o+"\n__p+='"),a=s+t.length,t}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{n=new Function(r.variable||"obj","_",i)}catch(s){throw s.source=i,s}if(t)return n(t,x);var u=function(e){return n.call(this,e,x)};return u.source="function("+(r.variable||"obj")+"){\n"+i+"}",u},x.chain=function(e){return x(e).chain()};var z=function(e){return this._chain?x(e).chain():e};x.mixin(x),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];x.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],z.call(this,r)}}),L(["concat","join","slice"],function(e){var t=n[e];x.prototype[e]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),e._=_}.apply(e,arguments)})}(this),function(e,t){function r(e){var t=e.length,r=at.type(e);return at.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||"function"!==r&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=mt[e]={};return at.each(e.match(st)||[],function(e,r){t[r]=!0}),t}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=at.expando+Math.random()}function a(e,r,n){var o;if(n===t&&1===e.nodeType)if(o="data-"+r.replace(bt,"-$1").toLowerCase(),n=e.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:vt.test(n)?JSON.parse(n):n}catch(a){}gt.set(e,r,n)}else n=t;return n}function i(){return!0}function s(){return!1}function u(){try{return U.activeElement}catch(e){}}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e,t,r){if(at.isFunction(t))return at.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return at.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(At.test(t))return at.filter(t,e,r);t=at.filter(t,e)}return at.grep(e,function(e){return tt.call(t,e)>=0!==r})}function p(e,t){return at.nodeName(e,"table")&&at.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var r=e.length,n=0;r>n;n++)ht.set(e[n],"globalEval",!t||ht.get(t[n],"globalEval"))}function g(e,t){var r,n,o,a,i,s,u,l;if(1===t.nodeType){if(ht.hasData(e)&&(a=ht.access(e),i=ht.set(t,a),l=a.events)){delete i.handle,i.events={};for(o in l)for(r=0,n=l[o].length;n>r;r++)at.event.add(t,o,l[o][r])}gt.hasData(e)&&(s=gt.access(e),u=at.extend({},s),gt.set(t,u))}}function h(e,r){var n=e.getElementsByTagName?e.getElementsByTagName(r||"*"):e.querySelectorAll?e.querySelectorAll(r||"*"):[];return r===t||r&&at.nodeName(e,r)?at.merge([e],n):n}function v(e,t){var r=t.nodeName.toLowerCase();"input"===r&&qt.test(e.type)?t.checked=e.checked:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}function b(e,t){if(t in e)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=Zt.length;o--;)if(t=Zt[o]+r,t in e)return t;return n}function k(e,t){return e=t||e,"none"===at.css(e,"display")||!at.contains(e.ownerDocument,e)}function y(t){return e.getComputedStyle(t,null)}function _(e,t){for(var r,n,o,a=[],i=0,s=e.length;s>i;i++)n=e[i],n.style&&(a[i]=ht.get(n,"olddisplay"),r=n.style.display,t?(a[i]||"none"!==r||(n.style.display=""),""===n.style.display&&k(n)&&(a[i]=ht.access(n,"olddisplay",O(n.nodeName)))):a[i]||(o=k(n),(r&&"none"!==r||!o)&&ht.set(n,"olddisplay",o?r:at.css(n,"display"))));for(i=0;s>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[i]||"":"none"));return e}function w(e,t,r){var n=Wt.exec(t);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):t}function x(e,t,r,n,o){for(var a=r===(n?"border":"content")?4:"width"===t?1:0,i=0;4>a;a+=2)"margin"===r&&(i+=at.css(e,r+Qt[a],!0,o)),n?("content"===r&&(i-=at.css(e,"padding"+Qt[a],!0,o)),"margin"!==r&&(i-=at.css(e,"border"+Qt[a]+"Width",!0,o))):(i+=at.css(e,"padding"+Qt[a],!0,o),"padding"!==r&&(i+=at.css(e,"border"+Qt[a]+"Width",!0,o)));return i}function L(e,t,r){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=y(e),i=at.support.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=Ht(e,t,a),(0>o||null==o)&&(o=e.style[t]),Kt.test(o))return o;n=i&&(at.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+x(e,t,r||(i?"border":"content"),n,a)+"px"}function O(e){var t=U,r=Jt[e];return r||(r=F(e,t),"none"!==r&&r||($t=($t||at("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=($t[0].contentWindow||$t[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),r=F(e,t),$t.detach()),Jt[e]=r),r}function F(e,t){var r=at(t.createElement(e)).appendTo(t.body),n=at.css(r[0],"display");return r.remove(),n}function E(e,t,r,n){var o;if(at.isArray(t))at.each(t,function(t,o){r||tr.test(e)?n(e,o):E(e+"["+("object"==typeof o?t:"")+"]",o,r,n)});else if(r||"object"!==at.type(t))n(e,t);else for(o in t)E(e+"["+o+"]",t[o],r,n)}function A(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,o=0,a=t.toLowerCase().match(st)||[];if(at.isFunction(r))for(;n=a[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function C(e,t,r,n){function o(s){var u;return a[s]=!0,at.each(e[s]||[],function(e,s){var l=s(t,r,n);return"string"!=typeof l||i||a[l]?i?!(u=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),u}var a={},i=e===br;return o(t.dataTypes[0])||!a["*"]&&o("*")}function S(e,r){var n,o,a=at.ajaxSettings.flatOptions||{};for(n in r)r[n]!==t&&((a[n]?e:o||(o={}))[n]=r[n]);return o&&at.extend(!0,e,o),e}function V(e,r,n){for(var o,a,i,s,u=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),o===t&&(o=e.mimeType||r.getResponseHeader("Content-Type"));if(o)for(a in u)if(u[a]&&u[a].test(o)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}s||(s=a)}i=i||s}return i?(i!==l[0]&&l.unshift(i),n[i]):void 0}function T(e,t,r,n){var o,a,i,s,u,l={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(a=c.shift();a;)if(e.responseFields[a]&&(r[e.responseFields[a]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(i=l[u+" "+a]||l["* "+a],!i)for(o in l)if(s=o.split(" "),s[1]===a&&(i=l[u+" "+s[0]]||l["* "+s[0]])){i===!0?i=l[o]:l[o]!==!0&&(a=s[0],c.unshift(s[1]));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(p){return{state:"parsererror",error:i?p:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}function j(){return setTimeout(function(){Er=t}),Er=at.now()}function N(e,t,r){for(var n,o=(jr[t]||[]).concat(jr["*"]),a=0,i=o.length;i>a;a++)if(n=o[a].call(r,t,e))return n}function P(e,t,r){var n,o,a=0,i=Tr.length,s=at.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=Er||j(),r=Math.max(0,l.startTime+l.duration-t),n=r/l.duration||0,a=1-n,i=0,u=l.tweens.length;u>i;i++)l.tweens[i].run(a);return s.notifyWith(e,[l,a,r]),1>a&&u?r:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Er||j(),duration:r.duration,tweens:[],createTween:function(t,r){var n=at.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var r=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;n>r;r++)l.tweens[r].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(q(c,l.opts.specialEasing);i>a;a++)if(n=Tr[a].call(l,e,c,l.opts))return n;return at.map(c,N,l),at.isFunction(l.opts.start)&&l.opts.start.call(e,l),at.fx.timer(at.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function q(e,t){var r,n,o,a,i;for(r in e)if(n=at.camelCase(r),o=t[n],a=e[r],at.isArray(a)&&(o=a[1],a=e[r]=a[0]),r!==n&&(e[n]=a,delete e[r]),i=at.cssHooks[n],i&&"expand"in i){a=i.expand(a),delete e[n];for(r in a)r in e||(e[r]=a[r],t[r]=o)}else t[n]=o}function z(e,r,n){var o,a,i,s,u,l,c=this,p={},d=e.style,f=e.nodeType&&k(e),m=ht.get(e,"fxshow");n.queue||(u=at._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,at.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in r||"width"in r)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===at.css(e,"display")&&"none"===at.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(o in r)if(a=r[o],Cr.exec(a)){if(delete r[o],i=i||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||m[o]===t)continue;f=!0}p[o]=m&&m[o]||at.style(e,o)}if(!at.isEmptyObject(p)){m?"hidden"in m&&(f=m.hidden):m=ht.access(e,"fxshow",{}),i&&(m.hidden=!f),f?at(e).show():c.done(function(){at(e).hide()}),c.done(function(){var t;ht.remove(e,"fxshow");for(t in p)at.style(e,t,p[t])});for(o in p)s=N(f?m[o]:0,o,c),o in m||(m[o]=s.start,f&&(s.end=s.start,s.start="width"===o||"height"===o?1:0))}}function D(e,t,r,n,o){return new D.prototype.init(e,t,r,n,o)}function R(e,t){var r,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)r=Qt[o],n["margin"+r]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function M(e){return at.isWindow(e)?e:9===e.nodeType&&e.defaultView}var I,H,$=typeof t,B=e.location,U=e.document,W=U.documentElement,K=e.jQuery,G=e.$,J={},X=[],Y="2.0.2",Q=X.concat,Z=X.push,et=X.slice,tt=X.indexOf,rt=J.toString,nt=J.hasOwnProperty,ot=Y.trim,at=function(e,t){return new at.fn.init(e,t,I)},it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=/\S+/g,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ct=/^-ms-/,pt=/-([\da-z])/gi,dt=function(e,t){return t.toUpperCase()},ft=function(){U.removeEventListener("DOMContentLoaded",ft,!1),e.removeEventListener("load",ft,!1),at.ready()};at.fn=at.prototype={jquery:Y,constructor:at,init:function(e,r,n){var o,a;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ut.exec(e),!o||!o[1]&&r)return!r||r.jquery?(r||n).find(e):this.constructor(r).find(e);if(o[1]){if(r=r instanceof at?r[0]:r,at.merge(this,at.parseHTML(o[1],r&&r.nodeType?r.ownerDocument||r:U,!0)),lt.test(o[1])&&at.isPlainObject(r))for(o in r)at.isFunction(this[o])?this[o](r[o]):this.attr(o,r[o]);return this}return a=U.getElementById(o[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=U,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):at.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),at.makeArray(e,this))},selector:"",length:0,toArray:function(){return et.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=at.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return at.each(this,e,t)},ready:function(e){return at.ready.promise().done(e),this},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},map:function(e){return this.pushStack(at.map(this,function(t,r){return e.call(t,r,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},at.fn.init.prototype=at.fn,at.extend=at.fn.extend=function(){var e,r,n,o,a,i,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||at.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(r in e)n=s[r],o=e[r],s!==o&&(c&&o&&(at.isPlainObject(o)||(a=at.isArray(o)))?(a?(a=!1,i=n&&at.isArray(n)?n:[]):i=n&&at.isPlainObject(n)?n:{},s[r]=at.extend(c,i,o)):o!==t&&(s[r]=o));return s},at.extend({expando:"jQuery"+(Y+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===at&&(e.$=G),t&&e.jQuery===at&&(e.jQuery=K),at},isReady:!1,readyWait:1,holdReady:function(e){e?at.readyWait++:at.ready(!0)},ready:function(e){(e===!0?--at.readyWait:at.isReady)||(at.isReady=!0,e!==!0&&--at.readyWait>0||(H.resolveWith(U,[at]),at.fn.trigger&&at(U).trigger("ready").off("ready")))},isFunction:function(e){return"function"===at.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?J[rt.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==at.type(e)||e.nodeType||at.isWindow(e))return!1;try{if(e.constructor&&!nt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||U;var n=lt.exec(e),o=!r&&[];return n?[t.createElement(n[1])]:(n=at.buildFragment([e],t,o),o&&at(o).remove(),at.merge([],n.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var r,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,r=n.parseFromString(e,"text/xml")}catch(o){r=t}return(!r||r.getElementsByTagName("parsererror").length)&&at.error("Invalid XML: "+e),r},noop:function(){},globalEval:function(e){var t,r=eval;e=at.trim(e),e&&(1===e.indexOf("use strict")?(t=U.createElement("script"),t.text=e,U.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(ct,"ms-").replace(pt,dt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,a=0,i=e.length,s=r(e);if(n){if(s)for(;i>a&&(o=t.apply(e[a],n),o!==!1);a++);else for(a in e)if(o=t.apply(e[a],n),o===!1)break}else if(s)for(;i>a&&(o=t.call(e[a],a,e[a]),o!==!1);a++);else for(a in e)if(o=t.call(e[a],a,e[a]),o===!1)break;return e},trim:function(e){return null==e?"":ot.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?at.merge(n,"string"==typeof e?[e]:e):Z.call(n,e)),n},inArray:function(e,t,r){return null==t?-1:tt.call(t,e,r)},merge:function(e,r){var n=r.length,o=e.length,a=0;if("number"==typeof n)for(;n>a;a++)e[o++]=r[a];else for(;r[a]!==t;)e[o++]=r[a++];return e.length=o,e},grep:function(e,t,r){var n,o=[],a=0,i=e.length;for(r=!!r;i>a;a++)n=!!t(e[a],a),r!==n&&o.push(e[a]);return o},map:function(e,t,n){var o,a=0,i=e.length,s=r(e),u=[];if(s)for(;i>a;a++)o=t(e[a],a,n),null!=o&&(u[u.length]=o);else for(a in e)o=t(e[a],a,n),null!=o&&(u[u.length]=o);return Q.apply([],u)},guid:1,proxy:function(e,r){var n,o,a;return"string"==typeof r&&(n=e[r],r=e,e=n),at.isFunction(e)?(o=et.call(arguments,2),a=function(){return e.apply(r||this,o.concat(et.call(arguments)))},a.guid=e.guid=e.guid||at.guid++,a):t},access:function(e,r,n,o,a,i,s){var u=0,l=e.length,c=null==n;if("object"===at.type(n)){a=!0;for(u in n)at.access(e,r,u,n[u],!0,i,s)}else if(o!==t&&(a=!0,at.isFunction(o)||(s=!0),c&&(s?(r.call(e,o),r=null):(c=r,r=function(e,t,r){return c.call(at(e),r)})),r))for(;l>u;u++)r(e[u],n,s?o:o.call(e[u],u,r(e[u],n)));return a?e:c?r.call(e):l?r(e[0],n):i},now:Date.now,swap:function(e,t,r,n){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];o=r.apply(e,n||[]);for(a in t)e.style[a]=i[a];return o}}),at.ready.promise=function(t){return H||(H=at.Deferred(),"complete"===U.readyState?setTimeout(at.ready):(U.addEventListener("DOMContentLoaded",ft,!1),e.addEventListener("load",ft,!1))),H.promise(t)},at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()}),I=at(U),function(e,t){function r(e,t,r,n){var o,a,i,s,u,l,c,p,d,f;if((t?t.ownerDocument||t:B)!==q&&P(t),t=t||q,r=r||[],!e||"string"!=typeof e)return r;if(1!==(s=t.nodeType)&&9!==s)return[];if(D&&!n){if(o=xt.exec(e))if(i=o[1]){if(9===s){if(a=t.getElementById(i),!a||!a.parentNode)return r;if(a.id===i)return r.push(a),r}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(i))&&H(t,a)&&a.id===i)return r.push(a),r}else{if(o[2])return ot.apply(r,t.getElementsByTagName(e)),r;
if((i=o[3])&&E.getElementsByClassName&&t.getElementsByClassName)return ot.apply(r,t.getElementsByClassName(i)),r}if(E.qsa&&(!R||!R.test(e))){if(p=c=$,d=t,f=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=g(e),(c=t.getAttribute("id"))?p=c.replace(Ft,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+h(l[u]);d=vt.test(e)&&t.parentNode||t,f=l.join(",")}if(f)try{return ot.apply(r,d.querySelectorAll(f)),r}catch(m){}finally{c||t.removeAttribute("id")}}}return L(e.replace(mt,"$1"),t,r,n)}function n(e){return wt.test(e+"")}function o(){function e(r,n){return t.push(r+=" ")>C.cacheLength&&delete e[t.shift()],e[r]=n}var t=[];return e}function a(e){return e[$]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t,r){e=e.split("|");for(var n,o=e.length,a=r?null:t;o--;)(n=C.attrHandle[e[o]])&&n!==t||(C.attrHandle[e[o]]=a)}function u(e,t){var r=e.getAttributeNode(t);return r&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}function l(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function c(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:void 0}function p(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Z)-(~e.sourceIndex||Z);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function d(e){return function(t){var r=t.nodeName.toLowerCase();return"input"===r&&t.type===e}}function f(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function m(e){return a(function(t){return t=+t,a(function(r,n){for(var o,a=e([],r.length,t),i=a.length;i--;)r[o=a[i]]&&(r[o]=!(n[o]=r[o]))})})}function g(e,t){var n,o,a,i,s,u,l,c=G[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=C.preFilter;s;){(!n||(o=gt.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),u.push(a=[])),n=!1,(o=ht.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(mt," ")}),s=s.slice(n.length));for(i in C.filter)!(o=_t[i].exec(s))||l[i]&&!(o=l[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?r.error(e):G(e,u).slice(0)}function h(e){for(var t=0,r=e.length,n="";r>t;t++)n+=e[t].value;return n}function v(e,t,r){var n=t.dir,o=r&&"parentNode"===n,a=W++;return t.first?function(t,r,a){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,a)}:function(t,r,i){var s,u,l,c=U+" "+a;if(i){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,i))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(l=t[$]||(t[$]={}),(u=l[n])&&u[0]===c){if((s=u[1])===!0||s===A)return s===!0}else if(u=l[n]=[c],u[1]=e(t,r,i)||A,u[1]===!0)return!0}}function b(e){return e.length>1?function(t,r,n){for(var o=e.length;o--;)if(!e[o](t,r,n))return!1;return!0}:e[0]}function k(e,t,r,n,o){for(var a,i=[],s=0,u=e.length,l=null!=t;u>s;s++)(a=e[s])&&(!r||r(a,n,o))&&(i.push(a),l&&t.push(s));return i}function y(e,t,r,n,o,i){return n&&!n[$]&&(n=y(n)),o&&!o[$]&&(o=y(o,i)),a(function(a,i,s,u){var l,c,p,d=[],f=[],m=i.length,g=a||x(t||"*",s.nodeType?[s]:s,[]),h=!e||!a&&t?g:k(g,d,e,s,u),v=r?o||(a?e:m||n)?[]:i:h;if(r&&r(h,v,s,u),n)for(l=k(v,f),n(l,[],s,u),c=l.length;c--;)(p=l[c])&&(v[f[c]]=!(h[f[c]]=p));if(a){if(o||e){if(o){for(l=[],c=v.length;c--;)(p=v[c])&&l.push(h[c]=p);o(null,v=[],l,u)}for(c=v.length;c--;)(p=v[c])&&(l=o?st.call(a,p):d[c])>-1&&(a[l]=!(i[l]=p))}}else v=k(v===i?v.splice(m,v.length):v),o?o(null,i,v,u):ot.apply(i,v)})}function _(e){for(var t,r,n,o=e.length,a=C.relative[e[0].type],i=a||C.relative[" "],s=a?1:0,u=v(function(e){return e===t},i,!0),l=v(function(e){return st.call(t,e)>-1},i,!0),c=[function(e,r,n){return!a&&(n||r!==j)||((t=r).nodeType?u(e,r,n):l(e,r,n))}];o>s;s++)if(r=C.relative[e[s].type])c=[v(b(c),r)];else{if(r=C.filter[e[s].type].apply(null,e[s].matches),r[$]){for(n=++s;o>n&&!C.relative[e[n].type];n++);return y(s>1&&b(c),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(mt,"$1"),r,n>s&&_(e.slice(s,n)),o>n&&_(e=e.slice(n)),o>n&&h(e))}c.push(r)}return b(c)}function w(e,t){var n=0,o=t.length>0,i=e.length>0,s=function(a,s,u,l,c){var p,d,f,m=[],g=0,h="0",v=a&&[],b=null!=c,y=j,_=a||i&&C.find.TAG("*",c&&s.parentNode||s),w=U+=null==y?1:Math.random()||.1;for(b&&(j=s!==q&&s,A=n);null!=(p=_[h]);h++){if(i&&p){for(d=0;f=e[d++];)if(f(p,s,u)){l.push(p);break}b&&(U=w,A=++n)}o&&((p=!f&&p)&&g--,a&&v.push(p))}if(g+=h,o&&h!==g){for(d=0;f=t[d++];)f(v,m,s,u);if(a){if(g>0)for(;h--;)v[h]||m[h]||(m[h]=rt.call(l));m=k(m)}ot.apply(l,m),b&&!a&&m.length>0&&g+t.length>1&&r.uniqueSort(l)}return b&&(U=w,j=y),v};return o?a(s):s}function x(e,t,n){for(var o=0,a=t.length;a>o;o++)r(e,t[o],n);return n}function L(e,t,r,n){var o,a,i,s,u,l=g(e);if(!n&&1===l.length){if(a=l[0]=l[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&E.getById&&9===t.nodeType&&D&&C.relative[a[1].type]){if(t=(C.find.ID(i.matches[0].replace(Et,At),t)||[])[0],!t)return r;e=e.slice(a.shift().value.length)}for(o=_t.needsContext.test(e)?0:a.length;o--&&(i=a[o],!C.relative[s=i.type]);)if((u=C.find[s])&&(n=u(i.matches[0].replace(Et,At),vt.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=n.length&&h(a),!e)return ot.apply(r,n),r;break}}return T(e,l)(n,t,!D,r,vt.test(e)),r}function O(){}var F,E,A,C,S,V,T,j,N,P,q,z,D,R,M,I,H,$="sizzle"+-new Date,B=e.document,U=0,W=0,K=o(),G=o(),J=o(),X=!1,Y=function(){return 0},Q=typeof t,Z=1<<31,et={}.hasOwnProperty,tt=[],rt=tt.pop,nt=tt.push,ot=tt.push,it=tt.slice,st=tt.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1},ut="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",lt="[\\x20\\t\\r\\n\\f]",ct="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pt=ct.replace("w","w#"),dt="\\["+lt+"*("+ct+")"+lt+"*(?:([*^$|!~]?=)"+lt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+pt+")|)|)"+lt+"*\\]",ft=":("+ct+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+dt.replace(3,8)+")*)|.*)\\)|)",mt=new RegExp("^"+lt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+lt+"+$","g"),gt=new RegExp("^"+lt+"*,"+lt+"*"),ht=new RegExp("^"+lt+"*([>+~]|"+lt+")"+lt+"*"),vt=new RegExp(lt+"*[+~]"),bt=new RegExp("="+lt+"*([^\\]'\"]*)"+lt+"*\\]","g"),kt=new RegExp(ft),yt=new RegExp("^"+pt+"$"),_t={ID:new RegExp("^#("+ct+")"),CLASS:new RegExp("^\\.("+ct+")"),TAG:new RegExp("^("+ct.replace("w","w*")+")"),ATTR:new RegExp("^"+dt),PSEUDO:new RegExp("^"+ft),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+lt+"*(even|odd|(([+-]|)(\\d*)n|)"+lt+"*(?:([+-]|)"+lt+"*(\\d+)|))"+lt+"*\\)|)","i"),bool:new RegExp("^(?:"+ut+")$","i"),needsContext:new RegExp("^"+lt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+lt+"*((?:-\\d)?\\d*)"+lt+"*\\)|)(?=[^-]|$)","i")},wt=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Lt=/^(?:input|select|textarea|button)$/i,Ot=/^h\d$/i,Ft=/'|\\/g,Et=new RegExp("\\\\([\\da-f]{1,6}"+lt+"?|("+lt+")|.)","ig"),At=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{ot.apply(tt=it.call(B.childNodes),B.childNodes),tt[B.childNodes.length].nodeType}catch(Ct){ot={apply:tt.length?function(e,t){nt.apply(e,it.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}V=r.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=r.support={},P=r.setDocument=function(e){var t=e?e.ownerDocument||e:B,r=t.parentWindow;return t!==q&&9===t.nodeType&&t.documentElement?(q=t,z=t.documentElement,D=!V(t),r&&r.frameElement&&r.attachEvent("onbeforeunload",function(){P()}),E.attributes=i(function(e){return e.innerHTML="<a href='#'></a>",s("type|href|height|width",l,"#"===e.firstChild.getAttribute("href")),s(ut,u,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),E.input=i(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),s("value",c,E.attributes&&E.input),E.getElementsByTagName=i(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),E.getById=i(function(e){return z.appendChild(e).id=$,!t.getElementsByName||!t.getElementsByName($).length}),E.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Q&&D){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},C.filter.ID=function(e){var t=e.replace(Et,At);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(Et,At);return function(e){var r=typeof e.getAttributeNode!==Q&&e.getAttributeNode("id");return r&&r.value===t}}),C.find.TAG=E.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Q?t.getElementsByTagName(e):void 0}:function(e,t){var r,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;r=a[o++];)1===r.nodeType&&n.push(r);return n}return a},C.find.CLASS=E.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Q&&D?t.getElementsByClassName(e):void 0},M=[],R=[],(E.qsa=n(t.querySelectorAll))&&(i(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||R.push("\\["+lt+"*(?:value|"+ut+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),i(function(e){var r=t.createElement("input");r.setAttribute("type","hidden"),e.appendChild(r).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&R.push("[*^$]="+lt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(E.matchesSelector=n(I=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&i(function(e){E.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),M.push("!=",ft)}),R=R.length&&new RegExp(R.join("|")),M=M.length&&new RegExp(M.join("|")),H=n(z.contains)||z.compareDocumentPosition?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E.sortDetached=i(function(e){return 1&e.compareDocumentPosition(t.createElement("div"))}),Y=z.compareDocumentPosition?function(e,r){if(e===r)return X=!0,0;var n=r.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(r);return n?1&n||!E.sortDetached&&r.compareDocumentPosition(e)===n?e===t||H(B,e)?-1:r===t||H(B,r)?1:N?st.call(N,e)-st.call(N,r):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,r){var n,o=0,a=e.parentNode,i=r.parentNode,s=[e],u=[r];if(e===r)return X=!0,0;if(!a||!i)return e===t?-1:r===t?1:a?-1:i?1:N?st.call(N,e)-st.call(N,r):0;if(a===i)return p(e,r);for(n=e;n=n.parentNode;)s.unshift(n);for(n=r;n=n.parentNode;)u.unshift(n);for(;s[o]===u[o];)o++;return o?p(s[o],u[o]):s[o]===B?-1:u[o]===B?1:0},t):q},r.matches=function(e,t){return r(e,null,null,t)},r.matchesSelector=function(e,t){if((e.ownerDocument||e)!==q&&P(e),t=t.replace(bt,"='$1']"),!(!E.matchesSelector||!D||M&&M.test(t)||R&&R.test(t)))try{var n=I.call(e,t);if(n||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return r(t,q,null,[e]).length>0},r.contains=function(e,t){return(e.ownerDocument||e)!==q&&P(e),H(e,t)},r.attr=function(e,r){(e.ownerDocument||e)!==q&&P(e);var n=C.attrHandle[r.toLowerCase()],o=n&&et.call(C.attrHandle,r.toLowerCase())?n(e,r,!D):t;return o===t?E.attributes||!D?e.getAttribute(r):(o=e.getAttributeNode(r))&&o.specified?o.value:null:o},r.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},r.uniqueSort=function(e){var t,r=[],n=0,o=0;if(X=!E.detectDuplicates,N=!E.sortStable&&e.slice(0),e.sort(Y),X){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return e},S=r.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)r+=S(t);return r},C=r.selectors={cacheLength:50,createPseudo:a,match:_t,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Et,At),e[3]=(e[4]||e[5]||"").replace(Et,At),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||r.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&r.error(e[0]),e},PSEUDO:function(e){var r,n=!e[5]&&e[2];return _t.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&kt.test(n)&&(r=g(n,!0))&&(r=n.indexOf(")",n.length-r)-n.length)&&(e[0]=e[0].slice(0,r),e[2]=n.slice(0,r)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Et,At).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=K[e+" "];return t||(t=new RegExp("(^|"+lt+")"+e+"("+lt+"|$)"))&&K(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Q&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var a=r.attr(o,e);return null==a?"!="===t:t?(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,r,n,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,r,u){var l,c,p,d,f,m,g=a!==i?"nextSibling":"previousSibling",h=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s;if(h){if(a){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[i?h.firstChild:h.lastChild],i&&b){for(c=h[$]||(h[$]={}),l=c[e]||[],f=l[0]===U&&l[1],d=l[0]===U&&l[2],p=f&&h.childNodes[f];p=++f&&p&&p[g]||(d=f=0)||m.pop();)if(1===p.nodeType&&++d&&p===t){c[e]=[U,f,d];break}}else if(b&&(l=(t[$]||(t[$]={}))[e])&&l[0]===U)d=l[1];else for(;(p=++f&&p&&p[g]||(d=f=0)||m.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++d||(b&&((p[$]||(p[$]={}))[e]=[U,d]),p!==t)););return d-=o,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(e,t){var n,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||r.error("unsupported pseudo: "+e);return o[$]?o(t):o.length>1?(n=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,r){for(var n,a=o(e,t),i=a.length;i--;)n=st.call(e,a[i]),e[n]=!(r[n]=a[i])}):function(e){return o(e,0,n)}):o}},pseudos:{not:a(function(e){var t=[],r=[],n=T(e.replace(mt,"$1"));return n[$]?a(function(e,t,r,o){for(var a,i=n(e,null,o,[]),s=e.length;s--;)(a=i[s])&&(e[s]=!(t[s]=a))}):function(e,o,a){return t[0]=e,n(t,null,a,r),!r.pop()}}),has:a(function(e){return function(t){return r(e,t).length>0}}),contains:a(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:a(function(e){return yt.test(e||"")||r.error("unsupported lang: "+e),e=e.replace(Et,At).toLowerCase(),function(t){var r;do if(r=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===z},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return Ot.test(e.nodeName)},input:function(e){return Lt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:m(function(){return[0]}),last:m(function(e,t){return[t-1]}),eq:m(function(e,t,r){return[0>r?r+t:r]}),even:m(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:m(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:m(function(e,t,r){for(var n=0>r?r+t:r;--n>=0;)e.push(n);return e}),gt:m(function(e,t,r){for(var n=0>r?r+t:r;++n<t;)e.push(n);return e})}};for(F in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[F]=d(F);for(F in{submit:!0,reset:!0})C.pseudos[F]=f(F);T=r.compile=function(e,t){var r,n=[],o=[],a=J[e+" "];if(!a){for(t||(t=g(e)),r=t.length;r--;)a=_(t[r]),a[$]?n.push(a):o.push(a);a=J(e,w(o,n))}return a},C.pseudos.nth=C.pseudos.eq,O.prototype=C.filters=C.pseudos,C.setFilters=new O,E.sortStable=$.split("").sort(Y).join("")===$,P(),[0,0].sort(Y),E.detectDuplicates=X,at.find=r,at.expr=r.selectors,at.expr[":"]=at.expr.pseudos,at.unique=r.uniqueSort,at.text=r.getText,at.isXMLDoc=r.isXML,at.contains=r.contains}(e);var mt={};at.Callbacks=function(e){e="string"==typeof e?mt[e]||n(e):at.extend({},e);var r,o,a,i,s,u,l=[],c=!e.once&&[],p=function(t){for(r=e.memory&&t,o=!0,u=i||0,i=0,s=l.length,a=!0;l&&s>u;u++)if(l[u].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}a=!1,l&&(c?c.length&&p(c.shift()):r?l=[]:d.disable())},d={add:function(){if(l){var t=l.length;!function n(t){at.each(t,function(t,r){var o=at.type(r);"function"===o?e.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==o&&n(r)})}(arguments),a?s=l.length:r&&(i=t,p(r))}return this},remove:function(){return l&&at.each(arguments,function(e,t){for(var r;(r=at.inArray(t,l,r))>-1;)l.splice(r,1),a&&(s>=r&&s--,u>=r&&u--)}),this},has:function(e){return e?at.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=r=t,this},disabled:function(){return!l},lock:function(){return c=t,r||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||o&&!c||(a?c.push(t):p(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},at.extend({Deferred:function(e){var t=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return at.Deferred(function(r){at.each(t,function(t,a){var i=a[0],s=at.isFunction(e[t])&&e[t];o[a[1]](function(){var e=s&&s.apply(this,arguments);e&&at.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i+"With"](this===n?r.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?at.extend(e,n):n}},o={};return n.pipe=n.then,at.each(t,function(e,a){var i=a[2],s=a[3];n[a[1]]=i.add,s&&i.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?n:this,arguments),this},o[a[0]+"With"]=i.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,r,n,o=0,a=et.call(arguments),i=a.length,s=1!==i||e&&at.isFunction(e.promise)?i:0,u=1===s?e:at.Deferred(),l=function(e,r,n){return function(o){r[e]=this,n[e]=arguments.length>1?et.call(arguments):o,n===t?u.notifyWith(r,n):--s||u.resolveWith(r,n)}};if(i>1)for(t=new Array(i),r=new Array(i),n=new Array(i);i>o;o++)a[o]&&at.isFunction(a[o].promise)?a[o].promise().done(l(o,n,a)).fail(u.reject).progress(l(o,r,t)):--s;return s||u.resolveWith(n,a),u.promise()}}),at.support=function(t){var r=U.createElement("input"),n=U.createDocumentFragment(),o=U.createElement("div"),a=U.createElement("select"),i=a.appendChild(U.createElement("option"));return r.type?(r.type="checkbox",t.checkOn=""!==r.value,t.optSelected=i.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!i.disabled,r=U.createElement("input"),r.value="t",r.type="radio",t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),n.appendChild(r),t.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===o.style.backgroundClip,at(function(){var r,n,a="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",i=U.getElementsByTagName("body")[0];i&&(r=U.createElement("div"),r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",i.appendChild(r).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",at.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===o.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(o,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width,n=o.appendChild(U.createElement("div")),n.style.cssText=o.style.cssText=a,n.style.marginRight=n.style.width="0",o.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),i.removeChild(r))}),t):t}({});var gt,ht,vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,bt=/([A-Z])/g;o.uid=1,o.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=o.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(n){t[this.expando]=r,at.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var n,o=this.key(e),a=this.cache[o];if("string"==typeof t)a[t]=r;else if(at.isEmptyObject(a))at.extend(this.cache[o],t);else for(n in t)a[n]=t[n];return a},get:function(e,r){var n=this.cache[this.key(e)];return r===t?n:n[r]},access:function(e,r,n){return r===t||r&&"string"==typeof r&&n===t?this.get(e,r):(this.set(e,r,n),n!==t?n:r)},remove:function(e,r){var n,o,a,i=this.key(e),s=this.cache[i];if(r===t)this.cache[i]={};else{at.isArray(r)?o=r.concat(r.map(at.camelCase)):(a=at.camelCase(r),r in s?o=[r,a]:(o=a,o=o in s?[o]:o.match(st)||[])),n=o.length;for(;n--;)delete s[o[n]]}},hasData:function(e){return!at.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},gt=new o,ht=new o,at.extend({acceptData:o.accepts,hasData:function(e){return gt.hasData(e)||ht.hasData(e)},data:function(e,t,r){return gt.access(e,t,r)},removeData:function(e,t){gt.remove(e,t)},_data:function(e,t,r){return ht.access(e,t,r)},_removeData:function(e,t){ht.remove(e,t)}}),at.fn.extend({data:function(e,r){var n,o,i=this[0],s=0,u=null;if(e===t){if(this.length&&(u=gt.get(i),1===i.nodeType&&!ht.get(i,"hasDataAttrs"))){for(n=i.attributes;s<n.length;s++)o=n[s].name,0===o.indexOf("data-")&&(o=at.camelCase(o.slice(5)),a(i,o,u[o]));ht.set(i,"hasDataAttrs",!0)}return u}return"object"==typeof e?this.each(function(){gt.set(this,e)}):at.access(this,function(r){var n,o=at.camelCase(e);if(i&&r===t){if(n=gt.get(i,e),n!==t)return n;if(n=gt.get(i,o),n!==t)return n;if(n=a(i,o,t),n!==t)return n}else this.each(function(){var n=gt.get(this,o);gt.set(this,o,r),-1!==e.indexOf("-")&&n!==t&&gt.set(this,e,r)})},null,r,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){gt.remove(this,e)})}}),at.extend({queue:function(e,t,r){var n;return e?(t=(t||"fx")+"queue",n=ht.get(e,t),r&&(!n||at.isArray(r)?n=ht.access(e,t,at.makeArray(r)):n.push(r)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=at.queue(e,t),n=r.length,o=r.shift(),a=at._queueHooks(e,t),i=function(){at.dequeue(e,t)};"inprogress"===o&&(o=r.shift(),n--),o&&("fx"===t&&r.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ht.get(e,r)||ht.access(e,r,{empty:at.Callbacks("once memory").add(function(){ht.remove(e,[t+"queue",r])})})}}),at.fn.extend({queue:function(e,r){var n=2;return"string"!=typeof e&&(r=e,e="fx",n--),arguments.length<n?at.queue(this[0],e):r===t?this:this.each(function(){var t=at.queue(this,e,r);at._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&at.dequeue(this,e)})},dequeue:function(e){return this.each(function(){at.dequeue(this,e)})},delay:function(e,t){return e=at.fx?at.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var n=setTimeout(t,e);r.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,r){var n,o=1,a=at.Deferred(),i=this,s=this.length,u=function(){--o||a.resolveWith(i,[i])};for("string"!=typeof e&&(r=e,e=t),e=e||"fx";s--;)n=ht.get(i[s],e+"queueHooks"),n&&n.empty&&(o++,n.empty.add(u));return u(),a.promise(r)}});var kt,yt,_t=/[\t\r\n\f]/g,wt=/\r/g,xt=/^(?:input|select|textarea|button)$/i;at.fn.extend({attr:function(e,t){return at.access(this,at.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){at.removeAttr(this,e)})},prop:function(e,t){return at.access(this,at.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[at.propFix[e]||e]})},addClass:function(e){var t,r,n,o,a,i=0,s=this.length,u="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(st)||[];s>i;i++)if(r=this[i],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(_t," "):" ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r.className=at.trim(n)}return this},removeClass:function(e){var t,r,n,o,a,i=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(st)||[];s>i;i++)if(r=this[i],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(_t," "):"")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r.className=e?at.trim(n):""}return this},toggleClass:function(e,t){var r=typeof e,n="boolean"==typeof t;return this.each(at.isFunction(e)?function(r){at(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r)for(var o,a=0,i=at(this),s=t,u=e.match(st)||[];o=u[a++];)s=n?s:!i.hasClass(o),i[s?"addClass":"removeClass"](o);else(r===$||"boolean"===r)&&(this.className&&ht.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ht.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",r=0,n=this.length;n>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(_t," ").indexOf(t)>=0)return!0;return!1},val:function(e){var r,n,o,a=this[0];{if(arguments.length)return o=at.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=o?e.call(this,n,at(this).val()):e,null==a?a="":"number"==typeof a?a+="":at.isArray(a)&&(a=at.map(a,function(e){return null==e?"":e+""})),r=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,a,"value")!==t||(this.value=a))});if(a)return r=at.valHooks[a.type]||at.valHooks[a.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(a,"value"))!==t?n:(n=a.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)}}}),at.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,r,n=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,i=a?null:[],s=a?o+1:n.length,u=0>o?s:a?o:0;s>u;u++)if(r=n[u],!(!r.selected&&u!==o||(at.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&at.nodeName(r.parentNode,"optgroup"))){if(t=at(r).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var r,n,o=e.options,a=at.makeArray(t),i=o.length;i--;)n=o[i],(n.selected=at.inArray(at(n).val(),a)>=0)&&(r=!0);return r||(e.selectedIndex=-1),a}}},attr:function(e,r,n){var o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return typeof e.getAttribute===$?at.prop(e,r,n):(1===i&&at.isXMLDoc(e)||(r=r.toLowerCase(),o=at.attrHooks[r]||(at.expr.match.bool.test(r)?yt:kt)),n===t?o&&"get"in o&&null!==(a=o.get(e,r))?a:(a=at.find.attr(e,r),null==a?t:a):null!==n?o&&"set"in o&&(a=o.set(e,n,r))!==t?a:(e.setAttribute(r,n+""),n):void at.removeAttr(e,r))},removeAttr:function(e,t){var r,n,o=0,a=t&&t.match(st);if(a&&1===e.nodeType)for(;r=a[o++];)n=at.propFix[r]||r,at.expr.match.bool.test(r)&&(e[n]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!at.support.radioValue&&"radio"===t&&at.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,r,n){var o,a,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return i=1!==s||!at.isXMLDoc(e),i&&(r=at.propFix[r]||r,a=at.propHooks[r]),n!==t?a&&"set"in a&&(o=a.set(e,n,r))!==t?o:e[r]=n:a&&"get"in a&&null!==(o=a.get(e,r))?o:e[r]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||xt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),yt={set:function(e,t,r){return t===!1?at.removeAttr(e,r):e.setAttribute(r,r),r}},at.each(at.expr.match.bool.source.match(/\w+/g),function(e,r){var n=at.expr.attrHandle[r]||at.find.attr;at.expr.attrHandle[r]=function(e,r,o){var a=at.expr.attrHandle[r],i=o?t:(at.expr.attrHandle[r]=t)!=n(e,r,o)?r.toLowerCase():null;return at.expr.attrHandle[r]=a,i}}),at.support.optSelected||(at.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(e,t){return at.isArray(t)?e.checked=at.inArray(at(e).val(),t)>=0:void 0}},at.support.checkOn||(at.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Lt=/^key/,Ot=/^(?:mouse|contextmenu)|click/,Ft=/^(?:focusinfocus|focusoutblur)$/,Et=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(e,r,n,o,a){var i,s,u,l,c,p,d,f,m,g,h,v=ht.get(e);if(v){for(n.handler&&(i=n,n=i.handler,a=i.selector),n.guid||(n.guid=at.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(e){return typeof at===$||e&&at.event.triggered===e.type?t:at.event.dispatch.apply(s.elem,arguments)},s.elem=e),r=(r||"").match(st)||[""],c=r.length;c--;)u=Et.exec(r[c])||[],m=h=u[1],g=(u[2]||"").split(".").sort(),m&&(d=at.event.special[m]||{},m=(a?d.delegateType:d.bindType)||m,d=at.event.special[m]||{},p=at.extend({type:m,origType:h,data:o,handler:n,guid:n.guid,selector:a,needsContext:a&&at.expr.match.needsContext.test(a),namespace:g.join(".")},i),(f=l[m])||(f=l[m]=[],f.delegateCount=0,d.setup&&d.setup.call(e,o,g,s)!==!1||e.addEventListener&&e.addEventListener(m,s,!1)),d.add&&(d.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,p):f.push(p),at.event.global[m]=!0);e=null}},remove:function(e,t,r,n,o){var a,i,s,u,l,c,p,d,f,m,g,h=ht.hasData(e)&&ht.get(e);if(h&&(u=h.events)){for(t=(t||"").match(st)||[""],l=t.length;l--;)if(s=Et.exec(t[l])||[],f=g=s[1],m=(s[2]||"").split(".").sort(),f){for(p=at.event.special[f]||{},f=(n?p.delegateType:p.bindType)||f,d=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=d.length;a--;)c=d[a],!o&&g!==c.origType||r&&r.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(e,c));
i&&!d.length&&(p.teardown&&p.teardown.call(e,m,h.handle)!==!1||at.removeEvent(e,f,h.handle),delete u[f])}else for(f in u)at.event.remove(e,f+t[l],r,n,!0);at.isEmptyObject(u)&&(delete h.handle,ht.remove(e,"events"))}},trigger:function(r,n,o,a){var i,s,u,l,c,p,d,f=[o||U],m=nt.call(r,"type")?r.type:r,g=nt.call(r,"namespace")?r.namespace.split("."):[];if(s=u=o=o||U,3!==o.nodeType&&8!==o.nodeType&&!Ft.test(m+at.event.triggered)&&(m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,r=r[at.expando]?r:new at.Event(m,"object"==typeof r&&r),r.isTrigger=a?2:3,r.namespace=g.join("."),r.namespace_re=r.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=t,r.target||(r.target=o),n=null==n?[r]:at.makeArray(n,[r]),d=at.event.special[m]||{},a||!d.trigger||d.trigger.apply(o,n)!==!1)){if(!a&&!d.noBubble&&!at.isWindow(o)){for(l=d.delegateType||m,Ft.test(l+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(o.ownerDocument||U)&&f.push(u.defaultView||u.parentWindow||e)}for(i=0;(s=f[i++])&&!r.isPropagationStopped();)r.type=i>1?l:d.bindType||m,p=(ht.get(s,"events")||{})[r.type]&&ht.get(s,"handle"),p&&p.apply(s,n),p=c&&s[c],p&&at.acceptData(s)&&p.apply&&p.apply(s,n)===!1&&r.preventDefault();return r.type=m,a||r.isDefaultPrevented()||d._default&&d._default.apply(f.pop(),n)!==!1||!at.acceptData(o)||c&&at.isFunction(o[m])&&!at.isWindow(o)&&(u=o[c],u&&(o[c]=null),at.event.triggered=m,o[m](),at.event.triggered=t,u&&(o[c]=u)),r.result}},dispatch:function(e){e=at.event.fix(e);var r,n,o,a,i,s=[],u=et.call(arguments),l=(ht.get(this,"events")||{})[e.type]||[],c=at.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=at.event.handlers.call(this,e,l),r=0;(a=s[r++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,o=((at.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,u),o!==t&&(e.result=o)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,r){var n,o,a,i,s=[],u=r.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(o=[],n=0;u>n;n++)i=r[n],a=i.selector+" ",o[a]===t&&(o[a]=i.needsContext?at(a,this).index(l)>=0:at.find(a,this,null,[l]).length),o[a]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return u<r.length&&s.push({elem:this,handlers:r.slice(u)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var n,o,a,i=r.button;return null==e.pageX&&null!=r.clientX&&(n=e.target.ownerDocument||U,o=n.documentElement,a=n.body,e.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)),e.which||i===t||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[at.expando])return e;var t,r,n,o=e.type,a=e,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=Ot.test(o)?this.mouseHooks:Lt.test(o)?this.keyHooks:{}),n=i.props?this.props.concat(i.props):this.props,e=new at.Event(a),t=n.length;t--;)r=n[t],e[r]=a[r];return e.target||(e.target=U),3===e.target.nodeType&&(e.target=e.target.parentNode),i.filter?i.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&at.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return at.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var o=at.extend(new at.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?at.event.trigger(o,null,t):at.event.dispatch.call(t,o),o.isDefaultPrevented()&&r.preventDefault()}},at.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},at.Event=function(e,t){return this instanceof at.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?i:s):this.type=e,t&&at.extend(this,t),this.timeStamp=e&&e.timeStamp||at.now(),void(this[at.expando]=!0)):new at.Event(e,t)},at.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=i,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=i,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){at.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==n&&!at.contains(n,o))&&(e.type=a.origType,r=a.handler.apply(this,arguments),e.type=t),r}}}),at.support.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,n=function(e){at.event.simulate(t,e.target,at.event.fix(e),!0)};at.event.special[t]={setup:function(){0===r++&&U.addEventListener(e,n,!0)},teardown:function(){0===--r&&U.removeEventListener(e,n,!0)}}}),at.fn.extend({on:function(e,r,n,o,a){var i,u;if("object"==typeof e){"string"!=typeof r&&(n=n||r,r=t);for(u in e)this.on(u,r,n,e[u],a);return this}if(null==n&&null==o?(o=r,n=r=t):null==o&&("string"==typeof r?(o=n,n=t):(o=n,n=r,r=t)),o===!1)o=s;else if(!o)return this;return 1===a&&(i=o,o=function(e){return at().off(e),i.apply(this,arguments)},o.guid=i.guid||(i.guid=at.guid++)),this.each(function(){at.event.add(this,e,o,n,r)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,r,n){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,at(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(a in e)this.off(a,r,e[a]);return this}return(r===!1||"function"==typeof r)&&(n=r,r=t),n===!1&&(n=s),this.each(function(){at.event.remove(this,e,n,r)})},trigger:function(e,t){return this.each(function(){at.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?at.event.trigger(e,t,r,!0):void 0}});var At=/^.[^:#\[\.,]*$/,Ct=/^(?:parents|prev(?:Until|All))/,St=at.expr.match.needsContext,Vt={children:!0,contents:!0,next:!0,prev:!0};at.fn.extend({find:function(e){var t,r=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(at(e).filter(function(){for(t=0;o>t;t++)if(at.contains(n[t],this))return!0}));for(t=0;o>t;t++)at.find(e,n[t],r);return r=this.pushStack(o>1?at.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},has:function(e){var t=at(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(at.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e||[],!0))},filter:function(e){return this.pushStack(c(this,e||[],!1))},is:function(e){return!!c(this,"string"==typeof e&&St.test(e)?at(e):e||[],!1).length},closest:function(e,t){for(var r,n=0,o=this.length,a=[],i=St.test(e)||"string"!=typeof e?at(e,t||this.context):0;o>n;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(i?i.index(r)>-1:1===r.nodeType&&at.find.matchesSelector(r,e))){r=a.push(r);break}return this.pushStack(a.length>1?at.unique(a):a)},index:function(e){return e?"string"==typeof e?tt.call(at(e),this[0]):tt.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var r="string"==typeof e?at(e,t):at.makeArray(e&&e.nodeType?[e]:e),n=at.merge(this.get(),r);return this.pushStack(at.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),at.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return at.dir(e,"parentNode")},parentsUntil:function(e,t,r){return at.dir(e,"parentNode",r)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return at.dir(e,"nextSibling")},prevAll:function(e){return at.dir(e,"previousSibling")},nextUntil:function(e,t,r){return at.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return at.dir(e,"previousSibling",r)},siblings:function(e){return at.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return at.sibling(e.firstChild)},contents:function(e){return e.contentDocument||at.merge([],e.childNodes)}},function(e,t){at.fn[e]=function(r,n){var o=at.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(o=at.filter(n,o)),this.length>1&&(Vt[e]||at.unique(o),Ct.test(e)&&o.reverse()),this.pushStack(o)}}),at.extend({filter:function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?at.find.matchesSelector(n,e)?[n]:[]:at.find.matches(e,at.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,r,n){for(var o=[],a=n!==t;(e=e[r])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&at(e).is(n))break;o.push(e)}return o},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}});var Tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jt=/<([\w:]+)/,Nt=/<|&#?\w+;/,Pt=/<(?:script|style|link)/i,qt=/^(?:checkbox|radio)$/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^$|\/(?:java|ecma)script/i,Rt=/^true\/(.*)/,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,It={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};It.optgroup=It.option,It.tbody=It.tfoot=It.colgroup=It.caption=It.thead,It.th=It.td,at.fn.extend({text:function(e){return at.access(this,function(e){return e===t?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,n=e?at.filter(e,this):this,o=0;null!=(r=n[o]);o++)t||1!==r.nodeType||at.cleanData(h(r)),r.parentNode&&(t&&at.contains(r.ownerDocument,r)&&m(h(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(at.cleanData(h(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return at.clone(this,e,t)})},html:function(e){return at.access(this,function(e){var r=this[0]||{},n=0,o=this.length;if(e===t&&1===r.nodeType)return r.innerHTML;if("string"==typeof e&&!Pt.test(e)&&!It[(jt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Tt,"<$1></$2>");try{for(;o>n;n++)r=this[n]||{},1===r.nodeType&&(at.cleanData(h(r,!1)),r.innerHTML=e);r=0}catch(a){}}r&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=at.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(r){var n=e[t++],o=e[t++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),at(this).remove(),o.insertBefore(r,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,r){e=Q.apply([],e);var n,o,a,i,s,u,l=0,c=this.length,p=this,m=c-1,g=e[0],v=at.isFunction(g);if(v||!(1>=c||"string"!=typeof g||at.support.checkClone)&&zt.test(g))return this.each(function(n){var o=p.eq(n);v&&(e[0]=g.call(this,n,o.html())),o.domManip(e,t,r)});if(c&&(n=at.buildFragment(e,this[0].ownerDocument,!1,!r&&this),o=n.firstChild,1===n.childNodes.length&&(n=o),o)){for(a=at.map(h(n,"script"),d),i=a.length;c>l;l++)s=n,l!==m&&(s=at.clone(s,!0,!0),i&&at.merge(a,h(s,"script"))),t.call(this[l],s,l);if(i)for(u=a[a.length-1].ownerDocument,at.map(a,f),l=0;i>l;l++)s=a[l],Dt.test(s.type||"")&&!ht.access(s,"globalEval")&&at.contains(u,s)&&(s.src?at._evalUrl(s.src):at.globalEval(s.textContent.replace(Mt,"")))}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){at.fn[e]=function(e){for(var r,n=[],o=at(e),a=o.length-1,i=0;a>=i;i++)r=i===a?this:this.clone(!0),at(o[i])[t](r),Z.apply(n,r.get());return this.pushStack(n)}}),at.extend({clone:function(e,t,r){var n,o,a,i,s=e.cloneNode(!0),u=at.contains(e.ownerDocument,e);if(!(at.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||at.isXMLDoc(e)))for(i=h(s),a=h(e),n=0,o=a.length;o>n;n++)v(a[n],i[n]);if(t)if(r)for(a=a||h(e),i=i||h(s),n=0,o=a.length;o>n;n++)g(a[n],i[n]);else g(e,s);return i=h(s,"script"),i.length>0&&m(i,!u&&h(e,"script")),s},buildFragment:function(e,t,r,n){for(var o,a,i,s,u,l,c=0,p=e.length,d=t.createDocumentFragment(),f=[];p>c;c++)if(o=e[c],o||0===o)if("object"===at.type(o))at.merge(f,o.nodeType?[o]:o);else if(Nt.test(o)){for(a=a||d.appendChild(t.createElement("div")),i=(jt.exec(o)||["",""])[1].toLowerCase(),s=It[i]||It._default,a.innerHTML=s[1]+o.replace(Tt,"<$1></$2>")+s[2],l=s[0];l--;)a=a.firstChild;at.merge(f,a.childNodes),a=d.firstChild,a.textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",c=0;o=f[c++];)if((!n||-1===at.inArray(o,n))&&(u=at.contains(o.ownerDocument,o),a=h(d.appendChild(o),"script"),u&&m(a),r))for(l=0;o=a[l++];)Dt.test(o.type||"")&&r.push(o);return d},cleanData:function(e){for(var r,n,a,i,s,u,l=at.event.special,c=0;(n=e[c])!==t;c++){if(o.accepts(n)&&(s=n[ht.expando],s&&(r=ht.cache[s]))){if(a=Object.keys(r.events||{}),a.length)for(u=0;(i=a[u])!==t;u++)l[i]?at.event.remove(n,i):at.removeEvent(n,i,r.handle);ht.cache[s]&&delete ht.cache[s]}delete gt.cache[n[gt.expando]]}},_evalUrl:function(e){return at.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),at.fn.extend({wrapAll:function(e){var t;return at.isFunction(e)?this.each(function(t){at(this).wrapAll(e.call(this,t))}):(this[0]&&(t=at(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(at.isFunction(e)?function(t){at(this).wrapInner(e.call(this,t))}:function(){var t=at(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=at.isFunction(e);return this.each(function(r){at(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}});var Ht,$t,Bt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Wt=new RegExp("^("+it+")(.*)$","i"),Kt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Gt=new RegExp("^([+-])=("+it+")","i"),Jt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Qt=["Top","Right","Bottom","Left"],Zt=["Webkit","O","Moz","ms"];at.fn.extend({css:function(e,r){return at.access(this,function(e,r,n){var o,a,i={},s=0;if(at.isArray(r)){for(o=y(e),a=r.length;a>s;s++)i[r[s]]=at.css(e,r[s],!1,o);return i}return n!==t?at.style(e,r,n):at.css(e,r)},e,r,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:k(this))?at(this).show():at(this).hide()})}}),at.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ht(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,r,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,s,u=at.camelCase(r),l=e.style;return r=at.cssProps[u]||(at.cssProps[u]=b(l,u)),s=at.cssHooks[r]||at.cssHooks[u],n===t?s&&"get"in s&&(a=s.get(e,!1,o))!==t?a:l[r]:(i=typeof n,"string"===i&&(a=Gt.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(at.css(e,r)),i="number"),null==n||"number"===i&&isNaN(n)||("number"!==i||at.cssNumber[u]||(n+="px"),at.support.clearCloneStyle||""!==n||0!==r.indexOf("background")||(l[r]="inherit"),s&&"set"in s&&(n=s.set(e,n,o))===t||(l[r]=n)),void 0)}},css:function(e,r,n,o){var a,i,s,u=at.camelCase(r);return r=at.cssProps[u]||(at.cssProps[u]=b(e.style,u)),s=at.cssHooks[r]||at.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,n)),a===t&&(a=Ht(e,r,o)),"normal"===a&&r in Yt&&(a=Yt[r]),""===n||n?(i=parseFloat(a),n===!0||at.isNumeric(i)?i||0:a):a}}),Ht=function(e,r,n){var o,a,i,s=n||y(e),u=s?s.getPropertyValue(r)||s[r]:t,l=e.style;return s&&(""!==u||at.contains(e.ownerDocument,e)||(u=at.style(e,r)),Kt.test(u)&&Ut.test(r)&&(o=l.width,a=l.minWidth,i=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=o,l.minWidth=a,l.maxWidth=i)),u},at.each(["height","width"],function(e,t){at.cssHooks[t]={get:function(e,r,n){return r?0===e.offsetWidth&&Bt.test(at.css(e,"display"))?at.swap(e,Xt,function(){return L(e,t,n)}):L(e,t,n):void 0},set:function(e,r,n){var o=n&&y(e);return w(e,r,n?x(e,t,n,at.support.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,o),o):0)}}}),at(function(){at.support.reliableMarginRight||(at.cssHooks.marginRight={get:function(e,t){return t?at.swap(e,{display:"inline-block"},Ht,[e,"marginRight"]):void 0}}),!at.support.pixelPosition&&at.fn.position&&at.each(["top","left"],function(e,t){at.cssHooks[t]={get:function(e,r){return r?(r=Ht(e,t),Kt.test(r)?at(e).position()[t]+"px":r):void 0}}})}),at.expr&&at.expr.filters&&(at.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},at.expr.filters.visible=function(e){return!at.expr.filters.hidden(e)}),at.each({margin:"",padding:"",border:"Width"},function(e,t){at.cssHooks[e+t]={expand:function(r){for(var n=0,o={},a="string"==typeof r?r.split(" "):[r];4>n;n++)o[e+Qt[n]+t]=a[n]||a[n-2]||a[0];return o}},Ut.test(e)||(at.cssHooks[e+t].set=w)});var er=/%20/g,tr=/\[\]$/,rr=/\r?\n/g,nr=/^(?:submit|button|image|reset|file)$/i,or=/^(?:input|select|textarea|keygen)/i;at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=at.prop(this,"elements");return e?at.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!at(this).is(":disabled")&&or.test(this.nodeName)&&!nr.test(e)&&(this.checked||!qt.test(e))}).map(function(e,t){var r=at(this).val();return null==r?null:at.isArray(r)?at.map(r,function(e){return{name:t.name,value:e.replace(rr,"\r\n")}}):{name:t.name,value:r.replace(rr,"\r\n")}}).get()}}),at.param=function(e,r){var n,o=[],a=function(e,t){t=at.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(r===t&&(r=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(e)||e.jquery&&!at.isPlainObject(e))at.each(e,function(){a(this.name,this.value)});else for(n in e)E(n,e[n],r,a);return o.join("&").replace(er,"+")},at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){at.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),at.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var ar,ir,sr=at.now(),ur=/\?/,lr=/#.*$/,cr=/([?&])_=[^&]*/,pr=/^(.*?):[ \t]*([^\r\n]*)$/gm,dr=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fr=/^(?:GET|HEAD)$/,mr=/^\/\//,gr=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,hr=at.fn.load,vr={},br={},kr="*/".concat("*");try{ir=B.href}catch(yr){ir=U.createElement("a"),ir.href="",ir=ir.href}ar=gr.exec(ir.toLowerCase())||[],at.fn.load=function(e,r,n){if("string"!=typeof e&&hr)return hr.apply(this,arguments);var o,a,i,s=this,u=e.indexOf(" ");return u>=0&&(o=e.slice(u),e=e.slice(0,u)),at.isFunction(r)?(n=r,r=t):r&&"object"==typeof r&&(a="POST"),s.length>0&&at.ajax({url:e,type:a,dataType:"html",data:r}).done(function(e){i=arguments,s.html(o?at("<div>").append(at.parseHTML(e)).find(o):e)}).complete(n&&function(e,t){s.each(n,i||[e.responseText,t,e])}),this},at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){at.fn[t]=function(e){return this.on(t,e)}}),at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ir,type:"GET",isLocal:dr.test(ar[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?S(S(e,at.ajaxSettings),t):S(at.ajaxSettings,e)},ajaxPrefilter:A(vr),ajaxTransport:A(br),ajax:function(e,r){function n(e,r,n,s){var l,p,b,k,_,x=r;2!==y&&(y=2,u&&clearTimeout(u),o=t,i=s||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(k=V(d,w,n)),k=T(d,k,w,l),l?(d.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(at.lastModified[a]=_),_=w.getResponseHeader("etag"),_&&(at.etag[a]=_)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=k.state,p=k.data,b=k.error,l=!b)):(b=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(r||x)+"",l?g.resolveWith(f,[p,x,w]):g.rejectWith(f,[w,x,b]),w.statusCode(v),v=t,c&&m.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?p:b]),h.fireWith(f,[w,x]),c&&(m.trigger("ajaxComplete",[w,d]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(r=e,e=t),r=r||{};var o,a,i,s,u,l,c,p,d=at.ajaxSetup({},r),f=d.context||d,m=d.context&&(f.nodeType||f.jquery)?at(f):at.event,g=at.Deferred(),h=at.Callbacks("once memory"),v=d.statusCode||{},b={},k={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=pr.exec(i);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?i:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return y||(e=k[r]=k[r]||e,b[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return o&&o.abort(t),n(0,t),this}};if(g.promise(w).complete=h.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||ir)+"").replace(lr,"").replace(mr,ar[1]+"//"),d.type=r.method||r.type||d.method||d.type,d.dataTypes=at.trim(d.dataType||"*").toLowerCase().match(st)||[""],null==d.crossDomain&&(l=gr.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===ar[1]&&l[2]===ar[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ar[3]||("http:"===ar[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=at.param(d.data,d.traditional)),C(vr,d,r,w),2===y)return w;c=d.global,c&&0===at.active++&&at.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!fr.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(ur.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=cr.test(a)?a.replace(cr,"$1_="+sr++):a+(ur.test(a)?"&":"?")+"_="+sr++)),d.ifModified&&(at.lastModified[a]&&w.setRequestHeader("If-Modified-Since",at.lastModified[a]),at.etag[a]&&w.setRequestHeader("If-None-Match",at.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||r.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+kr+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)w.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===y))return w.abort();_="abort";for(p in{success:1,error:1,complete:1})w[p](d[p]);if(o=C(br,d,r,w)){w.readyState=1,c&&m.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(u=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,o.send(b,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(e,t,r){return at.get(e,t,r,"json")},getScript:function(e,r){return at.get(e,t,r,"script")}}),at.each(["get","post"],function(e,r){at[r]=function(e,n,o,a){return at.isFunction(n)&&(a=a||o,o=n,n=t),at.ajax({url:e,type:r,dataType:a,data:n,success:o})}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return at.globalEval(e),e}}}),at.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),at.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,o){t=at("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),U.head.appendChild(t[0])},abort:function(){r&&r()}}}});var _r=[],wr=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=_r.pop()||at.expando+"_"+sr++;return this[e]=!0,e}}),at.ajaxPrefilter("json jsonp",function(r,n,o){var a,i,s,u=r.jsonp!==!1&&(wr.test(r.url)?"url":"string"==typeof r.data&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&wr.test(r.data)&&"data");return u||"jsonp"===r.dataTypes[0]?(a=r.jsonpCallback=at.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,u?r[u]=r[u].replace(wr,"$1"+a):r.jsonp!==!1&&(r.url+=(ur.test(r.url)?"&":"?")+r.jsonp+"="+a),r.converters["script json"]=function(){return s||at.error(a+" was not called"),s[0]},r.dataTypes[0]="json",i=e[a],e[a]=function(){s=arguments},o.always(function(){e[a]=i,r[a]&&(r.jsonpCallback=n.jsonpCallback,_r.push(a)),s&&at.isFunction(i)&&i(s[0]),s=i=t}),"script"):void 0}),at.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xr=at.ajaxSettings.xhr(),Lr={0:200,1223:204},Or=0,Fr={};e.ActiveXObject&&at(e).on("unload",function(){for(var e in Fr)Fr[e]();Fr=t}),at.support.cors=!!xr&&"withCredentials"in xr,at.support.ajax=xr=!!xr,at.ajaxTransport(function(e){var r;return at.support.cors||xr&&!e.crossDomain?{send:function(n,o){var a,i,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)s.setRequestHeader(a,n[a]);r=function(e){return function(){r&&(delete Fr[i],r=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?o(s.status||404,s.statusText):o(Lr[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:t,s.getAllResponseHeaders()))}},s.onload=r(),s.onerror=r("error"),r=Fr[i=Or++]=r("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){r&&r()}}:void 0});var Er,Ar,Cr=/^(?:toggle|show|hide)$/,Sr=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),Vr=/queueHooks$/,Tr=[z],jr={"*":[function(e,t){var r=this.createTween(e,t),n=r.cur(),o=Sr.exec(t),a=o&&o[3]||(at.cssNumber[e]?"":"px"),i=(at.cssNumber[e]||"px"!==a&&+n)&&Sr.exec(at.css(r.elem,e)),s=1,u=20;if(i&&i[3]!==a){a=a||i[3],o=o||[],i=+n||1;do s=s||".5",i/=s,at.style(r.elem,e,i+a);while(s!==(s=r.cur()/n)&&1!==s&&--u)}return o&&(i=r.start=+i||+n||0,r.unit=a,r.end=o[1]?i+(o[1]+1)*o[2]:+o[2]),r}]};at.Animation=at.extend(P,{tweener:function(e,t){at.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,n=0,o=e.length;o>n;n++)r=e[n],jr[r]=jr[r]||[],jr[r].unshift(t)},prefilter:function(e,t){t?Tr.unshift(e):Tr.push(e)}}),at.Tween=D,D.prototype={constructor:D,init:function(e,t,r,n,o,a){this.elem=e,this.prop=r,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(at.cssNumber[r]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,r=D.propHooks[this.prop];return this.pos=t=this.options.duration?at.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=at.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){at.fx.step[e.prop]?at.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[at.cssProps[e.prop]]||at.cssHooks[e.prop])?at.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},at.each(["toggle","show","hide"],function(e,t){var r=at.fn[t];at.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(R(t,!0),e,n,o)}}),at.fn.extend({fadeTo:function(e,t,r,n){return this.filter(k).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var o=at.isEmptyObject(e),a=at.speed(t,r,n),i=function(){var t=P(this,at.extend({},e),a);(o||ht.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||a.queue===!1?this.each(i):this.queue(a.queue,i)},stop:function(e,r,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=r,r=e,e=t),r&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=at.timers,i=ht.get(this);if(r)i[r]&&i[r].stop&&o(i[r]);else for(r in i)i[r]&&i[r].stop&&Vr.test(r)&&o(i[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));(t||!n)&&at.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=ht.get(this),n=r[e+"queue"],o=r[e+"queueHooks"],a=at.timers,i=n?n.length:0;for(r.finish=!0,at.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;i>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),at.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){at.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),at.speed=function(e,t,r){var n=e&&"object"==typeof e?at.extend({},e):{complete:r||!r&&t||at.isFunction(e)&&e,duration:e,easing:r&&t||t&&!at.isFunction(t)&&t};return n.duration=at.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in at.fx.speeds?at.fx.speeds[n.duration]:at.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){at.isFunction(n.old)&&n.old.call(this),n.queue&&at.dequeue(this,n.queue)
},n},at.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},at.timers=[],at.fx=D.prototype.init,at.fx.tick=function(){var e,r=at.timers,n=0;for(Er=at.now();n<r.length;n++)e=r[n],e()||r[n]!==e||r.splice(n--,1);r.length||at.fx.stop(),Er=t},at.fx.timer=function(e){e()&&at.timers.push(e)&&at.fx.start()},at.fx.interval=13,at.fx.start=function(){Ar||(Ar=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(Ar),Ar=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fx.step={},at.expr&&at.expr.filters&&(at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length}),at.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){at.offset.setOffset(this,e,t)});var r,n,o=this[0],a={top:0,left:0},i=o&&o.ownerDocument;if(i)return r=i.documentElement,at.contains(r,o)?(typeof o.getBoundingClientRect!==$&&(a=o.getBoundingClientRect()),n=M(i),{top:a.top+n.pageYOffset-r.clientTop,left:a.left+n.pageXOffset-r.clientLeft}):a},at.offset={setOffset:function(e,t,r){var n,o,a,i,s,u,l,c=at.css(e,"position"),p=at(e),d={};"static"===c&&(e.style.position="relative"),s=p.offset(),a=at.css(e,"top"),u=at.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1,l?(n=p.position(),i=n.top,o=n.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),at.isFunction(t)&&(t=t.call(e,r,s)),null!=t.top&&(d.top=t.top-s.top+i),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):p.css(d)}},at.fn.extend({position:function(){if(this[0]){var e,t,r=this[0],n={top:0,left:0};return"fixed"===at.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),at.nodeName(e[0],"html")||(n=e.offset()),n.top+=at.css(e[0],"borderTopWidth",!0),n.left+=at.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-at.css(r,"marginTop",!0),left:t.left-n.left-at.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||W;e&&!at.nodeName(e,"html")&&"static"===at.css(e,"position");)e=e.offsetParent;return e||W})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,n){var o="pageYOffset"===n;at.fn[r]=function(a){return at.access(this,function(r,a,i){var s=M(r);return i===t?s?s[n]:r[a]:void(s?s.scrollTo(o?e.pageXOffset:i,o?i:e.pageYOffset):r[a]=i)},r,a,arguments.length,null)}}),at.each({Height:"height",Width:"width"},function(e,r){at.each({padding:"inner"+e,content:r,"":"outer"+e},function(n,o){at.fn[o]=function(o,a){var i=arguments.length&&(n||"boolean"!=typeof o),s=n||(o===!0||a===!0?"margin":"border");return at.access(this,function(r,n,o){var a;return at.isWindow(r)?r.document.documentElement["client"+e]:9===r.nodeType?(a=r.documentElement,Math.max(r.body["scroll"+e],a["scroll"+e],r.body["offset"+e],a["offset"+e],a["client"+e])):o===t?at.css(r,n,s):at.style(r,n,o,s)},r,i?o:t,i,null)}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=at:"function"==typeof define&&define.amd&&define("jquery",[],function(){return at}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=at)}(window),define("polyfill",[],function(){var e=window.location;e.origin||(e.origin=e.protocol+"//"+e.host),window.performance||(window.performance={}),window.performance.now||(window.performance.now=function(){return+new Date})}),function(e){define("document-register-element",[],function(){return function(){return function(e,t,r,n){function o(e,t){for(var r=0,n=e.length;n>r;r++)f(e[r],t)}function a(e){for(var t,r=0,n=e.length;n>r;r++)t=e[r],k(t,C[s(t)])}function i(e){return function(t){P.call(U,t)&&(f(t,e),o(t.querySelectorAll(S),e))}}function s(e){var t=e.getAttribute("is"),r=e.nodeName,n=T.call(A,t?O+t.toUpperCase():L+r);return t&&n>-1&&!u(r,t)?-1:n}function u(e,t){return-1<S.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,r=e.attrChange,n=e.prevValue,o=e.newValue;t.attributeChangedCallback&&"style"!==e.attrName&&t.attributeChangedCallback(e.attrName,r===e.ADDITION?null:n,r===e.REMOVAL?null:o)}function c(e){var t=i(e);return function(e){t(e.target)}}function p(e,t){var r=this;K.call(r,e,t),m.call(r,{target:r})}function d(e,t){$(e,t),v?v.observe(e,J):(Q&&(e.setAttribute=p,e[y]=h(e),e.addEventListener(x,m)),e.addEventListener(w,l)),e.createdCallback&&(e.created=!0,e.createdCallback(),e.created=!1)}function f(e,t){var r,n=s(e),o="attached",a="detached";n>-1&&(b(e,C[n]),n=0,t!==o||e[o]?t!==a||e[a]||(e[o]=!1,e[a]=!0,n=1):(e[a]=!1,e[o]=!0,n=1),n&&(r=e[t+"Callback"])&&r.call(e))}if(!(n in t)){var m,g,h,v,b,k,y="__"+n+(1e5*Math.random()>>0),_="extends",w="DOMAttrModified",x="DOMSubtreeModified",L="<",O="=",F=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,E=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],A=[],C=[],S="",V=t.documentElement,T=A.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},j=r.prototype,N=j.hasOwnProperty,P=j.isPrototypeOf,q=r.defineProperty,z=r.getOwnPropertyDescriptor,D=r.getOwnPropertyNames,R=r.getPrototypeOf,M=r.setPrototypeOf,I=!!r.__proto__,H=r.create||function Z(e){return e?(Z.prototype=e,new Z):this},$=M||(I?function(e,t){return e.__proto__=t,e}:D&&z?function(){function e(e,t){for(var r,n=D(t),o=0,a=n.length;a>o;o++)r=n[o],N.call(e,r)||q(e,r,z(t,r))}return function(t,r){do e(t,r);while(r=R(r));return t}}():function(e,t){for(var r in t)e[r]=t[r];return e}),B=e.MutationObserver||e.WebKitMutationObserver,U=(e.HTMLElement||e.Element||e.Node).prototype,W=U.cloneNode,K=U.setAttribute,G=t.createElement,J=B&&{attributes:!0,characterData:!0,attributeOldValue:!0},X=B||function(){Q=!1,V.removeEventListener(w,X)},Y=!1,Q=!0;M||I?(b=function(e,t){P.call(t,e)||d(e,t)},k=d):(b=function(e,t){e[y]||(e[y]=r(!0),d(e,t))},k=b),B||(V.addEventListener(w,X),V.setAttribute(y,1),V.removeAttribute(y),Q&&(m=function(e){var t,r,n,o=this;if(o===e.target){t=o[y],o[y]=r=h(o);for(n in r){if(!(n in t))return g(0,o,n,t[n],r[n],"ADDITION");if(r[n]!==t[n])return g(1,o,n,t[n],r[n],"MODIFICATION")}for(n in t)if(!(n in r))return g(2,o,n,t[n],r[n],"REMOVAL")}},g=function(e,t,r,n,o,a){var i={attrChange:e,currentTarget:t,attrName:r,prevValue:n,newValue:o};i[a]=e,l(i)},h=function(e){for(var t,r,n={},o=e.attributes,a=0,i=o.length;i>a;a++)t=o[a],r=t.name,"setAttribute"!==r&&(n[r]=t.value);return n})),t[n]=function(e,r){if(n=e.toUpperCase(),Y||(Y=!0,B?(v=function(e,t){function r(e,t){for(var r=0,n=e.length;n>r;t(e[r++]));}return new B(function(n){for(var o,a,i=0,s=n.length;s>i;i++)o=n[i],"childList"===o.type?(r(o.addedNodes,e),r(o.removedNodes,t)):(a=o.target,a.attributeChangedCallback&&"style"!==o.attributeName&&a.attributeChangedCallback(o.attributeName,o.oldValue,a.getAttribute(o.attributeName)))})}(i("attached"),i("detached")),v.observe(t,{childList:!0,subtree:!0})):(t.addEventListener("DOMNodeInserted",c("attached")),t.addEventListener("DOMNodeRemoved",c("detached"))),t.addEventListener("readystatechange",function(){o(t.querySelectorAll(S),"attached")}),t.createElement=function(e,r){var n=G.apply(t,arguments),o=T.call(A,(r?O:L)+(r||e).toUpperCase()),a=o>-1;return r&&(n.setAttribute("is",r=r.toLowerCase()),a&&(a=u(e.toUpperCase(),r))),a&&k(n,C[o]),n},U.cloneNode=function(e){var t=W.call(this,!!e),r=s(t);return r>-1&&k(t,C[r]),e&&a(t.querySelectorAll(S)),t}),-2<T.call(A,O+n)+T.call(A,L+n))throw new Error("A "+e+" type is already registered");if(!F.test(n)||-1<T.call(E,n))throw new Error("The type "+e+" is invalid");var n,l=function(){return t.createElement(f,d&&n)},p=r||j,d=N.call(p,_),f=d?r[_].toUpperCase():n,m=A.push((d?O:L)+n)-1;return S=S.concat(S.length?",":"",d?f+'[is="'+e.toLowerCase()+'"]':f),l.prototype=C[m]=N.call(p,"prototype")?p.prototype:H(U),o(t.querySelectorAll(S),"attached"),l}}}(window,document,Object,"registerElement"),window.document.registerElement}.apply(e,arguments)})}(this),define("format",[],function(){function e(e,t){if(!e)throw"Format string is empty!";if(t)return t instanceof Array||t instanceof Object||(t=Array.prototype.slice.call(arguments,1)),e.replace(r,function(e,r){return t[r]})}function t(t){if(!t)throw"Template string is empty!";return function(r){return e(t,r)}}var r=/\{([^}]+)\}/g;return{format:e,template:t}}),function(){function e(e){return-1!==r.indexOf(e)?e:(e=e.split("-")[0],-1!==r.indexOf(e)?e:e in o&&(e=o[e],-1!==r.indexOf(e))?e:"en-US")}function t(e,t){t||(t=window.document);var r=t.body.getAttribute("data-media"),n=t.body.getAttribute("data-build-id-js"),o=t.body.getAttribute("data-repo");return[r?r:"/media/",o?o+"/":"","locales/"+e+".js",n?"?b="+n:""].join("")}var r=["bg","bn-BD","ca","cs","da","de","el","en-US","es","eu","fr","ga-IE","hr","hu","it","ja","ko","mk","nb-NO","nl","pa","pl","pt-BR","ro","ru","sk","sq","sr","sr-Latn","ta","tr","xh","zh-CN","zh-TW","zu","dbg"],n=document.body.getAttribute("data-languages");n&&(r=JSON.parse(n));var o={en:"en-US",ga:"ga-IE",pt:"pt-BR",sv:"sv-SE",zh:"zh-CN",sr:"sr-Latn"};if(window.define)define("l10n",["format"],function(n){function o(e,t,r){r=r||navigator;var o;return o=r.l10n&&r.l10n.strings&&e in r.l10n.strings?r.l10n.strings[e].body||e:e,t&&(o=n.format(o,t)),o}function a(e,t,r,o){if(o=o||navigator,!(r&&"n"in r))throw new Error("`n` not passed to ngettext");var a,i,s=r.n,u=1===s?e:t;if(o.l10n&&o.l10n.strings&&e in(i=o.l10n.strings))if(i[e].plurals){var l=+o.l10n.pluralize(s);a=i[e].plurals[l]||u}else a=i[e].body||u;else a=u;return n.format(a,r)}var i=["ar","he","fa","ps","ur"];return window.gettext=o,window.ngettext=a,{gettext:o,ngettext:a,getDirection:function(e){var t=e?e.language:window.navigator.l10n.language;return t.indexOf("-")>-1&&(t=t.split("-")[0]),i.indexOf(t)>=0?"rtl":"ltr"},getLocaleSrc:t,getLocale:e,languages:r}});else{var a=/[\?&]lang=([\w\-]+)/i.exec(window.location.search),i=e(a&&a[1]||navigator.language||navigator.userLanguage);"en-US"===i&&(window.navigator.l10n={language:"en-US"}),document.write('<script src="'+t(i)+'"></script>')}}(),function(){var e={};!function(){function t(e,r,n){var o=function(){};o.prototype=e.prototype;var a=new o,i=/xyz/.test(function(){})?/\bparent\b/:/.*/;n=n||{};for(var s in n){var u=n[s],l=a[s];a[s]="function"==typeof l&&"function"==typeof u&&i.test(u)?function(e,t){return function(){var r=this.parent;this.parent=t;var n=e.apply(this,arguments);return this.parent=r,n}}(u,l):u}a.typename=r;var c=function(){a.init&&a.init.apply(this,arguments)};return c.prototype=a,c.prototype.constructor=c,c.extend=function(e,r){return"object"==typeof e&&(r=e,e="anonymous"),t(c,e,r)},c}e.object=t(Object,"Object",{})}(),function(){var t=Array.prototype,r=Object.prototype,n={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},o=function(e){return n[e]},a=e.lib={};a.withPrettyErrors=function(e,t,r){return r()},a.TemplateError=function(e,t,r){var n=this;return e instanceof Error?(n=e,e=e.name+": "+e.message):Error.captureStackTrace&&Error.captureStackTrace(n),n.name="Template render error",n.message=e,n.lineno=t,n.colno=r,n.firstUpdate=!0,n.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},n},a.TemplateError.prototype=Error.prototype,a.escape=function(e){return e.replace(/[&"'<>]/g,o)},a.isFunction=function(e){return"[object Function]"==r.toString.call(e)},a.isArray=Array.isArray||function(e){return"[object Array]"==r.toString.call(e)},a.isString=function(e){return"[object String]"==r.toString.call(e)},a.isObject=function(e){return e===Object(e)},a.groupBy=function(e,t){for(var r={},n=a.isFunction(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],s=n(i,o);(r[s]||(r[s]=[])).push(i)}return r},a.toArray=function(e){return Array.prototype.slice.call(e)},a.without=function(e){var t=[];if(!e)return t;for(var r=-1,n=e.length,o=a.toArray(arguments).slice(1);++r<n;)-1===o.indexOf(e[r])&&t.push(e[r]);return t},a.extend=function(e,t){for(var r in t)e[r]=t[r];return e},a.repeat=function(e,t){for(var r="",n=0;t>n;n++)r+=e;return r},a.each=function(e,r,n){if(null!==e)if(t.each&&e.each==t.each)e.forEach(r,n);else if(e.length===+e.length)for(var o=0,a=e.length;a>o;o++)r.call(n,e[o],o,e)},a.map=function(e,r){var n=[];if(null===e)return n;if(t.map&&e.map===t.map)return e.map(r);for(var o=0;o<e.length;o++)n[n.length]=r(e[o],o);return e.length===+e.length&&(n.length=e.length),n},a.asyncParallel=function(e,t){for(var r=e.length,n=new Array(r),o=0,a=function(e){return function(a){n[e]=a,o+=1,o===r&&t(n)}},i=0;r>i;i++)e[i](a(i))},a.asyncIter=function(e,t,r){function n(){o++,o<e.length?t(e[o],o,n,r):r()}var o=-1;n()},a.asyncFor=function(e,t,r){function n(){s++;var a=o[s];i>s?t(a,e[a],s,i,n):r()}var o=a.keys(e),i=o.length,s=-1;n()},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null===e)throw new TypeError;var r=Object(e),n=r.length>>>0;if(0===n)return-1;var o=0;if(arguments.length>2&&(o=Number(arguments[2]),o!=o?o=0:0!==o&&1/0!==o&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=n)return-1;for(var a=o>=0?o:Math.max(n-Math.abs(o),0);n>a;a++)if(a in r&&r[a]===t)return a;return-1}),Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),a.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}}(),function(){function t(e,t,r){return function(){var a,i,s=o(arguments),u=n(arguments);if(s>e.length){a=Array.prototype.slice.call(arguments,0,e.length);var l=Array.prototype.slice.call(arguments,a.length,s);for(i=0;i<l.length;i++)i<t.length&&(u[t[i]]=l[i]);a.push(u)}else if(s<e.length){for(a=Array.prototype.slice.call(arguments,0,s),i=s;i<e.length;i++){var c=e[i];a.push(u[c]),delete u[c]}a.push(u)}else a=arguments;return r.apply(this,a)}}function r(e){return e.__keywords=!0,e}function n(e){var t=e.length;if(t){var r=e[t-1];if(r&&r.hasOwnProperty("__keywords"))return r}return{}}function o(e){var t=e.length;if(0===t)return 0;var r=e[t-1];return r&&r.hasOwnProperty("__keywords")?t-1:t}function a(e){if("string"!=typeof e)return e;this.toString=function(){return e},this.length=e.length;for(var t=["charAt","charCodeAt","concat","contains","endsWith","fromCharCode","indexOf","lastIndexOf","length","localeCompare","match","quote","replace","search","slice","split","startsWith","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"],r=0;r<t.length;r++)this[t[r]]=s(e[t[r]])}function i(e,t){return e instanceof a?new a(t):t.toString()}function s(e){var t=typeof e;return"string"===t?new a(e):"function"!==t?e:function(){var t=e.apply(this,arguments);return"string"==typeof t?new a(t):t}}function u(e,t){return e=void 0!==e&&null!==e?e:"",t&&"string"==typeof e&&(e=g.escape(e)),e}function l(e,t){return e=e||{},"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function c(e,t,r){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(this,r)}function p(e,t,r){var n=t.lookup(r);return void 0!==n&&null!==n?n:e.lookup(r)}function d(e,t,r){return e.lineno?e:new g.TemplateError(e,t,r)}function f(e,t,r,n){if(g.isArray(e)){var o=e.length;g.asyncIter(e,function(e,n,a){switch(t){case 1:r(e,n,o,a);break;case 2:r(e[0],e[1],n,o,a);break;case 3:r(e[0],e[1],e[2],n,o,a);break;default:e.push(n,a),r.apply(this,e)}},n)}else g.asyncFor(e,function(e,t,n,o,a){r(e,t,n,o,a)},n)}function m(e,t,r,n){function o(e,t){s++,i[e]=t,s==a&&n(null,i.join(""))}var a,i,s=0;if(g.isArray(e))if(a=e.length,i=new Array(a),0===a)n(null,"");else for(var u=0;u<e.length;u++){var l=e[u];switch(t){case 1:r(l,u,a,o);break;case 2:r(l[0],l[1],u,a,o);break;case 3:r(l[0],l[1],l[2],u,a,o);break;default:l.push(u,o),r.apply(this,l)}}else{var c=g.keys(e);if(a=c.length,i=new Array(a),0===a)n(null,"");else for(var u=0;u<c.length;u++){var p=c[u];r(p,e[p],u,a,o)}}}var g=e.lib,h=e.object,v=h.extend({init:function(e){this.variables={},this.parent=e},set:function(e,t){for(var r=e.split("."),n=this.variables,o=0;o<r.length-1;o++){var a=r[o];n[a]||(n[a]={}),n=n[a]}n[r[r.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t&&null!==t?t:null},lookup:function(e){var t=this.parent,r=this.variables[e];return void 0!==r&&null!==r?r:t&&t.lookup(e)},push:function(){return new v(this)},pop:function(){return this.parent}});e.runtime={Frame:v,makeMacro:t,makeKeywordArgs:r,numArgs:o,suppressValue:u,memberLookup:l,contextOrFrameLookup:p,callWrap:c,handleError:d,isArray:g.isArray,keys:g.keys,SafeString:a,copySafeness:i,markSafe:s,asyncEach:f,asyncAll:m}}(),function(){var t=e.lib,r=e.runtime,n={abs:function(e){return Math.abs(e)},batch:function(e,t,r){for(var n=[],o=[],a=0;a<e.length;a++)a%t===0&&o.length&&(n.push(o),o=[]),o.push(e[a]);if(o.length){if(r)for(a=o.length;t>a;a++)o.push(r);n.push(o)}return n},capitalize:function(e){var t=e.toLowerCase();return r.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,n){if(n=n||80,e.length>=n)return e;var o=n-e.length,a=t.repeat(" ",o/2-o%2),i=t.repeat(" ",o/2);return r.copySafeness(e,a+e+i)},"default":function(e,t){return e?e:t},dictsort:function(e,r,n){if(!t.isObject(e))throw new t.TemplateError("dictsort filter: val must be an object");var o=[];for(var a in e)o.push([a,e[a]]);var i;if(void 0===n||"key"===n)i=0;else{if("value"!==n)throw new t.TemplateError("dictsort filter: You can only sort by either key or value");i=1}return o.sort(function(e,n){var o=e[i],a=n[i];return r||(t.isString(o)&&(o=o.toUpperCase()),t.isString(a)&&(a=a.toUpperCase())),o>a?1:o==a?0:-1}),o},escape:function(e){return"string"==typeof e||e instanceof r.SafeString?t.escape(e):e},safe:r.markSafe,first:function(e){return e[0]},groupby:function(e,r){return t.groupBy(e,r)},indent:function(e,n,o){n=n||4;for(var a="",i=e.split("\n"),s=t.repeat(" ",n),u=0;u<i.length;u++)a+=0!==u||o?s+i[u]+"\n":i[u]+"\n";return r.copySafeness(e,a)},join:function(e,r,n){return r=r||"",n&&(e=t.map(e,function(e){return e[n]})),e.join(r)},last:function(e){return e[e.length-1]},length:function(e){return e.length},list:function(e){if(t.isString(e))return e.split("");if(t.isObject(e)){var r=[];if(Object.keys)r=Object.keys(e);else for(var n in e)r.push(n);return t.map(r,function(t){return{key:t,value:e[t]}})}throw new t.TemplateError("list filter: type not iterable")},lower:function(e){return e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},replace:function(e,t,n,o){var a=e,i=a,s=1;for(a=a.replace(t,n);i!=a&&!(s>=o);)i=a,a=a.replace(t,n),s++;return r.copySafeness(e,a)},reverse:function(e){var o;return o=t.isString(e)?n.list(e):t.map(e,function(e){return e}),o.reverse(),t.isString(e)?r.copySafeness(e,o.join("")):o},round:function(e,t,r){t=t||0;var n,o=Math.pow(10,t);return n="ceil"==r?Math.ceil:"floor"==r?Math.floor:Math.round,n(e*o)/o},slice:function(e,t,r){for(var n=Math.floor(e.length/t),o=e.length%t,a=0,i=[],s=0;t>s;s++){var u=a+s*n;o>s&&a++;var l=a+(s+1)*n,c=e.slice(u,l);r&&s>=o&&c.push(r),i.push(c)}return i},sort:function(e,r,n,o){return e=t.map(e,function(e){return e}),e.sort(function(e,a){var i,s;return o?(i=e[o],s=a[o]):(i=e,s=a),!n&&t.isString(i)&&t.isString(s)&&(i=i.toLowerCase(),s=s.toLowerCase()),s>i?r?1:-1:i>s?r?-1:1:0}),e},string:function(e){return r.copySafeness(e,e)},title:function(e){for(var t=e.split(" "),o=0;o<t.length;o++)t[o]=n.capitalize(t[o]);return r.copySafeness(e,t.join(" "))},trim:function(e){return r.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,n,o){var a=e;if(t=t||255,e.length<=t)return e;if(n)e=e.substring(0,t);else{var i=e.lastIndexOf(" ",t);-1===i&&(i=t),e=e.substring(0,i)}return e+=void 0!==o&&null!==o?o:"...",r.copySafeness(a,e)},upper:function(e){return e.toUpperCase()},urlize:function(e,t,r){isNaN(t)&&(t=1/0);var n=r===!0?' rel="nofollow"':"",o=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,a=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,i=/^https?:\/\/.*$/,s=/^www\./,u=/\.(?:org|net|com)(?:\:|\/|$)/,l=e.split(/\s+/).filter(function(e){return e&&e.length}).map(function(e){var r=e.match(o),l=r&&r[1]||e;return i.test(l)?'<a href="'+l+'"'+n+">"+l.substr(0,t)+"</a>":s.test(l)?'<a href="http://'+l+'"'+n+">"+l.substr(0,t)+"</a>":a.test(l)?'<a href="mailto:'+l+'">'+l+"</a>":u.test(l)?'<a href="http://'+l+'"'+n+">"+l.substr(0,t)+"</a>":l});return l.join(" ")},wordcount:function(e){return e.match(/\w+/g).length},"float":function(e,t){var r=parseFloat(e);return isNaN(r)?t:r},"int":function(e,t){var r=parseInt(e,10);return isNaN(r)?t:r}};n.d=n["default"],n.e=n.escape,e.filters=n}(),function(){function t(e){var t=-1,r=null;return{reset:function(){t=-1,r=null},next:function(){return t++,t>=e.length&&(t=0),r=e[t]}}}function r(e){e=e||",";var t=!0;return function(){var r=t?"":e;return t=!1,r}}var n={range:function(e,t,r){t?r||(r=1):(t=e,e=0,r=1);for(var n=[],o=e;t>o;o+=r)n.push(o);return n},cycler:function(){return t(Array.prototype.slice.call(arguments))},joiner:function(e){return r(e)}};e.globals=n}(),function(){var t=e.lib,r=e.object,n=e.filters,o=e.runtime,a=e.globals,i=o.Frame,s=r.extend({init:function(e,t){t=t||{},this.dev=!!t.dev,this.autoesc=!!t.autoescape,this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var r in n)this.addFilter(r,n[r])},addExtension:function(e,t){t._name=e,this.extensions[e]=t,this.extensionsList.push(t)},getExtension:function(e){return this.extensions[e]},addFilter:function(e,t,r){var n=t;r&&this.asyncFilters.push(e),this.filters[e]=n},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},getTemplate:function(e,t){if(e&&e.raw&&(e=e.raw),"string"!=typeof e)throw new Error("template names must be a string: "+e);var r=this.cache[e],n=this;if(r.render=function(e,t,r){return this.root(n,new u(e),t,o,r)},r.getExported=function(e){var t=new u({});this.root(n,t,new i,o,function(){e(null,t.getExported())})},!r)throw new Error('Template not available: "'+e+'"');return t?void t.call(this,null,r):r},render:function(e,r,n){t.isFunction(r)&&(n=r,r=null);var a=null;return this.getTemplate(e,function(e,t){if(e&&n)n(e);else{if(e)throw e;t.root(this,new u(r||{}),new i,o,n||function(e,t){if(e)throw e;a=t})}}),a}}),u=r.extend({init:function(e,t){this.ctx=e,this.blocks={},this.exported=[];for(var r in t)this.addBlock(r,t[r])},lookup:function(e){return e in a&&!(e in this.ctx)?a[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,r,n,o,a){var i=(this.blocks[t]||[]).indexOf(r),s=this.blocks[t][i+1],u=this;if(-1==i||!s)throw new Error('no super block available for "'+t+'"');s(e,u,n,o,a)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var r=this.exported[t];e[r]=this.ctx[r]}return e}});e.environment={Environment:s}}();var t,r=e.lib,n=e.environment,o=e.runtime;t={},t.Environment=n.Environment,t.runtime=o;var a;t.configure=function(e,t){t=t||{},r.isObject(e)&&(t=e,e=null);"watch"in t?!t.watch:!1;return a=new n.Environment(null,t)},t.render=function(e,r,n){return a||t.configure(),a.render(e,r,n)},t.require=function(t){return e[t]},define("nunjucks",[],function(){return t})}(),define("utils",["jquery","l10n","underscore"],function(e,t,r){function n(e){return function(t){t.preventDefault(),e&&e.apply(this,arguments)}}function o(){var t=function(t,r){var n=e(t),o=parseInt(n.attr("maxlength"),10),a=o-n.val().length;r.html(k("<b>{n}</b> character left.","<b>{n}</b> characters left.",{n:a})).toggleClass("error",0>a)};e(".char-count").each(function(){var n=e(this);n.closest("form").find("#"+n.data("for")).on("input blur",r.throttle(function(){t(this,n)},250)).trigger("blur")})}function a(e,t){if("string"!=typeof e)return e;var r=e.toLowerCase().trim().replace(/[ _]/g,"-").replace(/[^-\w]/g,"").replace(/-+/g,"-");return t&&(r=r.substr(0,t)),r}function i(e){return y.test(e.target.nodeName)}function s(e){var t=e.indexOf("?");return-1===t?{}:g(e.substr(t+1))}function u(e){return e.split("?")[0]}function l(e){return"url("+JSON.stringify(e)+")"}function c(e){return window.encodeURIComponent(e).replace(/%20/g,"+")}function p(e){return window.decodeURIComponent(e.replace(/\+/g," "))}function d(e){if("string"==typeof e)return c(e);var t=[];"__keywords"in e&&delete e.__keywords;for(var n=r.keys(e).sort(),o=0;o<n.length;o++){var a=n[o],i=e[a];t.push(void 0===i?c(a):c(a)+"="+c(i))}return t.join("&")}function f(e,t){return u(e)+"?"+d(r.defaults(t,s(e)))}function m(e,t){for(var n,o=s(e),a=0;n=t[a++];)n in o&&delete o[n];var i=u(e);return r.isEmpty(o)?i:i+"?"+d(o)}function g(e,t){return e||(e=location.search),e&&"?"!==e?(e&&"?"==e[0]&&(e=e.substr(1)),r.chain(e.split("&")).map(function(e){return e.split("=").map(p)}).filter(function(e){return!(!e[0]||t&&r.isUndefined(e[1]))}).object().value()):{}}function h(e,t,r){if(!e)return"";if("string"==typeof e)return e;if(t=t||"en-US",r=r||(window.navigator.l10n?window.navigator.l10n.language:"en-US"),r in e)return e[r];var n=r.split("-")[0];if(n in e)return e[n];if("string"==typeof t)return e[t];if("object"==typeof t&&"default_language"in t&&t.default_language in e)return e[t.default_language];for(var o in e)return e[o];return""}function v(){for(var e in _)if(-1!==navigator.userAgent.indexOf(_[e]))return e;return"other"}function b(e){return w.href=e,w}var k=t.ngettext;r.extend(String.prototype,{strip:function(){return this.replace(/\s/g,"")}});var y=/input|keygen|meter|option|output|progress|select|textarea/i,_={windows:"Windows",mac:"Mac",linux:"Linux",android:"Android"},w=document.createElement("a");return{_pd:n,baseurl:u,bgurl:l,browser:v,encodeURIComponent:c,decodeURIComponent:p,escape_:r.escape,fieldFocused:i,getVars:g,initCharCount:o,querystring:s,slugify:a,urlencode:d,urlparams:f,urlparse:b,urlunparam:m,translate:h}}),define("settings_local",[],function(){return{api_url:"https://marketplace-dev.allizom.org",body_classes:"package",iframe_installer_src:"https://marketplace-dev.allizom.org/iframe-install.html",iframe_potatolytics_src:"https://marketplace-dev.allizom.org/potatolytics.html",media_url:"https://marketplace-dev.mozflare.net/media/",tracking_enabled:!0,potatolytics_enabled:!0,package_version:"20141222.163010"}}),define("settings",["l10n","settings_local","underscore"],function(e,t,r){function n(){var e=require("storage");return e.getItem("offline_cache_disabled")||require("capabilities").phantom?!1:-1===window.location.search.indexOf("cache=false")}var o=e.gettext,a=JSON.parse(document.body.getAttribute("data-settings")||"{}");a=r.defaults(a,t);var i=(window.location.search||"").indexOf("preview=true")>0?["pro"]:null;return r.defaults(a,{app_name:"fireplace",init_module:"main",default_locale:"en-US",api_url:"http://"+window.location.hostname,local_html:document.body.hasAttribute("data-local-html"),fxa_css_path:"/media/css/fxa.css",package_version:null,storage_version:"0",simulate_nav_pay:!1,param_whitelist:["q","sort","cat"],api_param_blacklist:i,api_cdn_whitelist:{"/api/v2/fireplace/search/":180,"/api/v2/feed/get/":21600,"/api/v2/services/config/site/":180},model_prototypes:{app:"slug",collection:"slug","feed-app":"slug","feed-brand":"slug","feed-collection":"slug","feed-shelf":"slug",dummy:"id",dummy2:"id"},offline_cache_whitelist:{"/api/v2/feed/get/":604800,"/api/v2/fireplace/consumer-info/":604800,"/api/v2/services/config/site/":604800},offline_cache_enabled:n,offline_cache_limit:4194304,fragment_error_template:"errors/fragment.html",pagination_error_template:"errors/pagination.html",payments_enabled:!0,tracking_enabled:!1,action_tracking_enabled:!0,upsell_enabled:!0,cache_rewriting_enabled:!0,potatolytics_enabled:!1,switches:[],never_incompat:!1,ua_tracking_id:"UA-36116321-6",tracking_section:"Consumer",tracking_section_index:3,NEWSLETTER_LANGUAGES:{en:o("English"),fr:o("French"),de:o("German"),hu:o("Hungarian"),id:o("Indonesian"),pl:o("Polish"),"pt-BR":o("Portuguese"),ru:o("Russian"),es:o("Spanish")},persona_site_logo:a.media_url+"/fireplace/img/logos/128.png",persona_tos:null,persona_privacy:null,persona_unverified_issuer:"login.persona.org",persona_timeout:3e4,persona_shim_url:"https://login.persona.org/include.js",title_suffix:"Firefox Marketplace",carrier:null,iframe_installer_src:"https://marketplace.firefox.com/iframe-install.html",iframe_potatolytics_src:"https://marketplace.firefox.com/potatolytics.html",offline_msg:o("Sorry, you are currently offline. Please try again later.")})}),define("storage",["settings"],function(e){function t(){this.store={}}function r(t){return e.storage_version+"::"+t}t.prototype.getItem=function(e){return this.store[e]},t.prototype.setItem=function(e,t){this.store[e]=t},t.prototype.removeItem=function(e){delete this.store[e]},t.prototype.clear=function(){this.store={}};var n;try{n=localStorage}catch(o){n=new t}return n.setItem("latestStorageVersion",e.storage_version),{clear:function(){n.clear()},getItem:function(e){var t=n.getItem(r(e));try{return JSON.parse(t)}catch(o){return t}},removeItem:function(e){n.removeItem(r(e))},setItem:function(e,t){n.setItem(r(e),JSON.stringify(t))}}}),define("log",["storage","utils"],function(e,t){"groupCollapsed"in window.console||(window.console.groupCollapsed=window.console.group=window.console.log,window.console.groupEnd=function(){});var r,n,o=Array.prototype.slice,a=[],i=e.getItem("persistent_logs")||{},s=function(e,t,i){function u(e){return function(){var t=o.call(arguments,0);t.length&&(t[0]=l+t[0],t=t.map(r),c.push(t),a.push(t),i&&i(t)),console[e].apply(console,t)}}var l="["+e+"]";t&&(l+="["+t+"]"),l+=" ",e in n||(n[e]=[]);var c=n[e];return{log:u("log"),warn:u("warn"),error:u("error"),group:u("group"),groupCollapsed:u("groupCollapsed"),groupEnd:u("groupEnd"),tagged:function(r){return s(e,t+"]["+r,i)}}};return s.unmentionables=[],s.unmention=function(e){s.unmentionables.push(e),s.unmentionables.push(t.encodeURIComponent(e))},n=s.logs={},s.all=a,s.get_recent=function(e,t){var r=t?n[t]:a,o=r.length;return r.slice(Math.max(o-e,0),o)},r=s.filter=function(e){if("string"!=typeof e)return e;for(var t,r=0;t=s.unmentionables[r++];)e=e.replace(t,"---");return e},s.persistent=function(t){var r=o.call(arguments);return r[2]=function(r){t in i||(i[t]=[]),i[t].push(r),e.setItem("persistent_logs",i)},s.apply(this,r)},s.persistent.all=i,s}),define("routes_api",[],function(){return{account_info:"/api/v2/account/info/{0}",app:"/api/v2/fireplace/app/{0}/?cache=1&vary=0","app/privacy":"/api/v2/apps/app/{0}/privacy/?cache=1&vary=0",app_abuse:"/api/v2/abuse/app/",category_landing:"/api/v2/fireplace/search/?cat={0}&cache=1&vary=0",consumer_info:"/api/v2/fireplace/consumer-info/?cache=1",features:"/api/v2/apps/features/",feed:"/api/v2/feed/get/?cache=21600&vary=0","feed-app":"/api/v2/fireplace/feed/apps/{0}/","feed-brand":"/api/v2/fireplace/feed/brands/{0}/","feed-collection":"/api/v2/fireplace/feed/collections/{0}/","feed-items":"/api/v2/feed/items/","feed-shelf":"/api/v2/fireplace/feed/shelves/{0}/",feedback:"/api/v2/account/feedback/","fxa-login":"/api/v2/account/fxa-login/",installed:"/api/v2/account/installed/mine/",login:"/api/v2/account/login/",logout:"/api/v2/account/logout/",new_popular_search:"/api/v2/fireplace/search/?cache=1&vary=0",newsletter:"/api/v2/account/newsletter/",payments_status:"/api/v2/webpay/status/{0}/",prepare_nav_pay:"/api/v2/webpay/prepare/",preverify_token:"/api/v2/account/fxa-preverify/",preverify_confirmation:"/api/v2/account/fxa-preverify/confirm/{0}/",recommended:"/api/v2/apps/recommend/",record_free:"/api/v2/installs/record/",record_paid:"/api/v2/receipts/install/",review:"/api/v2/apps/rating/{0}/",reviews:"/api/v2/apps/rating/",search:"/api/v2/fireplace/search/?cache=1&vary=0",settings:"/api/v2/account/settings/mine/","site-config":"/api/v2/services/config/site/?cache=1&serializer=commonplace&vary=0"}
}),define("capabilities",["settings"],function(e){function t(e){var t=window.matchMedia(e);return!!t&&t.matches}var r={JSON:window.JSON&&"function"==typeof JSON.parse,debug:document.location.href.indexOf("dbg")>=0,debug_in_page:document.location.href.indexOf("dbginpage")>=0,console:window.console&&"function"==typeof window.console.log,replaceState:"function"==typeof history.replaceState,chromeless:!(!window.locationbar||window.locationbar.visible),webApps:!(!navigator.mozApps||!navigator.mozApps.install),packagedWebApps:!(!navigator.mozApps||!navigator.mozApps.installPackage),userAgent:navigator.userAgent,widescreen:function(){return t("(min-width: 710px)")},firefoxAndroid:-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android"),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),performance:!!(window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance),navPay:!!navigator.mozPay,webactivities:!(!navigator.setMessageHandler&&!navigator.mozSetMessageHandler),firefoxOS:navigator.mozApps&&navigator.mozApps.installPackage&&-1===navigator.userAgent.indexOf("Android")&&(-1!==navigator.userAgent.indexOf("Mobile")||-1!==navigator.userAgent.indexOf("Tablet")),phantom:navigator.userAgent.match(/Phantom/)};return r.nativeFxA=function(){return r.firefoxOS&&"app:"===window.location.protocol&&navigator.userAgent.match(/rv:(\d{2})/)[1]>=34},r.yulelogFxA=function(){return r.firefoxOS&&window.top!==window.self&&-1!==e.switches.indexOf("native-firefox-accounts")&&navigator.userAgent.match(/rv:(\d{2})/)[1]>=34},r.fallbackFxA=function(){return!(r.nativeFxA()||r.yulelogFxA())},r.device_type=function(){return r.firefoxOS?"firefoxos":r.firefoxAndroid?r.widescreen()?"android-tablet":"android-mobile":"desktop"},r.device_platform=function(){return r.device_type().split("-")[0]},r}),define("z",["jquery"],function(e){return{win:e(window),doc:e(document),body:e(document.body),container:e("main"),page:e("#page"),apps:[],context:{},spaceheater:!!document.body.getAttribute("data-spaceheater")}}),define("compatibility_filtering",["capabilities","log","storage","underscore","utils","z"],function(e,t,r,n,o,a){function i(){p=o.getVars().device_override}function s(e,t){return"all"!=t||c||(t=""),p?p==t:d[e]==t}function u(e,t){b.log("Filtering for "+e+" changed to "+t),d[e]=t,r.setItem(v,d)}function l(e){var t,r={};return t=p||d[e],t?(t=t.split("-"),t.length>1?(r.dev=t[0],r.device=t[1]):"all"!=t[0]?(r.dev=t[0],r.device=""):(r.dev="",r.device="")):(r.dev=m,r.device=g),r.limit=h,"firefoxos"===m&&m===r.dev&&g===r.device&&n.indexOf(f,e)>=0&&(r.pro=y),r}var c,p,d,f=["category_landing","feed","feed-app","feed-brand","feed-collection","feed-items","feed-shelf","new_popular_search","search"],m="",g="",h=25,v="device_filtering_preferences",b=t("compatibility_filtering"),k="7fffffffffff0.51.6",y=o.getVars().pro||k;return i(),a.win.on("navigating",i),e.firefoxOS?m="firefoxos":e.firefoxAndroid&&(m="android",g=e.widescreen()?"tablet":"mobile"),("mobile"==g||"firefoxos"==m)&&(h=10),c=m&&g?m+"-"+g:m,d={category_landing:c,new_popular_search:c,recommended:c,search:c},d=n.extend(d,r.getItem(v)||{}),{api_args:l,default_feature_profile:k,device_filter_name:c,feature_profile:y,is_preference_selected:s,set_preference:u}}),function(e,t){"function"==typeof define&&define.amd?define("regions",["l10n"],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(e){var t=function(e){return e};if(e)var t=e.gettext;return{MOBILE_CODES:{216:"hu",740:"ec",214:"es",704:"gt",334:"mx",311:"us",310:"us",316:"us",404:"in",440:"jp",748:"uy",234:"uk",235:"uk",250:"ru",230:"cz",730:"cl",724:"br",313:"us",405:"in",732:"co",734:"ve",716:"pe",706:"sv",202:"gr",208:"fr",441:"jp",714:"pa",712:"cr",460:"cn",262:"de",260:"pl",655:"za",710:"ni",222:"it",220:"rs",470:"bd",722:"ar",297:"me",515:"ph"},REGION_CHOICES_SLUG:{gt:t("Guatemala"),co:t("Colombia"),cn:t("China"),cl:t("Chile"),za:t("South Africa"),ec:t("Ecuador"),cz:t("Czech Republic"),ar:t("Argentina"),"in":t("Indonesia"),cr:t("Costa Rica"),es:t("Spain"),ve:t("Venezuela"),ni:t("Nicaragua"),rs:t("Serbia"),pa:t("Panama"),restofworld:t("Rest of World"),pe:t("Peru"),it:t("Italy"),ph:t("Philippines"),pl:t("Poland"),bd:t("Bangladesh"),fr:t("France"),ru:t("Russia"),de:t("Germany"),jp:t("Japan"),hu:t("Hungary"),br:t("Brazil"),gr:t("Greece"),me:t("Montenegro"),uy:t("Uruguay"),sv:t("El Salvador"),us:t("United States"),uk:t("United Kingdom"),mx:t("Mexico")}}}),define("user",["capabilities","log","settings","storage","utils"],function(e,t,r,n){function o(){C={}}function a(){A.log("Clearing user token"),n.removeItem("user"),"email"in C&&(delete C.email,m(),S={},h(),V={installed:[],purchased:[],developed:[]},w()),E=null}function i(e,t){return C.hasOwnProperty(e)?C[e]:t}function s(e){return S[e]||!1}function u(){return C}function l(){return V}function c(e){return-1!==V.developed.indexOf(e)}function p(e){return-1!==V.installed.indexOf(e)}function d(e){return-1!==V.purchased.indexOf(e)}function f(e,r){A.log("Setting new user token"),e&&(E=e,t.unmention(e),T&&n.setItem("user",E),g(r))}function m(){T?(A.log("Saving user_settings to localStorage"),n.setItem("settings",C)):A.log("user_settings not saved to localStorage")}function g(e){e&&(A.log("Updating user settings",e),_.extend(C,e),m())}function h(){T?(A.log("Saving permissions to localStorage"),n.setItem("permissions",S)):A.log("Permissions not saved to localStorage")}function v(e){e&&(A.log("Updating user permissions",e),S=e,h())}function b(e){e&&(A.log("Updating user apps",e),V=e,w())}function k(e){A.log("Adding to user apps.installed",e),V.installed.push(e),w()}function y(e){A.log("Adding to user apps.purchased",e),V.purchased.push(e),w()}function w(){T?(A.log("Saving user apps to localStorage"),n.setItem("user_apps",V)):A.log("User apps not saved to localStorage")}function x(){return L()&&!F()&&O()}function L(){return-1!==r.switches.indexOf("fx-accounts-migration")}function O(){return!!n.getItem("permissions")}function F(){return e.nativeFxA()?!0:("firefox-accounts"===i("source")&&n.setItem("fxa-migrated",!0),n.getItem("fxa-migrated"))}var E,A=t("user"),C={},S={},V={installed:[],purchased:[],developed:[]},T=!e.phantom;if(T){E=n.getItem("user"),C=n.getItem("settings")||{},S=n.getItem("permissions")||{};var j=n.getItem("user_apps");j&&(V=j),t.unmention(E),m()}return{canMigrate:x,clear_settings:o,clear_token:a,get_apps:l,get_permission:s,get_setting:i,get_settings:u,get_token:function(){return E},has_developed:c,has_installed:p,has_purchased:d,logged_in:function(){return!!E},migration_enabled:L,set_token:f,update_apps:b,update_install:k,update_permissions:v,update_purchased:y,update_settings:g}}),define("user_helpers",["regions","user","utils"],function(e,t,r){function n(r,n){return"region"in i&&i.region&&e.REGION_CHOICES_SLUG[i.region]?i.region:t.get_setting("region_override")||t.get_setting("region_sim")||s||!n&&t.get_setting("region_geoip")||r||""}function o(){return"carrier"in i?i.carrier:t.get_setting("carrier_override")||t.get_setting("carrier_sim")||""}function a(){return navigator.l10n&&navigator.l10n.language||navigator.language||navigator.userLanguage}var i=r.getVars(),s=null;return{carrier:o,lang:a,region:n,set_region_geoip:function(e){s=e,t.update_settings({region_geoip:e})}}}),define("routes_api_args",["compatibility_filtering","user_helpers"],function(e,t){return function(r){var n=e.api_args(r);return n.lang=t.lang(),n.region=t.region(void 0,!0),n.carrier=t.carrier(),n}}),define("urls",["format","log","routes_api","routes_api_args","settings","user","utils"],function(e,t,r,n,o,a,i){function s(e){return function(){var t=e.apply(this,arguments),r=n(arguments[0]);return a.logged_in()&&(r._user=a.get_token()),l(r),i.urlparams(t,r)}}function u(e){return function(){var t=e.apply(this,arguments),r=n(arguments[0]);return l(r),i.urlparams(t,r)}}function l(e){var t=o.api_param_blacklist||[];for(var r in e)e[r]&&-1===t.indexOf(r)||delete e[r]}function c(t,n,o){if(!(t in r))return m.error("Invalid API endpoint: "+t),"";var a=e.format(r[t],n||[]),s=d(a)+a;return o?i.urlparams(s,o):s}function p(e,t){return c(e,[],t)}function d(e){var t=o.api_url;return o.api_cdn_whitelist&&i.baseurl(e)in o.api_cdn_whitelist&&(t=o.cdn_url),t}function f(e){var t=o.media_url;return"/"!==t.substr(-1)&&(t+="/"),"/"===e[0]&&(e=e.substr(1)),t+e}var m=t("urls");if("media_url"in o){var g=document.createElement("a");g.href=o.media_url,o.cdn_url=g.protocol+"//"+g.host,m.log("Using settings.media_url: "+o.media_url),m.log("Changed settings.cdn_url: "+o.cdn_url)}else o.cdn_url=o.api_url,m.log("Changed settings.cdn_url to settings.api_url: "+o.api_url);var h=/\([^\)]+\)/,v=/(\(.*\)|\[.*\]|.)\?/g,b=function(t,r){r=r||[];for(var n in routes){var o=routes[n];if(o.view_name==t){var a=o.pattern.substring(1,o.pattern.length-1);-1!==a.indexOf("?")&&(a=a.replace(v,""));for(var i=0;h.test(a);)a=a.replace(h,"{"+i++ +"}");if(r.length!==i)throw m.error("Expected "+i+" args, got "+r.length),new Error('Wrong number of arguments passed to reverse(). View: "'+t+'", Argument "'+r+'"');return e.format(a,r)}}m.error('Could not find the view "'+t+'".')};return{reverse:b,api:{url:s(c),host:d,params:s(p),sign:s(function(e){return e}),unsign:u(function(e){return e}),unsigned:{url:u(c),params:u(p)},base:{url:c,host:d,params:p}},media:f}}),define("helpers",["l10n","nunjucks","underscore","utils","format","settings","urls","user"],function(e,t,r,n){function o(e){return function(){return new i(e.apply(this,arguments))}}function a(e,t){s[e]=o(t)}var i=t.require("runtime").SafeString,s=t.require("filters");s.extend=function(e,t){return delete t.__keywords,r.extend(e,t)},s.bgurl=n.bgurl,s.urlparams=n.urlparams,s.urlunparam=n.urlunparam,a("nl2br",function(e){return"string"!=typeof e?e:e.replace(/\n/g,"<br>")}),a("make_data_attrs",function(e){return r.pairs(e).map(function(e){return"data-"+n.escape_(e[0])+'="'+n.escape_(e[1])+'"'}).join(" ")}),a("external_href",function(e){return'href="'+n.escape_(e)+'" target="_blank"'}),s.translate=n.translate,s.numberfmt=function(e){return"number"==typeof e&&e.toLocaleString?e.toLocaleString():e},s.datetime=function(e){if(!e)return"";var t=e;e instanceof Date||(e=new Date(e));var r=e.toLocaleString();return"Invalid Date"===r?(console.warn("Invalid date: ",t),""):r},s.filter=function(e,t){var r=[];e:for(var n=0;n<e.length;n++){var o=e[n];for(var a in t)if(t.hasOwnProperty(a)&&"__keywords"!==a){if(!(a in o))continue e;if(Array.isArray(t[a])?-1===t[a].indexOf(o[a]):o[a]!==t[a])continue e}r.push(o)}return r},s.hex2rgba=function(e,t){return e=parseInt(e.substring("#"==e[0]?1:0),16),"rgba("+(e>>16)+","+((65280&e)>>8)+","+(255&e)+","+t+")"},a("stringify",JSON.stringify),s.format=require("format").format,s.sum=function(e){return e.reduce(function(e,t){return e+t},0)};var u=require("user"),l={get_setting:u.get_setting,get_settings:function(){return r.clone(u.get_settings())},get_permission:u.get_permission,has_developed:u.has_developed,has_installed:u.has_installed,has_purchased:u.has_purchased,logged_in:u.logged_in},c={api:require("urls").api.url,apiHost:require("urls").api.host,apiParams:require("urls").api.params,anonApi:require("urls").api.unsigned.url,anonApiParams:require("urls").api.unsigned.params,url:require("urls").reverse,media:require("urls").media,_:o(e.gettext),_plural:o(e.ngettext),format:require("format").format,settings:require("settings"),capabilities:require("capabilities"),user:l,escape:n.escape_,len:function(e){return e.length},max:Math.max,min:Math.min,range:r.range,identity:function(e){return"__keywords"in e&&delete e.__keywords,e},navigator:window.navigator,screen:window.screen,language:window.navigator.l10n?window.navigator.l10n.language:"en-US"},p=t.require("globals");for(var d in c)c.hasOwnProperty(d)&&(p[d]=c[d]);return c}),define("edbrands",["l10n"],function(e){function t(e,t){arguments.length||(e=null,t=1);var n={"apps-for-albania":r("App for Albania","Apps for Albania",{n:t}),"apps-for-argentina":r("App for Argentina","Apps for Argentina",{n:t}),"apps-for-bangladesh":r("App for Bangladesh","Apps for Bangladesh",{n:t}),"apps-for-brazil":r("App for Brazil","Apps for Brazil",{n:t}),"apps-for-bulgaria":r("App for Bulgaria","Apps for Bulgaria",{n:t}),"apps-for-chile":r("App for Chile","Apps for Chile",{n:t}),"apps-for-china":r("App for China","Apps for China",{n:t}),"apps-for-colombia":r("App for Colombia","Apps for Colombia",{n:t}),"apps-for-costa-rica":r("App for Costa Rica","Apps for Costa Rica",{n:t}),"apps-for-croatia":r("App for Croatia","Apps for Croatia",{n:t}),"apps-for-czech-republic":r("App for Czech Republic","Apps for Czech Republic",{n:t}),"apps-for-ecuador":r("App for Ecuador","Apps for Ecuador",{n:t}),"apps-for-el-salvador":r("App for El Salvador","Apps for El Salvador",{n:t}),"apps-for-france":r("App for France","Apps for France",{n:t}),"apps-for-germany":r("App for Germany","Apps for Germany",{n:t}),"apps-for-greece":r("App for Greece","Apps for Greece",{n:t}),"apps-for-hungary":r("App for Hungary","Apps for Hungary",{n:t}),"apps-for-india":r("App for India","Apps for India",{n:t}),"apps-for-italy":r("App for Italy","Apps for Italy",{n:t}),"apps-for-japan":r("App for Japan","Apps for Japan",{n:t}),"apps-for-macedonia":r("App for Macedonia","Apps for Macedonia",{n:t}),"apps-for-mexico":r("App for Mexico","Apps for Mexico",{n:t}),"apps-for-montenegro":r("App for Montenegro","Apps for Montenegro",{n:t}),"apps-for-nicaragua":r("App for Nicaragua","Apps for Nicaragua",{n:t}),"apps-for-panama":r("App for Panama","Apps for Panama",{n:t}),"apps-for-peru":r("App for Peru","Apps for Peru",{n:t}),"apps-for-poland":r("App for Poland","Apps for Poland",{n:t}),"apps-for-russia":r("App for Russia","Apps for Russia",{n:t}),"apps-for-serbia":r("App for Serbia","Apps for Serbia",{n:t}),"apps-for-south-africa":r("App for South Africa","Apps for South Africa",{n:t}),"apps-for-spain":r("App for Spain","Apps for Spain",{n:t}),"apps-for-uruguay":r("App for Uruguay","Apps for Uruguay",{n:t}),"apps-for-venezuela":r("App for Venezuela","Apps for Venezuela",{n:t}),"arts-entertainment":r("Arts & Entertainment App","Arts & Entertainment Apps",{n:t}),book:r("Featured Book App","Featured Book Apps",{n:t}),creativity:r("Featured Creativity App","Featured Creativity Apps",{n:t}),education:r("Featured Education App","Featured Education Apps",{n:t}),games:r("Featured Game","Featured Games",{n:t}),groundbreaking:r("Groundbreaking App","Groundbreaking Apps",{n:t}),"health-fitness":r("Health & Fitness App","Health & Fitness Apps",{n:t}),"hidden-gem":r("Hidden Gem","Hidden Gems",{n:t}),lifestyle:r("Featured Lifestyle App","Featured Lifestyle Apps",{n:t}),"local-favorite":r("Local Favorite App","Local Favorite Apps",{n:t}),"maps-navigation":r("Maps & Navigation App","Maps & Navigation Apps",{n:t}),music:r("Featured Music App","Featured Music Apps",{n:t}),"mystery-app":r("Mystery App!","Mystery Apps!",{n:t}),"news-weather":r("News & Weather App","News & Weather Apps",{n:t}),"photo-video":r("Photo & Video App","Photo & Video Apps",{n:t}),shopping:r("Featured Shopping App","Featured Shopping Apps",{n:t}),social:r("Featured Social App","Featured Social Apps",{n:t}),sports:r("Featured Sports App","Featured Sports Apps",{n:t}),"tools-time-savers":r("Tool & Time Saver","Tools & Time Savers",{n:t}),travel:r("Featured Travel App","Featured Travel Apps",{n:t}),"work-business":r("Work & Business App","Work & Business Apps",{n:t})};return e?n[e]:Object.keys(n)}var r=e.ngettext;return{BRAND_TYPES:t(),get_brand_type:t}}),define("rewriters",["log","settings","underscore","urls","utils"],function(e,t,r,n,o){function a(e){return function(t,r,n){var a=o.baseurl(t);if(a===o.baseurl(e)){var s=o.querystring(t);if("offset"in s){delete s.offset,delete s._bust;var u=o.urlparams(a,s);return i.log("Attempting to rewrite",u),u in n?(n[u].meta.limit+=r.meta.limit,n[u].meta.next=r.meta.next,n[u].objects=n[u].objects.concat(r.objects),null):void i.error("Could not find cache entry to rewrite")}}}}var i=e("rewriters");return t.cache_rewriting_enabled?[a(n.api.base.url("search")),a(n.api.base.url("installed"))]:[]}),define("cache",["log","rewriters","settings","storage","user","utils","underscore","z"],function(e,t,r,n,o,a,i,s){function u(e){var t=a.urlparse(e).pathname;return r.offline_cache_whitelist&&t in r.offline_cache_whitelist?1e3*r.offline_cache_whitelist[t]:null}function l(){if(!r.offline_cache_enabled||r.offline_cache_enabled()){var e={};Object.keys(y).forEach(function(t){null!==u(t)&&(e[t]=y[t])}),s.doc.trigger("save_cache",_),i.isEqual(n.getItem(_),e)||(n.setItem(_,e),k.log("Persisting request cache"))}}function c(){y={}}function p(){Object.keys(y).forEach(function(e){-1!==e.indexOf("_user="+o.get_token())&&(k.log("Removing signed URL",e),delete y[e])}),l()}function d(){var e,t=+new Date,r=null;Object.keys(y).forEach(function(n){return e=y[n].__time,r=u(n),!e||t>=e+r?(k.log("Removing expired URL",n),delete y[n]):void 0}),l()}function f(e){return e in y}function m(e){return y[e]}function g(e){for(var t in y)if(y.hasOwnProperty(t)){if(e&&!e(t))continue;delete y[t]}}function h(e,r){for(var n,o=0;n=t[o++];){var a=n(e,r,y);if(null===a)return;a&&(r=a)}y[e]=r}function v(e){k.log("Busting cache for ",e),e in y&&delete y[e]}function b(e,t,r){var n=0;k.log("Attempting cache rewrite");for(var o in y)if(e(o)){k.log("Matched cache rewrite pattern for key ",o);var a=t(y[o],o);if(y[o]=a,x.has(o)&&x.set(o,a),r&&++n>=r)return void k.log("Cache rewrite limit hit, exiting")}}var k=e("cache"),y={},_="request_cache";r.offline_cache_enabled&&r.offline_cache_enabled()&&(y=n.getItem(_)||{},d()),window.addEventListener("beforeunload",l,!1);var w="cache.persist::",x={get:function(e){if(f(e))return m(e);var t=JSON.parse(n.getItem(w+e));return h(e,t),t},set:function(e,t){n.setItem(w+e,JSON.stringify(t)),h(e,t)},bust:function(e){n.removeItem(w+e),v(e)},has:function(e){return!!n.getItem(w+e)},purge:function(){for(var e=0;e<n.length;e++){var t=n.key(e);0===t.indexOf(w)&&(n.removeItem(w+t),v(t.replace(w,"")))}}};return{attemptRewrite:b,bust:v,cache:y,flush:c,flush_expired:d,flush_signed:p,get:m,get_ttl:u,has:f,persist:x,purge:g,raw:y,set:h}}),define("defer",["jquery"],function(e){return{Deferred:e.Deferred,when:e.when}}),define("requests",["cache","defer","log","settings","utils"],function(e,t,r,n,o){function a(e,t){if(e in y)for(var r,n=0;r=y[e][n++];)r.apply(r,t)}function i(e){return e&&e.constructor===Object||Array.isArray(e)}function s(e){for(var t in e)if(e.hasOwnProperty(t)&&i(e[t]))return!0}function u(e,r,n){function u(e){var t=e.responseText;if("application/json"===(e.getResponseHeader("Content-Type")||"").split(";",1)[0])try{return JSON.parse(t)}catch(r){return{}}return t||null}function l(){p.reject(c,c.statusText,c.status,u(c))}var c=new XMLHttpRequest,p=t.Deferred();c.addEventListener("load",function(){try{"Deprecated"===c.getResponseHeader("API-Status")&&a("deprecated",[c])}catch(e){}var t=c.status/100|0;return 2>t||t>3?l():void p.resolve(u(c),c)},!1),c.addEventListener("error",l,!1),c.open(e,r,!0);var d="application/x-www-form-urlencoded";return n&&(i(n)&&!s(n)?n=o.urlencode(n):n instanceof b?(n=n.toString(),d="text/plain"):(n=JSON.stringify(n),d="application/json"),c.setRequestHeader("Content-Type",d)),c.send(n||void 0),p.promise(c)}function l(e,t,r){var n=u(e,t,r);return n.then(function(n,o){a("success",[n,o,e,t,r])},function(n,o,i,s){a("failure",[n,o,i,s,e,t,r]),p(n,e,i)}),n}function c(r,o){var a,i=n.offline_cache_enabled&&n.offline_cache_enabled();e.has(r)&&!o&&(k.log("GETing from cache",r),a=e.get(r));var s;if(a&&(s=t.Deferred().resolve(a).promise({__cached:!0}),!i||r in _))return s;k.log("GETing",r),_[r]=null;var u=l("GET",r).done(function(t){k.log("GOT",r),o||(t.__time=+new Date,e.set(r,t)),a&&i&&k.log("Updating request cache",r)});return a&&i?s:u}function p(e,t,r){if(k.log("Request failed:",t,r),e.responseText)try{var n=JSON.parse(e.responseText);"error_message"in n?k.log("Error message: ",n.error_message):k.log("Response data: ",e.responseText)}catch(o){}}function d(e,t){return k.log("DELETing",e),l("DELETE",e,t).done(function(){k.log("DELETEd",e)})}function f(e,t){return k.log("PATCHing",e),l("PATCH",e,t).done(function(){k.log("PATCHed",e)})}function m(e,t){return k.log("POSTing",e),l("POST",e,t).done(function(){k.log("POSTed",e)})}function g(e,t){return k.log("PUTing",e),l("PUT",e,t).done(function(){k.log("PUT",e)})}function h(){function e(){u||!i&&s&&(k.log("Closing pool"),u=!0,setTimeout(l?a.reject:a.resolve,0))}function r(t,r){var o=t.apply(this,r);return i++,n.push(o),o.fail(function(){l=!0}),o.always(function(){i--,e()}),o}k.log("Opening pool");var n=[],o={},a=t.Deferred(),i=0,s=!1,u=!1,l=!1;this.finish=function(){s=!0,e()},this.get=function(e){if(e in o)return o[e];var t=r(c,arguments);return o[e]=t,t},this.del=function(){return r(d,arguments)},this.patch=function(){return r(f,arguments)},this.post=function(){return r(m,arguments)},this.put=function(){return r(g,arguments)},this.abort=function(){for(var e,t=0;e=n[t++];)void 0!==e.abort&&4!==e.readyState&&e.abort();a.reject()},a.promise(this)}function v(e,t){return(y[e]=y[e]||[]).push(t),{on:v}}function b(e){this.data=e,this.toString=function(){return this.data}}var k=r("req"),y={},_={};return{get:c,post:m,del:d,put:g,patch:f,pool:function(){return new h},on:v,RawData:b,_set_xhr:function(e){u=e}}}),define("models",["cache","defer","log","requests","settings","storage","underscore","z"],function(e,t,r,n,o,a,i,s){function u(){d={}}function l(){s.doc.trigger("save_cache",p),i.isEqual(a.getItem(p),d)||(a.setItem(p,d),c.log("Persisting model cache"))}var c=r("model"),p="model_cache",d={};o.offline_cache_enabled&&o.offline_cache_enabled()&&(d=a.getItem(p)||{}),window.addEventListener("beforeunload",l,!1),s.doc.on("saving_offline_cache",function(t,r){var n={request_cache:e.cache,model_cache:d},s=JSON.stringify(n.request_cache).length+JSON.stringify(n.model_cache).length;if(s>=o.offline_cache_limit)c.warn("Quota exceeded for request/model offline cache; flushing cache"),e.flush(),u(),a.setItem(r,d);else{var l=n[r];i.isEqual(a.getItem(r),l)||(a.setItem(r,l),c.log("Persisting model cache"))}});var f=o.model_prototypes;return function(e){function r(t,r){function n(t){var r=t[m];d[e][r]=t,c.log("Stored "+r+" as "+e)}if(i.isArray(t))return i.each(t,n),r?null:t;var o=n(t);return r?null:[o,t]}function o(t){function r(t){return d[e][t[m]]}return i.isArray(t)?t.map(r):r(t)}function a(r,o,a){if(a=a||n.get,o){if(o in d[e])return c.log("Found "+e+" with key "+o),t.Deferred().resolve(d[e][o]).promise({__cached:!0});c.log(e+" cache miss for key "+o)}return a(r)}function s(t,r){if(!r)return t in d[e]?(c.log("Found "+e+" with lookup key "+t),d[e][t]):void c.log(e+" cache miss for key "+t);for(var n in d[e]){var o=d[e][n];if(r in o&&o[r]===t)return o}}function l(){d[e]=[]}function p(t,r){if(r){var n=s(t,r);if(!n)return void c.error("Could not find model cache entry to delete.");t=n[m]}delete d[e][t]}if(!(e in f))throw new Error('Unknown model "'+e+'"');e in d||(d[e]={});var m=f[e];return{cast:r,data_store:d,del:p,flush:u,get:a,lookup:s,purge:l,uncast:o}}}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("salvattore",[],t):e.salvattore=t()}(this,function(){window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),r=document.getElementsByTagName("script")[0],n=null;t.type="text/css",t.id="matchmediajs-test",r.parentNode.insertBefore(t,r),n="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var r="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=r:t.textContent=r,"1px"===n.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,t=e("only all").matches,r=!1,n=0,o=[],a=function(){clearTimeout(n),n=setTimeout(function(){for(var t=0,r=o.length;r>t;t++){var n=o[t].mql,a=o[t].listeners||[],i=e(n.media).matches;if(i!==n.matches){n.matches=i;for(var s=0,u=a.length;u>s;s++)a[s].call(window,n)}}},30)};window.matchMedia=function(n){var i=e(n),s=[],u=0;return i.addListener=function(e){t&&(r||(r=!0,window.addEventListener("resize",a,!0)),0===u&&(u=o.push({mql:i,listeners:s})),s.push(e))},i.removeListener=function(e){for(var t=0,r=s.length;r>t;t++)s[t]===e&&s.splice(t,1)},i}}(),function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),n=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+n)},n);return e=r+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var e=function(e,t){var r={},n=[],o=function(e,t,r){e.dataset?e.dataset[t]=r:e.setAttribute("data-"+t,r)},a=function(e,t){return e.dataset?e.dataset[t]:e.setAttribute("data-"+t)};return r.obtain_grid_settings=function(t){var r,n,o=e.getComputedStyle(t,":before"),a=o.getPropertyValue("content").slice(1,-1),i=a.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/);return i?(r=i[1],n=i[2],n=n?n.split("."):["column"]):(i=a.match(/^\s*\.(.+)\s+(\d+)\s*$/),n=i[1],r=i[2],r&&(r=r.split("."))),{numberOfColumns:r,columnClasses:n}},r.add_columns=function(e,n){for(var a=r.obtain_grid_settings(e),i=a.numberOfColumns,s=a.columnClasses,u=(new Array(+i),t.createDocumentFragment()),l=i;0!==l--;){var c=t.createElement("div");c.className=s.join(" "),u.appendChild(c)}e.appendChild(u),r.append_elements(e,Array.prototype.slice.call(n.children)),o(e,"columns",i)},r.remove_columns=function(r){var n=t.createRange();n.selectNodeContents(r);var a=Array.prototype.filter.call(n.extractContents().childNodes,function(t){return t instanceof e.HTMLElement}),i=a.length,s=a[0].childNodes.length,u=new Array(s*i);Array.prototype.forEach.call(a,function(e,t){Array.prototype.forEach.call(e.children,function(e,r){u[r*i+t]=e})});var l=t.createElement("div");return o(l,"columns",0),u.filter(function(e){return!!e}).forEach(function(e){l.appendChild(e)}),l},r.recreate_columns=function(t){e.requestAnimationFrame(function(){r.add_columns(t,r.remove_columns(t))})},r.media_query_change=function(e){e.matches&&Array.prototype.forEach.call(n,r.recreate_columns)},r.get_css_rules=function(e){var t;try{t=e.sheet.cssRules||e.sheet.rules}catch(r){return[]}return t||[]},r.get_stylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(t.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},r.media_rule_has_columns_selector=function(e){for(var t,r=e.length;r--;)if(t=e[r],t.selectorText&&t.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},r.scan_media_queries=function(){var t=[];e.matchMedia&&(r.get_stylesheets().forEach(function(n){Array.prototype.forEach.call(r.get_css_rules(n),function(n){n.media&&r.media_rule_has_columns_selector(n.cssRules)&&t.push(e.matchMedia(n.media.mediaText))})}),t.forEach(function(e){e.addListener(r.media_query_change)}))},r.next_element_column_index=function(e,t){var n,o,a,i,s=e.children,u=s.length,l=0,c=0,p=[],d=function(e){p[a]+=r.get_height_from_element(e)};for(a=0;u>a;a++)p[a]=r.get_height_from_element(s[a]),Array.prototype.forEach.call(t[a].childNodes,d);if(i=Math.min.apply(Math,p),i>0)return p.indexOf(i);for(a=0;u>a;a++)n=s[a],o=n.children.length+(t[a].children||t[a].childNodes).length,0===l&&(l=o),l>o&&(c=a,l=o);return c},r.create_list_of_fragments=function(e){for(var r=new Array(e),n=0;n!==e;)r[n]=t.createDocumentFragment(),n++;return r},r.append_elements=function(e,n){var o=e.children,a=o.length,i=r.create_list_of_fragments(a),s=t.createElement("div");s.className=r.obtain_grid_settings(e).columnClasses.join(" "),s.appendChild(r.create_fragment(n)),e.appendChild(s),r.save_elements_height(n),e.removeChild(s),n.forEach(function(t){var n=r.next_element_column_index(e,i);i[n].appendChild(t)}),Array.prototype.forEach.call(o,function(e,t){e.appendChild(i[t])})},r.prepend_elements=function(e,n){var o=e.children,a=o.length,i=r.create_list_of_fragments(a),s=a-1;n.forEach(function(e){var t=i[s];t.insertBefore(e,t.firstChild),0===s?s=a-1:s--}),Array.prototype.forEach.call(o,function(e,t){e.insertBefore(i[t],e.firstChild)});for(var u=t.createDocumentFragment(),l=n.length%a;0!==l--;)u.appendChild(e.lastChild);e.insertBefore(u,e.firstChild)},r.register_grid=function(a){if("none"!==e.getComputedStyle(a).display){var i=t.createRange();i.selectNodeContents(a);var s=t.createElement("div");s.appendChild(i.extractContents()),o(s,"columns",0),r.add_columns(a,s),n.push(a)}},r.recreate_columns=function(t){e.requestAnimationFrame(function(){r.add_columns(t,r.remove_columns(t))})},r.create_fragment=function(e){var r=t.createDocumentFragment();return Array.prototype.forEach.call(e,function(e){r.appendChild(e)}),r},r.get_height_from_element=function(e){var t=e.getBoundingClientRect().height;if(!t){var r=a(e,"salvatorreHeight");r&&(t=parseInt(r,10))}return t},r.save_elements_height=function(e){Array.prototype.forEach.call(e,function(e){o(e,"salvatorreHeight",e.getBoundingClientRect().height)})},r.init=function(){var e=t.createElement("style");e.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(e);var n=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(n,r.register_grid),r.scan_media_queries()},r.init(),{append_elements:r.append_elements,prepend_elements:r.prepend_elements,register_grid:r.register_grid,recreate_columns:r.recreate_columns}}(window,window.document);return e}),define("utils_local",["defer","jquery","log","salvattore","settings","underscore","urls","z"],function(e,t,r,n,o,a,i,s){function u(){var e=(new Date).getFullYear()>=2010;return e||v.log("System date appears to be incorrect!"),e}function l(e,t){s.onLine&&(v.log("Offline detected."),s.win.trigger("offline_detected"),s.onLine=!1),t&&p(t),e.reject()}function c(e,t){s.onLine||(v.log("Online detected."),s.win.trigger("online_detected"),s.onLine=!0),t&&p(t),e.resolve()}function p(e){e.onopen=null,e.onerror=null,e.close()}function d(){var t=e.Deferred();if(window.__mockOffLine===!0)return l(t),t.promise();try{if(null===navigator.mozTCPSocket)return f();v.log("Checking online state with socket");var r=new URL(o.cdn_url).host,n=80,a=navigator.mozTCPSocket.open(r,n);a.onerror=function(){l(t,a)},a.onopen=function(){c(t,a)}}catch(i){return f()}return t.promise()}function f(){var t=e.Deferred(),r=new Image;return r.src="https://marketplace.cdn.mozilla.net/media/fireplace/img/online-status-beacon.gif?"+ +new Date,r.onload=function(){c(t)},r.onerror=function(){l(t)},t.promise()}function m(){h&&clearInterval(h),h=setInterval(d,1e4)}function g(e){e&&n.register_grid(e);var t=s.win.width();s.win.on("resize",a.debounce(function(){var r=s.win.width();r!==t&&(n.recreate_columns(e),t=r)},100))}var h,v=r("utils_local"),b=function(e){var r={};return t('.localized[data-name="'+e+'"]').each(function(){r[this.getAttribute("data-lang")]=this.value}),r},k=function(e){for(var t=[],r=Object.keys(e),n=0;n<r.length;n++){var o=[];o.push(r[n]),o.push(e[r[n]]),t.push(o)}return t};return{build_localized_field:b,checkOnline:d,initSalvattore:g,isSystemDateRecent:u,items:k,pollOnlineState:m}}),define("feed",["edbrands","l10n","models","nunjucks","underscore","utils_local"],function(e,t,r,n,o,a){function i(e){function t(e){var t=e.type;return o.each(e.apps,function(e){t+="_"+e.slug}),t}function r(e){for(var t=0,r=0,n=e.length;n>r;r++)t+=e.charCodeAt(r);return t}function n(e){var t=1e4*Math.sin(e++);
return t-Math.floor(t)}var a=t(e),i=r(a),s=n(i);return p[Math.floor(s*p.length)]}function s(e){if(!e||!e[0].group)return e;for(var t=[],r={name:e[0].group,apps:[]},n=0;n<e.length;n++)e[n].group!=r.name&&(t.push(r),r={name:e[n].group,apps:[]}),r.apps.push(e[n]);return t.push(r),t}var u=t.gettext,l={grid:u("Grid Layout"),list:u("List Layout")},c=a.items(l),p=["ruby","amber","emerald","topaz","sapphire","amethyst","garnet"],d="icon",f="image",m="description",g="quote",h="preview",v={icon:u("Icon"),image:u("Background Image"),description:u("Description"),quote:u("Quote"),preview:u("Screenshot")},b="promo",k="listing",y="operator",_={promo:u("Promo Collection"),listing:u("Listing Collection")},w=6;return{BRAND_TYPES:e.BRAND_TYPES,BRAND_LAYOUTS:l,BRAND_LAYOUTS_CHOICES:c,COLL_PROMO:b,COLL_LISTING:k,COLL_OPERATOR:y,COLL_TYPES:_,FEEDAPP_ICON:d,FEEDAPP_IMAGE:f,FEEDAPP_DESC:m,FEEDAPP_QUOTE:g,FEEDAPP_PREVIEW:h,FEEDAPP_TYPES:v,cast_feed_app:r("feed-app").cast,cast_brand:r("feed-brand").cast,cast_collection:r("feed-collection").cast,cast_shelf:r("feed-shelf").cast,get_brand_color_class:i,get_brand_type:e.get_brand_type,group_apps:s,MAX_BRAND_APPS:w}}),define("content-ratings",["format","l10n","urls","utils","z"],function(e,t,r,n,o){function a(e){return n.urlparams(r.media("fireplace/img/icons/ratings/"+e),{build:o.body.data("build-id-js")||"0"})}e=e.format;var i=t.gettext,s={classind:{0:a("CLASSIND_L.png"),10:a("CLASSIND_10.png"),12:a("CLASSIND_12.png"),14:a("CLASSIND_14.png"),16:a("CLASSIND_16.png"),18:a("CLASSIND_18.png")},esrb:{0:a("ESRB_e.png"),10:a("ESRB_e10.png"),13:a("ESRB_t.png"),17:a("ESRB_m.png"),18:a("ESRB_ao.png")},generic:{3:a("generic_3.png"),7:a("generic_7.png"),12:a("generic_12.png"),16:a("generic_16.png"),18:a("generic_18.png"),pending:a("generic_rp.png")},pegi:{3:a("pegi_3.png"),7:a("pegi_7.png"),12:a("pegi_12.png"),16:a("pegi_16.png"),18:a("pegi_18.png")},usk:{0:a("USK_0.png"),6:a("USK_6.png"),12:a("USK_12.png"),16:a("USK_16.png"),18:a("USK_18.png"),"rating-refused":a("USK_RR.png")}},u={pegi:{has_pegi_discrimination:a("descriptors/pegi_discrimination.png"),has_pegi_drugs:a("descriptors/pegi_drugs.png"),has_pegi_gambling:a("descriptors/pegi_gambling.png"),has_pegi_horror:a("descriptors/pegi_fear.png"),has_pegi_lang:a("descriptors/pegi_language.png"),has_pegi_nudity:a("descriptors/pegi_nudity.png"),has_pegi_online:a("descriptors/pegi_online.png"),has_pegi_scary:a("descriptors/pegi_fear.png"),has_pegi_sex_content:a("descriptors/pegi_sex.png"),has_pegi_violence:a("descriptors/pegi_violence.png"),has_pegi_digital_purchases:a("descriptors/pegi_inapp_purchase_option.png"),has_pegi_shares_info:a("descriptors/pegi_personal_data_sharing.png"),has_pegi_shares_location:a("descriptors/pegi_location_data_sharing.png"),has_pegi_users_interact:a("descriptors/pegi_social_interaction_functionality.png")}},l={esrb:{has_digital_purchases:a("interactives/ESRB_digital-purchases.png"),has_shares_info:a("interactives/ESRB_shares-info.png"),has_shares_location:a("interactives/ESRB_shares-location.png"),has_users_interact:a("interactives/ESRB_users-interact.png")},classind:{}},c={classind:"http://www.culturadigital.br/classind",esrb:"http://www.esrb.org/ratings/ratings_guide.jsp",generic:"https://www.globalratings.com/ratings_guide.aspx",pegi:"http://www.pegi.info/en/index/id/33/",usk:"http://www.usk.de/iarc0/"},p=i("For ages {0}+"),d={bodies:{classind:"CLASSIND",esrb:"ESRB",generic:i("Generic"),pegi:"PEGI",usk:"USK"},ratings:{generic:{0:i("For all ages"),3:e(p,3),6:e(p,6),7:e(p,7),10:e(p,10),12:e(p,12),14:e(p,14),16:e(p,16),18:e(p,18),pending:i("Rating Pending"),"rating-refused":i("Rating Refused")},esrb:{0:i("Everyone"),10:i("Everyone 10+"),13:i("Teen"),17:i("Mature 17+"),18:i("Adults Only 18+")}}};return d.ratings.classind=d.ratings.generic,d.ratings.pegi=d.ratings.generic,d.ratings.usk=d.ratings.generic,"es"==window.navigator.l10n.language&&(s.esrb={0:a("esrb_e_spa.png"),10:a("esrb_e10_spa.png"),13:a("esrb_t_spa.png"),17:a("esrb_m_spa.png"),18:a("esrb_ao_spa.png")},delete l.esrb),{descriptor_icons:u,detail_links:c,names:d,interactive_icons:l,rating_icons:s}}),define("helpers_local",["feed","compatibility_filtering","content-ratings","models","nunjucks","regions","settings","urls","user_helpers","utils_local","z"],function(e,t,r,n,o,a,i,s,u,l,c){function p(e){return-1!==c.apps.indexOf(e)}function d(e,t){return e.indexOf(t)}var f=o.require("filters"),m=o.require("globals");f.json=JSON.stringify,o.env&&o.env.addFilter("json",JSON.stringify),f.items=l.items,f.rewriteCdnUrls=function(e){var t=[{name:"Privacy Policy",pattern:/\/media\/docs\/privacy\/.+\.html/g,replacement:"/privacy-policy"},{name:"Terms of Use",pattern:/\/media\/docs\/terms\/.+\.html/g,replacement:"/terms-of-use"}];return t.forEach(function(t){e=e.replace(t.pattern,t.replacement)}),e},m.feed=e,m.iarc_names=r.names,m.NEWSLETTER_LANGUAGES=i.NEWSLETTER_LANGUAGES,m.REGIONS=a.REGION_CHOICES_SLUG,m.user_helpers=u,m.PLACEHOLDER_ICON=s.media("fireplace/img/icons/placeholder.png"),m.compatibility_filtering=t;var g={cast_app:n("app").cast,has_installed:p,indexOf:d};for(var h in g)g.hasOwnProperty(h)&&(m[h]=g[h]);return g}),define("installer_direct",["defer","l10n","log","settings","z"],function(e,t,r,n,o){function a(t){t=t||{};var r=e.Deferred(),n=(t.navigator||window.navigator).mozApps,a=n.getInstalled();return a.onsuccess=function(){for(var e=[],t=0;t<a.result.length;t++)e.push(a.result[t].manifestURL);o.apps=e,r.resolve(e)},r.promise()}function i(t,r){r=r||{};var n=e.Deferred(),o=(r.navigator||window.navigator).mozApps,a=o.getInstalled();return a.onsuccess=function(){for(var e=0;e<a.result.length;e++)a.result[e].manifestURL==t&&n.resolve(a.result[e]);n.reject()},n.promise()}function s(e){var t=navigator.mozApps.getInstalled();t.onsuccess=function(){for(var r={},n=0;n<t.result.length;n++)r[t.result[n].manifestURL]=t.result[n];r[e].launch()}}function u(t,r){var n=e.Deferred();return f.log("Checking for update of "+t),i(t,r).done(function(e){if(e.downloading)return f.log("Checking for app update failed (APP_IS_DOWNLOADING) for "+t),void n.reject("APP_IS_DOWNLOADING");if(e.downloadAvailable)return f.log("Checking for app update succeeded immediately (downloadavailable) for "+t),void n.resolve(!0);e.ondownloadavailable=function(){f.log("Checking for app update succeeded (downloadavailable) for "+t),n.resolve(e.downloadAvailable)},e.ondownloadapplied=function(){f.log("Checking for app update succeeded (downloadaapplied) for "+t),n.resolve(e.downloadAvailable)};var r=e.checkForUpdate();r.onerror=function(){var e=this.error.name||this.error;f.log("Checking for app update failed ("+e+") for "+t),n.reject(e)}}).fail(function(){f.log("Checking for app update failed (NOT_INSTALLED) for "+t),n.reject("NOT_INSTALLED")}),n.promise()}function l(t,r){var n=e.Deferred();return f.log("Applying update of "+t),i(t,r).done(function(e){return e.ondownloadsuccess=function(){f.log("Applying app update succeeded (downloadsuccess) for "+t),n.resolve()},e.ondownloaderror=function(){f.log("Applying app update failed (downloaderror) for "+t),n.reject(this.error.name||this.error)},e.downloading?void n.reject("APP_IS_DOWNLOADING"):e.downloadAvailable?void e.download():void n.reject("NO_DOWNLOAD_AVAILABLE")}).fail(function(){n.reject("NOT_INSTALLED")}),n.promise()}function c(t,r){f.log("Using direct installer for "+t.manifest_url);var n=e.Deferred();r.data=r.data||{};var o;t.manifest_url&&(o=t.manifest_url);var a=(r.navigator||window.navigator).mozApps,i=t.is_packaged?"installPackage":"install";if(!a[i])return n.reject(d("Unable to install packaged apps")).promise();var s=a[i](o,r.data);return s.onsuccess=function(){f.log("App install request for "+t.name);var e,r=setInterval(function(){e=s.result.installState,"installed"==e&&(n.resolve(),clearInterval(r))},250);s.result.ondownloaderror=function(e){n.reject(e.application.downloadError.name),clearInterval(r)}},s.onerror=function(){n.reject(this.error.name||this.error)},n.promise()}function p(t,r){var n=e.Deferred();return c(t,r).done(function(){f.log("App installed: "+t.name),n.resolve({},t)}).fail(function(e){f.log("Install failed: "+e),"DENIED"==e?n.reject():n.reject("NETWORK_ERROR"==e?d("Sorry, we had trouble fetching this app's data. Please try again later."):d("App install error: {error}",{error:e}))}),n.promise()}var d=t.gettext,f=r("installer");return{applyUpdate:l,checkForUpdate:u,getInstalled:a,launch:s,install:p}}),define("installer_iframe",["defer","l10n","log","settings","utils","z"],function(e,t,r,n,o,a){function i(){var e="iframe-installer",t=a.body.data("build-id-js"),r=n.iframe_installer_src;t&&(r=o.urlparams(n.iframe_installer_src,{b:t,cache:31536e3})),document.getElementById(e)||(g=document.createElement("iframe"),g.id=e,g.src=r,g.height=0,g.width=0,g.style.borderWidth=0,g.style.position="fixed",document.body.appendChild(g))}function s(t,r){f.log("Using iframe installer for "+t.manifest_url);var o=e.Deferred();return g.contentWindow.postMessage({name:"install-package",data:{product:t,opt:r}},"*"),a.page.on("iframe-install-package",function(e,r){if(f.log("Received message from iframe installer (install-package)"),r&&"install-package"==r.name&&r.appId==t.id)if(r.error){if(f.log("iframe install failed: "+r.error.error),"DENIED"==r.error.error)return void o.reject();if("NETWORK_ERROR"==r.error.error)return void o.reject(n.offline_msg);o.reject(d("App install error: {error}",r.error))}else f.log("iframe install success"),o.resolve({},r.product)}),o.promise()}function u(t){f.log("Checking for update of "+t);var r=m["check-for-update"][t];return r?(f.log("We are already checking for update of "+t),r):(r=e.Deferred(),m["check-for-update"][t]=r,g.contentWindow.postMessage({name:"check-for-update",manifestURL:t},"*"),r.promise())}function l(t){f.log("Downloading update of "+t);var r=m["apply-update"][t];return r?(f.log("We are already downloading update of "+t),r):(r=e.Deferred(),m["apply-update"][t]=r,g.contentWindow.postMessage({name:"apply-update",manifestURL:t},"*"),r.promise())}function c(){f.log("Getting installed apps");var t=e.Deferred();return a.page.one("iframe-getInstalled",function(e,r){f.log("Received message from iframe installer (getInstalled)"),r&&"getInstalled"==r.name&&(f.log("Got installed apps: "+r.result),a.apps=r.result,t.resolve(r.result))}),g.contentWindow.postMessage({name:"getInstalled"},"*"),t.promise()}function p(e){g.contentWindow.postMessage({name:"launch-app",manifestURL:e},"*")}var d=t.gettext,f=r("installer"),m={"check-for-update":{},"apply-update":{}};window.addEventListener("message",function(e){if(0!==n.iframe_installer_src.indexOf(e.origin))return void("https://login.persona.org"!==e.origin&&f.log(e.origin+" origin not allowed"));switch(e.data.name){case"loaded":return a.page.trigger("iframe-install-loaded");case"install-package":return a.page.trigger("iframe-install-package",[e.data]);case"getInstalled":return a.page.trigger("iframe-getInstalled",[e.data]);case"check-for-update":return a.page.trigger("iframe-check-for-update",[e.data]);case"apply-update":return a.page.trigger("iframe-apply-update",[e.data])}});var g;return a.page.on("iframe-check-for-update iframe-apply-update",function(e,t){f.log("Received message from iframe installer ("+t.name+")");var r=t.manifestURL,n=t.name,o=m[n][r];o&&(t.error?o.reject(t):o.resolve(t))}),{applyUpdate:l,checkForUpdate:u,getInstalled:c,initialize_iframe:i,launch:p,install:s}}),define("apps",["capabilities","defer","installer_direct","installer_iframe","l10n","log","nunjucks","settings","underscore","utils"],function(e,t,r,n,o,a,i,s,u){function l(e,r){var n=t.Deferred();return g.install(e,r).done(function(e,t){n.resolve(e,t)}).fail(function(e,t){n.reject(e,t)}),n.promise()}function c(){return g.getInstalled()}function p(e){return g.launch(e)}function d(e){return g.checkForUpdate(e)}function f(e){return g.applyUpdate(e)}function m(t){if(!s.never_incompat){if(b&&v in t)return t[v];var r=[],n=e.device_type();return!t.payment_required||e.navPay||s.simulate_nav_pay?t.payment_required&&!t.price&&r.push(h("This app is unavailable for purchase in your region.")):r.push(h("Your device does not support payments.")),!e.webApps||!e.packagedWebApps&&t.is_packaged?r.push(h("Your browser or device is not web-app compatible.")):u.contains(t.device_types,n)||r.push(h("This app is unavailable for your platform.")),t[v]=r.length?r:void 0,t[v]}}{var g,h=o.gettext;a("apps")}"app:"===window.location.protocol?(g=n,g.initialize_iframe()):g=r;var v="__compat_reasons",b=!0;return i.require("globals").app_incompat=m,{applyUpdate:f,checkForUpdate:d,getInstalled:c,launch:p,incompat:m,install:l,_use_compat_cache:function(e){b=e}}}),function(){var e={};e["app_list.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main">',void e.getTemplate("compatibility_filtering.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+="</section>";var u;u=n.contextOrFrameLookup(t,r,"require_user")?n.contextOrFrameLookup(t,r,"api"):n.contextOrFrameLookup(t,r,"anonApi"),r.set("apiFn",u,!0),r.parent||(t.setVariable("apiFn",u),t.addExport("apiFn")),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"sort")?e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"apiFn")(n.contextOrFrameLookup(t,r,"endpoint_name")),n.makeKeywordArgs({sort:n.contextOrFrameLookup(t,r,"sort"),limit:24})):e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"apiFn")(n.contextOrFrameLookup(t,r,"endpoint_name")),n.makeKeywordArgs({limit:24})),r.set("search_url",l,!0),r.parent||(t.setVariable("search_url",l),t.addExport("search_url")),s+='<section class="app-list-page feed c">\n<section class="feed-layout-list multi-app-tile mkt-tile c" data-type="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"source"),e.autoesc),s+='">\n<div class="info hdr">\n<h1 class="feed-tile-header">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),s+="</h1>\n</div>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"search_url"),pluck:"objects",as:"app",paginate:"ul.app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="app-list c">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("app",u),a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"mini_tile")(u,n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"source")})),e.autoesc),a+=" "}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No apps found"),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("No apps found."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>\n</section>",o(null,s)})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["cat_overlay.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<ol class="cat-overlay appear-on-hover c">',r=r.push();var u=n.contextOrFrameLookup(t,r,"categories");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("cat",c),s+='<li>\n<a class="cat-',s+=n.suppressValue(n.memberLookup(c,"slug",e.autoesc),e.autoesc),s+=' cat-icon cat-hovercat" title="',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+='" href="',s+=t.lookup("url")("category",[n.memberLookup(c,"slug",e.autoesc)]),s+='">',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+="</a>\n</li>"}r=r.pop(),s+="</ol>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["categories.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="category-index main">',r=r.push();var u=n.contextOrFrameLookup(t,r,"categories");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("cat",c),s+='<a href="',s+=t.lookup("url")("category",[n.memberLookup(c,"slug",e.autoesc)]),s+='">\n<div class="cat-',s+=n.suppressValue(n.memberLookup(c,"slug",e.autoesc),e.autoesc),s+=' cat-icon cat-idx" data-cat-slug="',s+=n.suppressValue(n.memberLookup(c,"slug",e.autoesc),e.autoesc),s+='">\n<p>',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+="</p>\n</div>\n</a>"}r=r.pop(),s+="</section>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["category.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u;u=n.contextOrFrameLookup(t,r,"category")||"all",r.set("source",u,!0),r.parent||(t.setVariable("source",u),t.addExport("source")),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"category")?n.contextOrFrameLookup(t,r,"url")("category",[n.contextOrFrameLookup(t,r,"category")]):n.contextOrFrameLookup(t,r,"url")("homepage"),r.set("category_url",l,!0),r.parent||(t.setVariable("category_url",l),t.addExport("category_url")),s+=" ";var c;c=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"category_url"),n.makeKeywordArgs({src:"category-popular"})),r.set("popular_url",c,!0),r.parent||(t.setVariable("popular_url",c),t.addExport("popular_url")),s+=" ";var p;p=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"category_url"),n.makeKeywordArgs({sort:"reviewed",src:"category-new"})),r.set("new_url",p,!0),r.parent||(t.setVariable("new_url",p),t.addExport("new_url")),s+=" ";var d;d=n.contextOrFrameLookup(t,r,"category")?e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("search"),n.makeKeywordArgs({cat:n.contextOrFrameLookup(t,r,"category")})):n.contextOrFrameLookup(t,r,"url")("search"),r.set("search_url",d,!0),r.parent||(t.setVariable("search_url",d),t.addExport("search_url")),s+=" ";var f;f="reviewed"==n.contextOrFrameLookup(t,r,"sort")?e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"search_url"),n.makeKeywordArgs({sort:n.contextOrFrameLookup(t,r,"sort")})):n.contextOrFrameLookup(t,r,"search_url"),r.set("search_url",f,!0),r.parent||(t.setVariable("search_url",f),t.addExport("search_url")),s+='<section class="main">\n<header class="category-header">\n<h3 class="cat-',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category"),e.autoesc),s+=' cat-icon mobile-cat-header"\ndata-cat-slug="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category"),e.autoesc),s+='">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category_name"),e.autoesc),s+='</h3>\n<h3 class="cat-',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category"),e.autoesc),s+=' cat-icon desktop-cat-header"\ndata-cat-slug="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category"),e.autoesc),s+='">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category_name"),e.autoesc),s+="</h3>\n</header>",e.getTemplate("compatibility_filtering.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='</section>\n<section id="gallery" class="island main category gallery full c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),pluck:"objects",as:"app",paginate:"ol.listing"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+=" ";var i;i=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)>n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"limit",e.autoesc),r.set("paginated",i,!0),r.parent||(t.setVariable("paginated",i),t.addExport("paginated")),a+=" ",n.contextOrFrameLookup(t,r,"paginated")&&(a+='<header class="featured-header c">\n<nav class="tabs">\n<a',n.contextOrFrameLookup(t,r,"sort")||(a+=' class="active"'),a+=' href="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"popular_url"),e.autoesc),a+='" data-preserve-scroll>',a+=t.lookup("_")("Popular"),a+="</a>",a+="<a","reviewed"==n.contextOrFrameLookup(t,r,"sort")&&(a+=' class="active"'),a+=' href="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"new_url"),e.autoesc),a+='" data-preserve-scroll>',a+=t.lookup("_")("New"),a+='</a>\n</nav>\n<a href="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"search_url"),e.autoesc),a+='" class="view-all">',a+=t.lookup("_")("View All"),a+="</a>\n</header>"),a+='<ol class="container listing grid-if-desktop search-listing c">',r=r.push();var s=n.contextOrFrameLookup(t,r,"this");if(s)for(var u=0;u<s.length;u++){var l=s[u];r.set("app",l),a+='<li class="item result app c">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"market_tile")(l,n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"source")+"-"+(n.contextOrFrameLookup(t,r,"sort")||"popular")})),e.autoesc),a+="</li>"}return r=r.pop(),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ol>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No apps in this category"),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("The category you requested does not exist."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})})})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["compatibility_filtering.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="compat-filter">\n<form>\n<div class="pretty-select-wrapper">\n<label for="compatibility_filtering">',s+=t.lookup("_")("Show"),s+='</label>\n<input type="hidden" id="compatibility_filtering_endpoint_name" value="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"endpoint_name"),e.autoesc),s+='">\n<div class="compat-select-wrapper pretty-select">\n<select autocomplete="off" name="compatibility_filtering"\nid="compatibility_filtering">\n<option value="all"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),"all")&&(s+=" selected"),s+=">",s+=t.lookup("_")("All apps"),s+="</option>",n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxOS",e.autoesc)||n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxAndroid",e.autoesc)?(s+='<option value="',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"device_filter_name",e.autoesc),e.autoesc),s+='"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"device_filter_name",e.autoesc))&&(s+=" selected"),s+=">",s+=t.lookup("_")("Apps for My Device"),s+="</option>"):(s+='<option value="desktop"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),"desktop")&&(s+=" selected"),s+=">",s+=t.lookup("_")("Desktop Apps"),s+='</option>\n<option value="firefoxos"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),"firefoxos")&&(s+=" selected"),s+=">",s+=t.lookup("_")("Firefox OS Apps"),s+='</option>\n<option value="android-mobile"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),"android-mobile")&&(s+=" selected"),s+=">",s+=t.lookup("_")("Android Mobile Apps"),s+='</option>\n<option value="android-tablet"',n.memberLookup(n.contextOrFrameLookup(t,r,"compatibility_filtering"),"is_preference_selected",e.autoesc)(n.contextOrFrameLookup(t,r,"endpoint_name"),"android-tablet")&&(s+=" selected"),s+=">",s+=t.lookup("_")("Android Tablet Apps"),s+="</option>"),s+="</select>\n</div>\n</div>\n</form>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["confirmation.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<a href="#" class="close">',s+=t.lookup("_")("Close"),s+='</a>\n<p class="content"></p>\n<div class="buttons">\n<button class="button btn-cancel btn-delete confirmation-no cancel">',s+=t.lookup("_")("No"),s+='</button>\n<button class="button btn-approve confirmation-yes">',s+=t.lookup("_")("Yes"),s+="</button>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["credits.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="site-credits main full c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("Credits"),s+='</h2>\n</header>\n<article class="island prose">\n<ul>\n<li><a href="https://github.com/21echoes">21echoes</a> (David Kettler)</li>\n<li><a href="https://github.com/alexmiog">alexmiog</a> (alco)</li>\n<li><a href="https://github.com/almossawi">almossawi</a> (Ali Almossawi)</li>\n<li><a href="https://github.com/ametaireau">ametaireau</a> (Alexis Metaireau)</li>\n<li><a href="https://github.com/andymckay">andymckay</a> (Andy McKay)</li>\n<li><a href="https://github.com/arbi316">arbi316</a> (Seong-wook Gong)</li>\n<li><a href="https://github.com/arjun024">arjun024</a> (Arjun Sreedharan)</li>\n<li><a href="https://github.com/atsay">atsay</li>\n<li><a href="https://github.com/AutomatedTester">AutomatedTester</a> (David Burns)</li>\n<li><a href="https://github.com/auzelac91">auzelac91</a> (Aleksandra Uzelac)</li>\n<li><a href="https://github.com/bebef1987">bebef1987</a> (Florin Strugariu)</li>\n<li><a href="https://github.com/benoit-l">benoit-l</li>\n<li><a href="https://github.com/billrest">billrest</li>\n<li><a href="https://github.com/brandonsavage">brandonsavage</li>\n<li><a href="https://github.com/bsmedberg">bsmedberg</a> (Benjamin Smedberg)</li>\n<li><a href="https://github.com/Callek">Callek</a> (Justin Wood (Callek))</li>\n<li><a href="https://github.com/canuckistani">canuckistani</a> (Jeff Griffiths)</li>\n<li><a href="https://github.com/chenba">chenba</li>\n<li><a href="https://github.com/Chengings">Chengings</li>\n<li><a href="https://github.com/chenzihui">chenzihui</a> (Chen Zihui)</li>\n<li><a href="https://github.com/chilyashev">chilyashev</a> (Mihail Chilyashev)</li>\n<li><a href="https://github.com/chowse">chowse</a> (Chris Howse)</li>\n<li><a href="https://github.com/chuckharmston">chuckharmston</a> (Chuck Harmston)</li>\n<li><a href="https://github.com/clouserw">clouserw</a> (Wil Clouser)</li>\n<li><a href="https://github.com/colons">colons</a> (Iain Dawson)</li>\n<li><a href="https://github.com/CorneliuRusu">CorneliuRusu</li>\n<li><a href="https://github.com/craigcook">craigcook</a> (Craig Cook)</li>\n<li><a href="https://github.com/crankycoder">crankycoder</a> (Victor Ng)</li>\n<li><a href="https://github.com/cvan">cvan</a> (Christopher Van)</li>\n<li><a href="https://github.com/darktrojan">darktrojan</a> (Geoff Lankow)</li>\n<li><a href="https://github.com/darkwing">darkwing</a> (David Walsh)</li>\n<li><a href="https://github.com/dash1291">dash1291</a> (Ashish Dubey)</li>\n<li><a href="https://github.com/davedash">davedash</a> (Dave Dash)</li>\n<li><a href="https://github.com/davidbgk">davidbgk</a> (David Larlet)</li>\n<li><a href="https://github.com/dchan">dchan</a> (David Chan)</li>\n<li><a href="https://github.com/dethe">dethe</a> (Dethe Elza)</li>\n<li><a href="https://github.com/diox">diox</a> (Mathieu Pillard)</li>\n<li><a href="https://github.com/DronRathore">DronRathore</a> (Dron Rathore)</li>\n<li><a href="https://github.com/ednapiranha">ednapiranha</a> (Jen Fong-Adwent)</li>\n<li><a href="https://github.com/ehsan">ehsan</a> (Ehsan Akhgari)</li>\n<li><a href="https://github.com/erikrose">erikrose</a> (Erik Rose)</li>\n<li><a href="https://github.com/eviljeff">eviljeff</li>\n<li><a href="https://github.com/ferjm">ferjm</a> (Fernando Jiménez Moreno)</li>\n<li><a href="https://github.com/fligtar">fligtar</a> (Justin Scott)</li>\n<li><a href="https://github.com/flodolo">flodolo</a> (Francesco Lodolo)</li>\n<li><a href="https://github.com/fmarier">fmarier</a> (Francois Marier)</li>\n<li><a href="https://github.com/fox2mike">fox2mike</a> (Shyam Mani)</li>\n<li><a href="https://github.com/fwenzel">fwenzel</a> (Fred Wenzel)</li>\n<li><a href="https://github.com/gialloporpora">gialloporpora</a> (gialloporpora)</li>\n<li><a href="https://github.com/gkoberger">gkoberger</a> (Gregory Koberger)</li>\n<li><a href="https://github.com/glogiotatidis">glogiotatidis</a> (Giorgos Logiotatidis)</li>\n<li><a href="https://github.com/gocemitevski">gocemitevski</a> (Goce Mitevski)</li>\n<li><a href="https://github.com/gonzalodelgado">gonzalodelgado</a> (Gonzalo)</li>\n<li><a href="https://github.com/gregglind">gregglind</a> (Gregg Lind)</li>\n<li><a href="https://github.com/hannosch">hannosch</a> (Hanno Schlichting)</li>\n<li><a href="https://github.com/hardikj">hardikj</a> (Hardik Juneja)</li>\n<li><a href="https://github.com/hiikezoe">hiikezoe</li>\n<li><a href="https://github.com/holywen">holywen</li>\n<li><a href="https://github.com/hseagle2015">hseagle2015</a> (Sasa Tekovic)</li>\n<li><a href="https://github.com/hyeonseok">hyeonseok</a> (Hyeonseok Shin)</li>\n<li><a href="https://github.com/ianb">ianb</a> (Ian Bicking)</li>\n<li><a href="https://github.com/inma610">inma610</a> (Inma Barrios)</li>\n<li><a href="https://github.com/ioskar">ioskar</li>\n<li><a href="https://github.com/jaredkerim">jaredkerim</a> (Jared Kerim)</li>\n<li><a href="https://github.com/JasnaPaka">JasnaPaka</li>\n<li><a href="https://github.com/jasonthomas">jasonthomas</a> (Jason Thomas)</li>\n<li><a href="https://github.com/jbalogh">jbalogh</a> (Jeff Balogh)</li>\n<li><a href="https://github.com/jespersh">jespersh</a> (Jesper Hansen)</li>\n<li><a href="https://github.com/jlongster">jlongster</a> (James Long)</li>\n<li><a href="https://github.com/Joergen">Joergen</li>\n<li><a href="https://github.com/jrconlin">jrconlin</a> (JR Conlin)</li>\n<li><a href="https://github.com/julen">julen</a> (Julen Ruiz Aizpuru)</li>\n<li><a href="https://github.com/jvillalobos">jvillalobos</a> (Jorge Villalobos)</li>\n<li><a href="https://github.com/kelemeng">kelemeng</li>\n<li><a href="https://github.com/kkemenczy">kkemenczy</li>\n<li><a href="https://github.com/kmaglione">kmaglione</li>\n<li><a href="https://github.com/koehlermichael">koehlermichael</li>\n<li><a href="https://github.com/kscanne">kscanne</a> (Kevin Scannell)</li>\n<li><a href="https://github.com/kumar303">kumar303</a> (Kumar McMillan)</li>\n<li><a href="https://github.com/KWierso">KWierso</li>\n<li><a href="https://github.com/kyoshino">kyoshino</a> (Kohei Yoshino)</li>\n<li><a href="https://github.com/l-hedgehog">l-hedgehog</a> (Hector Zhao)</li>\n<li><a href="https://github.com/landas">landas</a> (Lars Andre Landås)</li>\n<li><a href="https://github.com/linostar">linostar</li>\n<li><a href="https://github.com/lissyx">lissyx</li>\n<li><a href="https://github.com/lmorchard">lmorchard</a> (Les Orchard)</li>\n<li><a href="https://github.com/lonnen">lonnen</a> (Chris Lonnen)</li>\n<li><a href="https://github.com/louisliutw">louisliutw</a> (Louis Liu)</li>\n<li><a href="https://github.com/magopian">magopian</a> (Mathieu Agopian)</li>\n<li><a href="https://github.com/marco-c">marco-c</a> (Marco)</li>\n<li><a href="https://github.com/Mardak">Mardak</a> (Edward Lee)</li>\n<li><a href="https://github.com/markgif">markgif</li>\n<li><a href="https://github.com/markh-bz">markh-bz</li>\n<li><a href="https://github.com/Marlena">Marlena</a> (Marlena Compton)</li>\n<li><a href="https://github.com/marsf">marsf</li>\n<li><a href="https://github.com/mathjazz">mathjazz</a> (Matjaž Horvat)</li>\n<li><a href="https://github.com/mattbasta">mattbasta</a> (Matt Basta)</li>\n<li><a href="https://github.com/maxcoder">maxcoder</a> (Selim Şumlu)</li>\n<li><a href="https://github.com/mccammos">mccammos</a> (Scott McCammon)</li>\n<li><a href="https://github.com/mikaland2">mikaland2</li>\n<li><a href="https://github.com/MikeLing">MikeLing</a> (Tiramisu 1993)</li>\n<li><a href="https://github.com/milossh">milossh</a> (Milos)</li>\n<li><a href="https://github.com/mnoorenberghe">mnoorenberghe</a> (Matt N.)</li>\n<li><a href="https://github.com/moz-verbatim">moz-verbatim</a> (Mozilla Verbatim)</li>\n<li><a href="https://github.com/mstriemer">mstriemer</a> (Mark Striemer)</li>\n<li><a href="https://github.com/muffinresearch">muffinresearch</a> (Stuart Colville)</li>\n<li><a href="https://github.com/mythmon">mythmon</a> (Mike Cooper)</li>\n<li><a href="https://github.com/nearlyfreeapps">nearlyfreeapps</a> (Andrew Halligan)</li>\n<li><a href="https://github.com/ngokevin">ngokevin</a> (Kevin Ngo)</li>\n<li><a href="https://github.com/nickdesaulniers">nickdesaulniers</a> (Nick Desaulniers)</li>\n<li><a href="https://github.com/nmaier">nmaier</a> (Nils Maier)</li>\n<li><a href="https://github.com/oremj">oremj</a> (Jeremy Orem)</li>\n<li><a href="https://github.com/Osmose">Osmose</a> (Michael Kelly)</li>\n<li><a href="https://github.com/ossreleasefeed">ossreleasefeed</a> (Schalk Neethling)</li>\n<li><a href="https://github.com/ozten">ozten</a> (Austin King)</li>\n<li><a href="https://github.com/peiying2">peiying2</li>\n<li><a href="https://github.com/pennyfx">pennyfx</a> (Arron Schaar)</li>\n<li><a href="https://github.com/peterbe">peterbe</a> (Peter Bengtsson)</li>\n<li><a href="https://github.com/petercpg">petercpg</a> (Peter Chen)</li>\n<li><a href="https://github.com/potch">potch</a> (Potch)</li>\n<li><a href="https://github.com/ppapadeas">ppapadeas</a> (Pierros Papadeas)</li>\n<li><a href="https://github.com/rctgamer3">rctgamer3</a> (rctgamer3)</li>\n<li><a href="https://github.com/rfreebern">rfreebern</a> (Ryan Freebern)</li>\n<li><a href="https://github.com/rhelmer">rhelmer</a> (Robert Helmer)</li>\n<li><a href="https://github.com/rlr">rlr</a> (ricky rosario)</li>\n<li><a href="https://github.com/robhudson">robhudson</a> (Rob Hudson)</li>\n<li><a href="https://github.com/rodin">rodin</a> (Romi Hardiyanto)</li>\n<li><a href="https://github.com/rtilder">rtilder</a> (Ryan Tilder)</li>\n<li><a href="https://github.com/samkeen-blog">samkeen-blog</li>\n<li><a href="https://github.com/Sancus">Sancus</a> (Andrei Hajdukewycz)</li>\n<li><a href="https://github.com/satdav">satdav</a> (davd Weir)</li>\n<li><a href="https://github.com/sgarrity">sgarrity</a> (Steven Garrity)</li>\n<li><a href="https://github.com/smozen">smozen</a> (Vito Smolej)</li>\n<li><a href="https://github.com/sole">sole</a> (sole)</li>\n<li><a href="https://github.com/spasovski">spasovski</a> (Davor Spasovski)</li>\n<li><a href="https://github.com/stasm">stasm</a> (Staś Małolepszy)</li>\n<li><a href="https://github.com/steekid">steekid</a> (Hao Shen)</li>\n<li><a href="https://github.com/tarekziade">tarekziade</a> (Tarek Ziade)</li>\n<li><a href="https://github.com/thedjpetersen">thedjpetersen</a> (David Petersen)</li>\n<li><a href="https://github.com/TheoChevalier">TheoChevalier</a> (Théo Chevalier)</li>\n<li><a href="https://github.com/timdream">timdream</a> (Timothy Guan-tin Chien)</li>\n<li><a href="https://github.com/tofumatt">tofumatt</a> (Matthew Riley MacPherson)</li>\n<li><a href="https://github.com/toniher">toniher</a> (Toni Hermoso Pulido)</li>\n<li><a href="https://github.com/tymofij">tymofij</a> (Tim Babych)</li>\n<li><a href="https://github.com/ujdhesa">ujdhesa</a> (Besnik)</li>\n<li><a href="https://github.com/vaidik">vaidik</a> (Vaidik Kapoor)</li>\n<li><a href="https://github.com/vinyll">vinyll</a> (Vincent Agnano)</li>\n<li><a href="https://github.com/wagnerand">wagnerand</li>\n<li><a href="https://github.com/washort">washort</li>\n<li><a href="https://github.com/wesj">wesj</a> (wes johnston)</li>\n<li><a href="https://github.com/willkg">willkg</a> (Will Kahn-Greene)</li>\n<li><a href="https://github.com/Witia1">Witia1</li>\n<li><a href="https://github.com/wladow">wladow</li>\n<li><a href="https://github.com/wraithan">wraithan</a> (Chris McDonald)</li>\n<li><a href="https://github.com/yfdyh000">yfdyh000</a> (YF)</li>\n<li><a href="https://github.com/zuzelvp">zuzelvp</a> (Zuzel Vera)</li>\n</ul>\n</article>\n</section>',o(null,s)
}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["debug.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main infobox prose" id="debug-page">\n<div>\n<style>\ndt {\nclear: left;\nfloat: left;\n}\n      dd {\nfloat: left;\n}\n      #debug-page label {\nfont-size: 18px;\n}\n      #debug-page select {\nmargin-left: 10px;\n}\n    </style>\n<h2>Debug</h2>\n<p>\n<button class="button" id="submit-debug">Submit logs</button>\n</p>\n<p>\n<button class="button" id="clear-localstorage">Clear <code>localStorage</code></button>\n</p>',s+=n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"offline_cache_enabled",e.autoesc)()?'<p>\n<button class="button" id="disable-offline-cache">Disable offline cache</button>\n</p>':'<p>\n<button class="button" id="enable-offline-cache">Enable offline cache</button>\n</p>',s+='<p>\n<button class="button" id="clear-offline-cache">Clear offline cache</button>\n</p>\n<p>\n<button class="button" id="clear-cookies">Clear cookies</button>\n</p>\n<p>\n<button class="button" id="nukecounter">Clear <code>newscounter</code></button>\n</p>\n<p>\n<label>\nRegion Override\n<select name="region" id="region">';var u;u=n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("region_override"),r.set("user_region",u,!0),r.parent||(t.setVariable("user_region",u),t.addExport("user_region")),s+='<option value=""',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_region")?"":" selected",e.autoesc),s+=">---</option>",r=r.push();var l=n.memberLookup(n.contextOrFrameLookup(t,r,"REGIONS"),"items",e.autoesc)();if(l){var c;if(n.isArray(l))for(c=0;c<l.length;c++){var p=l[c][0];r.set("code",l[c][0]);var d=l[c][1];r.set("region",l[c][1]),s+='<option value="',s+=n.suppressValue(p,e.autoesc),s+='"',s+=n.suppressValue(p==n.contextOrFrameLookup(t,r,"user_region")?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(d,e.autoesc),s+="</option>"}else{c=-1;for(var f in l){c++;var m=l[f];r.set("code",f),r.set("region",m),s+='<option value="',s+=n.suppressValue(f,e.autoesc),s+='"',s+=n.suppressValue(f==n.contextOrFrameLookup(t,r,"user_region")?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(m,e.autoesc),s+="</option>"}}}r=r.pop(),s+='</select>\n</label>\n</p>\n<p>\n<label>\nCarrier Override\n<select name="carrier" id="carrier">';var g;g=n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("carrier_override"),r.set("user_carrier",g,!0),r.parent||(t.setVariable("user_carrier",g),t.addExport("user_carrier")),s+='<option value=""',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_carrier")?"":" selected",e.autoesc),s+=">---</option>",r=r.push();var h=n.contextOrFrameLookup(t,r,"carriers");if(h)for(var v=0;v<h.length;v++){var b=h[v];r.set("carrier",b),s+="<option",s+=n.suppressValue(b==n.contextOrFrameLookup(t,r,"user_carrier")?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(b,e.autoesc),s+="</option>"}r=r.pop(),s+='</select>\n</label>\n</p>\n<h3>Site Settings</h3>\n<dl class="site-settings c">',r=r.push();var k=n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"items",e.autoesc)();if(k)for(var y=0;y<k.length;y++){var _=k[y];r.set("setting",_),s+="<dt>",s+=n.suppressValue(n.memberLookup(_,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue("persona_site_logo"==n.memberLookup(_,0,e.autoesc)?"—— truncated ——":n.memberLookup(_,1,e.autoesc)||"——",e.autoesc),s+="</dd>"}r=r.pop(),s+='</dl>\n<h3>User Settings</h3>\n<dl class="user-settings c">',r=r.push();var w=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_settings",e.autoesc)(),"items",e.autoesc)();if(w)for(var x=0;x<w.length;x++){var L=w[x];r.set("setting",L),s+="<dt>",s+=n.suppressValue(n.memberLookup(L,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(n.memberLookup(L,1,e.autoesc)||"––",e.autoesc),s+="</dd>"}r=r.pop(),s+='</dl>\n<h3>Capabilities</h3>\n<dl class="capabilities c">',r=r.push();var O=n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"items",e.autoesc)();if(O)for(var F=0;F<O.length;F++){var E=O[F];r.set("cap",E),s+="<dt>",s+=n.suppressValue(n.memberLookup(E,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(n.memberLookup(E,1,e.autoesc),e.autoesc),s+="</dd>"}r=r.pop(),s+=" ",r=r.push();var A=n.memberLookup(n.contextOrFrameLookup(t,r,"screen"),"items",e.autoesc)();if(A){var C;if(n.isArray(A))for(C=0;C<A.length;C++){var S=A[C][0];r.set("k",A[C][0]);var V=A[C][1];r.set("v",A[C][1]),s+="<dt>window.screen.",s+=n.suppressValue(S,e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(V,e.autoesc),s+="</dd>"}else{C=-1;for(var T in A){C++;var j=A[T];r.set("k",T),r.set("v",j),s+="<dt>window.screen.",s+=n.suppressValue(T,e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(j,e.autoesc),s+="</dd>"}}}r=r.pop(),s+="<dt>Feature Profile</dt>\n<dd>",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"profile"),e.autoesc),s+=' (<a href="/debug/features">view feature profile information</a>)</dd>\n</dl>\n<h3>Cache</h3>\n<pre id="cache-inspector"></pre>\n<ul class="cache-menu">',r=r.push();var N=n.memberLookup(n.contextOrFrameLookup(t,r,"cache"),"keys",e.autoesc)();if(N)for(var P=0;P<N.length;P++){var q=N[P];r.set("k",q),s+='<li><a href="#" data-url="',s+=n.suppressValue(q,e.autoesc),s+='">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"filter")(q),e.autoesc),s+="</a></li>"}r=r.pop(),s+='</ul>\n<h3>Recent Logs</h3>\n<ol class="debug-log">',r=r.push();var z=n.contextOrFrameLookup(t,r,"recent_logs");if(z)for(var D=0;D<z.length;D++){var R=z[D];r.set("entry",R),s+="<li>",r=r.push();var M=R;if(M)for(var I=0;I<M.length;I++){var H=M[I];r.set("piece",H),s+=n.suppressValue(H,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+="</ol>\n<h3>Persistent Logs</h3>",r=r.push();var $=n.memberLookup(n.contextOrFrameLookup(t,r,"persistent_logs"),"items",e.autoesc)();if($){var B;if(n.isArray($))for(B=0;B<$.length;B++){var U=$[B][0];r.set("log_type",$[B][0]);var W=$[B][1];r.set("logs",$[B][1]),s+="<h4>",s+=n.suppressValue(U,e.autoesc),s+='</h4>\n<ol class="debug-log">',r=r.push();var K=W;if(K)for(var G=0;G<K.length;G++){var J=K[G];r.set("entry",J),s+="<li>",r=r.push();var X=J;if(X)for(var Y=0;Y<X.length;Y++){var Q=X[Y];r.set("piece",Q),s+=n.suppressValue(Q,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+="</ol>"}else{B=-1;for(var Z in $){B++;var et=$[Z];r.set("log_type",Z),r.set("logs",et),s+="<h4>",s+=n.suppressValue(Z,e.autoesc),s+='</h4>\n<ol class="debug-log">',r=r.push();var tt=et;if(tt)for(var rt=0;rt<tt.length;rt++){var nt=tt[rt];r.set("entry",nt),s+="<li>",r=r.push();var ot=nt;if(ot)for(var at=0;at<ot.length;at++){var it=ot[at];r.set("piece",it),s+=n.suppressValue(it,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+="</ol>"}}}r=r.pop(),s+="<h3>Offline Cache</h3>\n<ol>",r=r.push();var st=n.memberLookup(n.contextOrFrameLookup(t,r,"request_cache"),"items",e.autoesc)();if(st){var ut;if(n.isArray(st))for(ut=0;ut<st.length;ut++){var lt=st[ut][0];r.set("url",st[ut][0]);{st[ut][1]}r.set("response",st[ut][1]),s+="<li>",s+=n.suppressValue(lt,e.autoesc),s+="</li>"}else{ut=-1;for(var ct in st){ut++;var pt=st[ct];r.set("url",ct),r.set("response",pt),s+="<li>",s+=n.suppressValue(ct,e.autoesc),s+="</li>"}}}r=r.pop(),s+="</ol>\n<pre>",s+=n.suppressValue(e.getFilter("stringify").call(t,n.contextOrFrameLookup(t,r,"request_cache"),n.contextOrFrameLookup(t,r,"null"),2),e.autoesc),s+="</pre>\n</div>\n</section>",o(null,s)}catch(dt){o(n.handleError(dt,a,i))}}return{root:e}}(),e["debug_features.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+="<style>\n.present {\nbackground: green;\n}\n\n  .absent {\nbackground: red;\n}\n\n  dd, dt {\npadding: 0.1em;\n}\n\n  dd {\nmargin-left: 0.5em;\n}\n</style>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),id:"features"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<section id="features" class="debug main features full c">\n<h2>Feature profile information</h2>\n<p> Profile string: <strong>',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"profile"),e.autoesc),a+="</strong> </p>";var i;i=n.contextOrFrameLookup(t,r,"this"),r.set("features",i,!0),r.parent||(t.setVariable("features",i),t.addExport("features")),a+='<dl class="c">',r=r.push();var s=n.contextOrFrameLookup(t,r,"features");if(s){var u;if(n.isArray(s))for(u=0;u<s.length;u++){var l=s[u][0];r.set("slug",s[u][0]);var c=s[u][1];if(r.set("feature",s[u][1]),a+=" ","__"!=n.memberLookup(l,"substr",e.autoesc)(0,2)){a+=" ",a+=" ";var p;p=n.memberLookup(c,"present",e.autoesc)?"present":"absent",r.set("klass",p,!0),r.parent||(t.setVariable("klass",p),t.addExport("klass")),a+='<dt class="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"klass"),e.autoesc),a+='">',a+=n.suppressValue(n.memberLookup(c,"position",e.autoesc),e.autoesc),a+=" - ",a+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),a+=" (",a+=n.suppressValue(l,e.autoesc),a+=")</dd>\n<dd>",a+=n.suppressValue(n.memberLookup(c,"description",e.autoesc),e.autoesc),a+="</dd>",""!=n.memberLookup(c,"apis",e.autoesc)&&(a+="<dd>APIs: ",a+=n.suppressValue(n.memberLookup(c,"apis",e.autoesc),e.autoesc),a+="</dd>"),a+=" "}a+=" "}else{u=-1;for(var d in s){u++;var f=s[d];if(r.set("slug",d),r.set("feature",f),a+=" ","__"!=n.memberLookup(d,"substr",e.autoesc)(0,2)){a+=" ",a+=" ";var m;m=n.memberLookup(f,"present",e.autoesc)?"present":"absent",r.set("klass",m,!0),r.parent||(t.setVariable("klass",m),t.addExport("klass")),a+='<dt class="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"klass"),e.autoesc),a+='">',a+=n.suppressValue(n.memberLookup(f,"position",e.autoesc),e.autoesc),a+=" - ",a+=n.suppressValue(n.memberLookup(f,"name",e.autoesc),e.autoesc),a+=" (",a+=n.suppressValue(d,e.autoesc),a+=")</dd>\n<dd>",a+=n.suppressValue(n.memberLookup(f,"description",e.autoesc),e.autoesc),a+="</dd>",""!=n.memberLookup(f,"apis",e.autoesc)&&(a+="<dd>APIs: ",a+=n.suppressValue(n.memberLookup(f,"apis",e.autoesc),e.autoesc),a+="</dd>"),a+=" "}a+=" "}}}return r=r.pop(),a+="</dl>\n</section>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t},null,null),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"anonApi")("feed"),n.makeKeywordArgs({limit:10})),id:"feed-items"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<div class="feed feed-items home-feed c" data-columns>',r=r.push();var i=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"objects",e.autoesc);if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("item",u),a+='<div class="feed-item-item">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_item")(u),e.autoesc),a+="</div>"}return r=r.pop(),a+="</div>",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc),["feed-item-item"]),e.autoesc),a+=" "),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("The feed is currently empty. Come back later!"),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+=" ",void o(null,s))})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["footer.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="newsletter-footer" class="c">',e.getTemplate("newsletter.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='</div>\n<div id="directory-footer" class="main full c">\n<div class="group">\n<a class="button devhub" href="/developers/">',s+=t.lookup("_")("Develop Apps"),s+='</a>\n</div>\n<div class="group links">\n<a href="/developers/">',s+=t.lookup("_")("Developer Hub"),s+='</a>\n<a href="https://wiki.mozilla.org/Marketplace/Contributing/Apps" target="_blank">',s+=t.lookup("_")("Get Involved"),s+='</a>\n<a href="#" class="submit-feedback">',s+=t.lookup("_")("Feedback"),s+="</a>",n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxOS",e.autoesc)?(s+='<a href="https://support.mozilla.org/products/firefox-os/marketplace" target="_blank">',s+=t.lookup("_")("Support"),s+="</a>"):n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxAndroid",e.autoesc)&&(s+='<a href="https://support.mozilla.org/kb/install-android-apps-using-marketplace" target="_blank">',s+=t.lookup("_")("Support"),s+="</a>"),s+='</div>\n<div class="language group links">\n<span class="region region-',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_region"),e.autoesc),s+='">',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"REGIONS"),n.contextOrFrameLookup(t,r,"user_region"),e.autoesc),e.autoesc),s+='</span>\n<a href="',s+=t.lookup("url")("purchases"),s+='">',s+=t.lookup("_")("My Apps"),s+="</a>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("developer")&&(s+='<a href="/developers/submissions" rel="external">',s+=t.lookup("_")("My Submissions"),s+="</a>"),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(s+='<a href="/reviewers/apps/queue/" rel="external" class="only-logged-in">',s+=t.lookup("_")("Reviewer Tools"),s+="</a>"),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("lookup")&&(s+='<a href="/lookup/" rel="external" class="only-logged-in">',s+=t.lookup("_")("Lookup Tool"),s+="</a>"),s+='</div>\n</div>\n<div id="footer">\n<div class="pad">\n<h1 id="footzilla"><a href="https://www.mozilla.org/" target="_blank">mozilla</a></h1>\n<p>',s+=t.lookup("_")('Except where otherwise <a href="{legal_url}" target="_blank">noted</a>, content on this site is licensed under the <a href="{cc_url}" target="_blank">Creative Commons Attribution Share-Alike License v3.0</a> or any later version.',n.makeKeywordArgs({legal_url:"http://www.mozilla.org/about/legal.html#site",cc_url:"http://creativecommons.org/licenses/by-sa/3.0/"})),s+='</p>\n<ul>\n<li><a href="',s+=t.lookup("url")("privacy"),s+='">',s+=t.lookup("_")("Privacy Policy"),s+='</a></li>\n<li><a href="',s+=t.lookup("url")("terms"),s+='">',s+=t.lookup("_")("Terms of Use"),s+='</a></li>\n<li><a href="https://www.mozilla.org/legal/fraud-report/index.html" target="_blank">',s+=t.lookup("_")("Report Trademark Abuse"),s+="</a></li>\n</ul>\n</div>\n</div>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["fx-accounts-banner.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner id="fx-accounts-banner" success dismiss="off">\n<span>',s+=t.lookup("_")("Firefox Accounts has arrived"),s+="</span>\n<mkt-login link>",s+=t.lookup("_")("Learn how to transfer your account"),s+="</mkt-login>\n<small>",s+=t.lookup("_")("It's easy."),s+="</small>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["fx_accounts_popup.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="fxa-box">\n<div id="fox-logo" style="opacity: 1;"></div>\n<div id="stage">\n<div id="main-content">\n<div class="box-info">\n<section>',s+=t.lookup("_")("Firefox Marketplace has transitioned to Firefox Accounts to manage your profile. Continue to complete the simple upgrade process."),s+='</section>\n<section>\n<form id="notice-form">\n<div class="button-row">\n<button>',s+=t.lookup("_")("Continue"),s+='</button>\n</div>\n</form>\n<div class="links">\n<a href="https://support.mozilla.org/kb/use-firefox-accounts-manage-your-marketplace-apps" target="_blank">',s+=t.lookup("_")("Learn more"),s+='</a>\n</div>\n</section>\n</div>\n<div class="box-email">\n<header>\n<h1>',s+=t.lookup("_")("Enter your email"),s+='</h1>\n<p id="email-help-text"></p>\n</header>\n<section>\n<form id="email-form" novalidate>\n<div class="input-row">\n<input name="email" class="email" placeholder="Email" type="email" required>\n<aside id="email-error" class="tooltip fade-down-tt">',s+=t.lookup("_")("Valid email required"),s+='</aside>\n</div>\n<div class="button-row">\n<button id="email-button" class="disabled">',s+=t.lookup("_")("Next"),s+='</button>\n</div>\n</form>\n<div class="links">\n<a href="https://support.mozilla.org/kb/use-firefox-accounts-manage-your-marketplace-apps" target="_blank">',s+=t.lookup("_")("Learn more"),s+='</a>\n</div>\n</section>\n</div>\n<div class="box-email-sent">\n<header>\n<h1>',s+=t.lookup("_")("Verify your email"),s+='</h1>\n</header>\n<section>\n<span id="verification-text"></span>\n<div class="links">\n<a href="#" class="back">',s+=t.lookup("_")("Back"),s+='</a>\n<br>\n<a href="https://support.mozilla.org/kb/use-firefox-accounts-manage-your-marketplace-apps" target="_blank">',s+=t.lookup("_")("Learn more"),s+="</a>\n</div>\n</section>\n</div>\n</div>\n</div>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["header.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/act_tray.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<nav role="navigation">\n<a href="#" id="nav-back" class="header-button icon back" title="',s+=t.lookup("_")("Back"),s+='"><b>',s+=t.lookup("_")("Back"),s+='</b></a>\n<h1 class="site"><a href="',s+=t.lookup("url")("homepage"),s+='"><span class="wordmark">Firefox Marketplace</span></a></h1>\n<span class="flex-shift"></span>\n<form novalidate method="GET" id="search" class="search" action="',s+=t.lookup("url")("search"),s+='">\n<label for="search-q">',s+=t.lookup("_")("Search"),s+='</label>\n<div id="site-search-suggestions" data-src=""></div>\n<input id="search-q" class="query-input" type="search" name="q" title="" x-inputmode="verbatim"\nautocapitalize="off" autocomplete="off" autocorrect="off" placeholder="',s+=t.lookup("_")("Search"),s+='" required\nvalue="',s+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"z"),"context",e.autoesc),"search",e.autoesc)||"",e.autoesc),s+='">\n<a href="#" class="close search-clear" title="',s+=t.lookup("_")("Clear"),s+='">',s+=t.lookup("_")("Clear"),s+='</a>\n</form>\n<span class="flex-span"></span>',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"act_tray")(!1),e.autoesc),s+='<a href="#" class="header-button persona register">',s+=t.lookup("_")("Register"),s+='</a>\n<a href="#" class="header-button button t persona">',s+=t.lookup("_")("Sign In"),s+="</a>\n</nav>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["incompatible.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner id="incompatibility-banner" dismiss="remember">\n<span>',s+=t.lookup("_")("You must use Firefox to install Firefox apps."),s+='</span>\n<a href="http://www.mozilla.org/firefox/" target="_blank" class="firefox-download">',s+=t.lookup("_")("Download"),s+="</a>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["marketplace-update.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner id="marketplace-update-banner" success dismiss="remember">\n<span>',s+=t.lookup("_")("An update to Marketplace is available."),s+='</span>\n<a href="#" class="download-button">',s+=t.lookup("_")("Download"),s+="</button>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["nav.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/act_tray.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u=n.makeMacro(["code","name","url"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("code",o),r.set("name",a),r.set("url",i);var u="";return u+='<li class="tab-item ',u+=n.suppressValue(o,e.autoesc),u+=n.suppressValue(n.contextOrFrameLookup(t,r,"path")==i?" initial-active":"",e.autoesc),u+='" data-tab="',u+=n.suppressValue(o,e.autoesc),u+='">\n<a class="tab-link" href="',u+=n.suppressValue(i,e.autoesc),u+='">',u+=n.suppressValue(a,e.autoesc),u+="</a>\n</li>",r=r.pop(),new n.SafeString(u)});t.addExport("navtab"),t.setVariable("navtab",u),s+=" ",s+=" ",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"act_tray")(!0,n.contextOrFrameLookup(t,r,"is_settings")),e.autoesc),s+=" ",s+=" ",s+='<ul class="navbar nav-mkt',n.contextOrFrameLookup(t,r,"is_settings")||(s+=" active"),s+='">',s+=" ",s+=n.suppressValue(u("homepage",t.lookup("_")("Home"),n.contextOrFrameLookup(t,r,"url")("homepage")),e.autoesc),s+=" ",s+=n.suppressValue(u("new",t.lookup("_")("New"),n.contextOrFrameLookup(t,r,"url")("new")),e.autoesc),s+=" ",s+=n.suppressValue(u("popular",t.lookup("_")("Popular"),n.contextOrFrameLookup(t,r,"url")("popular")),e.autoesc),s+=" ",s+=n.suppressValue(u("recommended",t.lookup("_")("Recommended"),n.contextOrFrameLookup(t,r,"url")("recommended")),e.autoesc),s+='<li class="tab-item tab-categories',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"path")==n.contextOrFrameLookup(t,r,"url")("categories")?" initial-active":"",e.autoesc),s+='"\ndata-tab="categories">\n<a class="tab-link mobile-cat-link" href="',s+=t.lookup("url")("categories"),s+='">',s+=t.lookup("_")("Categories"),s+='</a>\n<a class="tab-link desktop-cat-link">',s+=t.lookup("_")("Categories"),s+='</a>\n<div class="hovercats appear-on-hover"></div>\n</li>\n</ul>',s+='<ul class="navbar nav-settings',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"is_settings")?" active":"",e.autoesc),s+='">',s+=" ",s+=n.suppressValue(u("settings",t.lookup("_")("My Account"),n.contextOrFrameLookup(t,r,"url")("settings")),e.autoesc),s+=" ",s+=n.suppressValue(u("purchases",t.lookup("_")("My Apps"),n.contextOrFrameLookup(t,r,"url")("purchases")),e.autoesc),s+=" ",s+=n.suppressValue(u("feedback",t.lookup("_")("Feedback"),n.contextOrFrameLookup(t,r,"url")("feedback")),e.autoesc),s+='</ul>\n<div class="mkt-tray',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"is_settings")?" active":"",e.autoesc),s+='">\n<a class="header-button icon back-to-marketplace" href="#"\ntitle="',s+=t.lookup("_")("Back to Marketplace"),s+='"></a>\n</div>',o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["newsletter.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="newsletter',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?" newsletter-signup-page":"",e.autoesc),s+='">\n<form class="c" method="post">',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?(s+="<h3>",s+=t.lookup("_")("Sign up for our newsletter"),s+="</h3>"):(s+="<h3>",s+=t.lookup("_")("Get Firefox news! Sign up for our newsletter"),s+="</h3>"),s+='<input type="email" class="email newsletter-email-field" name="email" placeholder="',s+=t.lookup("_")("Email"),s+='" value="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_email"),e.autoesc),s+='" required>\n<button class="button s newsletter-signup-button newsletter-desktop">',s+=t.lookup("_")("Sign me up"),s+='</button>\n<div class="newsletter-details collapsed">\n<select name="region" class="newsletter-select">',r=r.push();var u=n.memberLookup(n.contextOrFrameLookup(t,r,"REGIONS"),"items",e.autoesc)();if(u){var l;if(n.isArray(u))for(l=0;l<u.length;l++){var c=u[l][0];r.set("code",u[l][0]);var p=u[l][1];r.set("region",u[l][1]),s+=" ","None"!=c&&(s+='<option value="',s+=n.suppressValue(c,e.autoesc),s+='"',s+=n.suppressValue(c==n.contextOrFrameLookup(t,r,"user_region")?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(p,e.autoesc),s+="</option>"),s+=" "}else{l=-1;for(var d in u){l++;var f=u[d];r.set("code",d),r.set("region",f),s+=" ","None"!=d&&(s+='<option value="',s+=n.suppressValue(d,e.autoesc),s+='"',s+=n.suppressValue(d==n.contextOrFrameLookup(t,r,"user_region")?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(f,e.autoesc),s+="</option>"),s+=" "}}}r=r.pop(),s+='</select>\n<select name="lang" class="newsletter-select">',r=r.push();var m=n.memberLookup(n.contextOrFrameLookup(t,r,"NEWSLETTER_LANGUAGES"),"items",e.autoesc)();if(m){var g;if(n.isArray(m))for(g=0;g<m.length;g++){var h=m[g][0];r.set("code",m[g][0]);var v=m[g][1];r.set("language",m[g][1]),s+=" ","None"!=h&&(s+=" ",s+='<option value="',s+=n.suppressValue(h,e.autoesc),s+='"',s+=n.suppressValue(h==n.contextOrFrameLookup(t,r,"user_lang")||h==n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user_lang"),"split",e.autoesc)("-"),0,e.autoesc)?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(v,e.autoesc),s+="</option>"),s+=" "}else{g=-1;for(var b in m){g++;var k=m[b];r.set("code",b),r.set("language",k),s+=" ","None"!=b&&(s+=" ",s+='<option value="',s+=n.suppressValue(b,e.autoesc),s+='"',s+=n.suppressValue(b==n.contextOrFrameLookup(t,r,"user_lang")||b==n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user_lang"),"split",e.autoesc)("-"),0,e.autoesc)?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(k,e.autoesc),s+="</option>"),s+=" "}}}r=r.pop(),s+='</select>\n<div class="privacy">\n<input type="checkbox" name="privacy" id="id_newsletter_privacy',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")&&(s+="_standalone"),s+='" required>\n<label for="id_newsletter_privacy',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")&&(s+="_standalone"),s+='">',s+=t.lookup("_")('I\'m okay with Mozilla handling my info as explained in <a href="{privacy_policy_url}" target="_blank">this Privacy Policy</a>.',n.makeKeywordArgs({privacy_policy_url:"https://www.mozilla.org/privacy/"})),s+='</label>\n</div>\n</div>\n<button class="button newsletter-signup-button newsletter-mobile',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?"":" s",e.autoesc),s+='">',s+=t.lookup("_")("Sign me up"),s+='</button>\n<a href="/settings" class="button support newsletter-cancel-button hide-on-desktop',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?"":" s",e.autoesc),s+='">',s+=t.lookup("_")("Cancel"),s+='</a>\n</form>\n<div class="processing">\n<span class="spinner alt"></span>\n</div>\n<div class="success">\n<h3>',s+=t.lookup("_")("Thanks for signing up!"),s+="</h3>\n<p>",s+=t.lookup("_")("You'll receive an email from mozilla@e.mozilla.org, please check your inbox for your first email from us. If you don’t see it, check your spam filter."),s+="</p>\n</div>\n</div>",o(null,s)}catch(y){o(n.handleError(y,a,i))}}return{root:e}}(),e["privacy.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="site-privacy-policy main full c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("Privacy Policy"),s+='</h2>\n</header>\n<article class="island prose">';var u;u="/docs/privacy/"+n.contextOrFrameLookup(t,r,"language")+".html?20141001",r.set("url",u,!0),r.parent||(t.setVariable("url",u),t.addExport("url")),s+=" ";var l;l="/docs/privacy/"+n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"default_locale",e.autoesc)+".html?20141001",r.set("fallback",l,!0),r.parent||(t.setVariable("fallback",l),t.addExport("fallback")),s+=" ",s+=n.suppressValue(e.getExtension("fetch").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"url")),fallback:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"fallback")),filters:["rewriteCdnUrls"]}),function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t}),!0&&e.autoesc),s+="</article>\n</section>",o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["terms.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="site-terms-of-use main full c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("Terms of Use"),s+='</h2>\n</header>\n<article class="island prose">';var u;u="/docs/terms/"+n.contextOrFrameLookup(t,r,"language")+".html?20141001",r.set("url",u,!0),r.parent||(t.setVariable("url",u),t.addExport("url")),s+=" ";var l;l="/docs/terms/"+n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"default_locale",e.autoesc)+".html?20141001",r.set("fallback",l,!0),r.parent||(t.setVariable("fallback",l),t.addExport("fallback")),s+=" ",s+=n.suppressValue(e.getExtension("fetch").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"url")),fallback:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"fallback")),filters:["rewriteCdnUrls"]}),function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t}),!0&&e.autoesc),s+="</article>\n</section>",o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["tests.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("commonplace/tests.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,s+='<script type="text/javascript" src="/tests/apps.js"></script>\n<script type="text/javascript" src="/tests/consumer_info.js"></script>\n<script type="text/javascript" src="/tests/compatibility_filtering.js"></script>\n<script type="text/javascript" src="/tests/fxa_migration.js"></script>\n<script type="text/javascript" src="/tests/mobilenetwork.js"></script>\n<script type="text/javascript" src="/tests/navbar.js"></script>',void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/more_button.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<li class="loadmore feed-item-item">\n<button class="button support" data-url="',s+=n.suppressValue(e.getFilter("safe").call(t,n.contextOrFrameLookup(t,r,"apiHost")(n.contextOrFrameLookup(t,r,"url"))+n.contextOrFrameLookup(t,r,"url")),e.autoesc),s+='">',s+=t.lookup("_")("More"),s+="</button>\n</li>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/act_tray.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["mobile","is_settings"],[],function(o,a,i){r=r.push(),i=i||{},r.set("mobile",o),r.set("is_settings",a);var s="";return s+='<div class="act-tray ',s+=n.suppressValue(o?"act-tray-mobile":"act-tray-desktop",e.autoesc),s+=n.suppressValue(o&&!a?" active":"",e.autoesc),s+='">\n<a href="',s+=n.suppressValue(o?"#":n.contextOrFrameLookup(t,r,"url")("settings"),e.autoesc),s+='"\nclass="header-button icon settings" title="',s+=t.lookup("_")("Settings"),s+='"></a>\n<div class="account-links only-logged-in">\n<ul>\n<li>\n<a href="',s+=t.lookup("url")("settings"),s+='">\n<b>',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("email"),e.autoesc),s+="</b>",s+=t.lookup("_")("Edit Account Settings"),s+='</a>\n</li>\n<li><a href="',s+=t.lookup("url")("purchases"),s+='">',s+=t.lookup("_")("My Apps"),s+="</a></li>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("developer")&&(s+='<li><a href="/developers/submissions">',s+=t.lookup("_")("My Submissions"),s+="</a></li>"),s+='<li><a class="submit-feedback" href="#">',s+=t.lookup("_")("Feedback"),s+='</a></li>\n<li><a href="#" class="logout">',s+=t.lookup("_")("Sign Out"),s+="</a></li>\n</ul>\n</div>\n</div>",r=r.pop(),new n.SafeString(s)
});t.addExport("act_tray"),t.setVariable("act_tray",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/emaillink.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ";var u=n.makeMacro(["email"],["title","class"],function(o,a){r=r.push(),a=a||{},r.set("email",o),r.set("title",a.hasOwnProperty("title")?a.title:n.contextOrFrameLookup(t,r,"None")),r.set("class",a.hasOwnProperty("class")?a["class"]:n.contextOrFrameLookup(t,r,"None"));var i="";return i+="<a",n.contextOrFrameLookup(t,r,"class")&&(i+=' class="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"class"),e.autoesc),i+='"'),i+=' href="mailto:',i+=n.suppressValue(o,e.autoesc),i+='">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),i+="</a>",r=r.pop(),new n.SafeString(i)});t.addExport("emaillink"),t.setVariable("emaillink",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/feed_app_tile.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ";var u=n.makeMacro(["feed_app"],[],function(o,a){r=r.push(),a=a||{},r.set("feed_app",o);var i="";return i+='<div class="tile-footer ',i+=n.suppressValue(n.memberLookup(o,"type",e.autoesc),e.autoesc),i+='" ',n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_QUOTE",e.autoesc)&&(i+='style="background: ',i+=n.suppressValue(n.memberLookup(o,"background_color",e.autoesc),e.autoesc),i+=';"'),i+=">",n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_DESC",e.autoesc)?(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),n.memberLookup(o,"description",e.autoesc))),e.autoesc),i+="</p>"):n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_QUOTE",e.autoesc)?(i+=" ",n.memberLookup(o,"pullquote_rating",e.autoesc)&&(i+='<p class="stars large white stars-',i+=n.suppressValue(n.memberLookup(o,"pullquote_rating",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(n.memberLookup(o,"pullquote_rating",e.autoesc),e.autoesc),i+="</p>"),i+="<blockquote><p>",i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"pullquote_text",e.autoesc),o)),e.autoesc),i+="</p></blockquote>",n.memberLookup(o,"pullquote_attribution",e.autoesc)&&(i+='<p class="quote-source">',i+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("&mdash; {attribution}"),{attribution:e.getFilter("safe").call(t,n.memberLookup(o,"pullquote_attribution",e.autoesc))}),e.autoesc),i+="</p>"),i+=" "):n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_PREVIEW",e.autoesc)&&(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o)),e.autoesc),i+='</p>\n<div class="preview-container ',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc)&&n.memberLookup(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc),1,e.autoesc)>n.memberLookup(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc),0,e.autoesc)?"vertical":"",e.autoesc),i+='"\nstyle="background-color: ',i+=n.suppressValue(n.memberLookup(o,"background_color",e.autoesc),e.autoesc),i+='">\n<div class="feed-app-preview deferred-background"\nstyle="background-image: url(',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+=');"\ndata-src="',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_url",e.autoesc),e.autoesc),i+='"></div>\n</div>'),i+="</div>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_app_tile"),t.setVariable("feed_app_tile",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/feed_item.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ",e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var u=i.market_button;t.setVariable("market_button",u),s+=" ",e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_tile"))return void o(new Error("cannot import 'market_tile'"));var l=i.market_tile;if(t.setVariable("market_tile",l),!i.hasOwnProperty("deferred_icon"))return void o(new Error("cannot import 'deferred_icon'"));var c=i.deferred_icon;t.setVariable("deferred_icon",c),s+=" ",e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var p=i.stars;t.setVariable("stars",p),s+=" ";var d=n.makeMacro(["app","price_only","src"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("app",o),r.set("price_only",a),r.set("src",i);var l="";return l+=" ",l+='<li class="app mini-tile">\n<a href="',l+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:i||"feed"})),e.autoesc),l+='" class="app-link c">',l+=n.suppressValue(c(n.memberLookup(n.memberLookup(o,"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),l+='<div class="info">\n<h3 class="app-name elliflow" title="',l+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o),e.autoesc),l+='">',l+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o),e.autoesc),l+='</h3>\n<div class="author elliflow vital subdetail" title="',l+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),l+='">',l+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),l+='</div>\n<div class="rating vital',l+=n.suppressValue(n.memberLookup(n.memberLookup(o,"ratings",e.autoesc),"count",e.autoesc)?"":" unrated",e.autoesc),l+='" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">',n.memberLookup(n.memberLookup(o,"ratings",e.autoesc),"average",e.autoesc)?(l+=" ",l+=n.suppressValue(p(n.memberLookup(n.memberLookup(o,"ratings",e.autoesc),"average",e.autoesc)),e.autoesc),l+=" "):(l+='<span class="cnt long">',l+=t.lookup("_")("Not yet rated"),l+="</span>"),l+="</div>\n</div>",l+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc)?u(o,n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(o,"manifest_url",e.autoesc),slug:n.memberLookup(o,"slug",e.autoesc)},price_only:a})):"",e.autoesc),l+="</a>\n</li>",r=r.pop(),new n.SafeString(l)});t.addExport("mini_tile"),t.setVariable("mini_tile",d),s+=" ";var f=n.makeMacro(["feed_app"],[],function(o,a){r=r.push(),a=a||{},r.set("feed_app",o);var i="";i+=" ";var s;s=n.memberLookup(o,"background_color",e.autoesc),r.set("color",s,!0),r.parent||(t.setVariable("color",s),t.addExport("color")),i+=" ";var u;return u=e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),r.set("desc",u,!0),r.parent||(t.setVariable("desc",u),t.addExport("desc")),i+='<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(n.memberLookup(o,"app",e.autoesc),"slug",e.autoesc)]),n.makeKeywordArgs({src:"featured-app"})),e.autoesc),i+='"\nclass="featured-app app-link" data-tracking-slug="',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"slug",e.autoesc),e.autoesc),i+='">',-1!=n.contextOrFrameLookup(t,r,"indexOf")([n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_ICON",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_IMAGE",e.autoesc)],n.memberLookup(o,"type",e.autoesc))?(i+='<section class="feed-item ',i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc)?"deferred-background":"",e.autoesc),i+='" ',n.contextOrFrameLookup(t,r,"desc")||n.memberLookup(o,"background_image",e.autoesc)?n.memberLookup(o,"background_image",e.autoesc)&&(i+=' style="background-image: url(',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+=')"\ndata-src="',i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc),e.autoesc),i+='" '):(i+=' style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".4"),e.autoesc),i+='" '),i+=">",n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"FEEDAPP_ICON",e.autoesc)&&(i+='<ul class="app-icons">\n<li>',i+=n.suppressValue(c(n.memberLookup(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(n.memberLookup(o,"app",e.autoesc),"name",e.autoesc),n.memberLookup(o,"app",e.autoesc))),e.autoesc),i+="</li>\n</ul>"),i+='<div class="curve" style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".8"),e.autoesc),i+='"></div>\n<div class="info" style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".8"),e.autoesc),i+='">\n<h1 class="name">',i+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(n.memberLookup(o,"app",e.autoesc),"name",e.autoesc),o),e.autoesc),i+='</h1>\n<p class="author">',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"author",e.autoesc),e.autoesc),i+="</p>\n</div>\n</section>"):(i+=" ",i+=n.suppressValue(l(n.memberLookup(o,"app",e.autoesc),n.makeKeywordArgs({feed_app:o,src:"featured-app"})),e.autoesc),i+=" "),i+="</a>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_app"),t.setVariable("feed_app",f),s+=" ";var m=n.makeMacro(["brand"],[],function(o,a){r=r.push(),a=a||{},r.set("brand",o);var i="";i+=" ";var s;s="branded-editorial-element",r.set("src",s,!0),r.parent||(t.setVariable("src",s),t.addExport("src")),i+=" ";var u;if(u=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"get_brand_color_class",e.autoesc)(o),r.set("color",u,!0),r.parent||(t.setVariable("color",u),t.addExport("color")),i+=" ",i+=" ",n.contextOrFrameLookup(t,r,"landing")){i+=" ";var l;l=n.memberLookup(o,"app_count",e.autoesc),r.set("max_apps",l,!0),r.parent||(t.setVariable("max_apps",l),t.addExport("max_apps")),i+=" "}else if(n.memberLookup(o,"app_count",e.autoesc)<6){i+=" ";var c;c=3,r.set("max_apps",c,!0),r.parent||(t.setVariable("max_apps",c),t.addExport("max_apps")),i+=" "}else{i+=" ";var p;p=6,r.set("max_apps",p,!0),r.parent||(t.setVariable("max_apps",p),t.addExport("max_apps")),i+=" "}i+='<section class="feed-brand feed-layout-',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"landing")?"list":n.memberLookup(o,"layout",e.autoesc),e.autoesc),i+=' multi-app-tile mkt-tile c"\ndata-brand-type="',i+=n.suppressValue(n.memberLookup(o,"type",e.autoesc),e.autoesc),i+='" data-tracking-slug="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">\n<div class="feed-tile-header-wrap">\n<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_brand",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),i+='"\nclass="fanchor">\n<h1 class="feed-tile-header" data-brand-color="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"color"),e.autoesc),i+='">',i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"get_brand_type",e.autoesc)(n.memberLookup(o,"type",e.autoesc),n.memberLookup(n.memberLookup(o,"apps",e.autoesc),"length",e.autoesc)),e.autoesc),i+='</h1>\n</a>\n</div>\n<ul class="app-list">',r=r.push();var f=n.memberLookup(o,"apps",e.autoesc);if(f)for(var m=0;m<f.length;m++){var g=f[m];r.set("app",g),r.set("loop.index0",m),i+=" ",(n.contextOrFrameLookup(t,r,"landing")||n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)<n.contextOrFrameLookup(t,r,"max_apps"))&&(i+=" ",i+=n.suppressValue(d(g,n.makeKeywordArgs({price_only:!n.contextOrFrameLookup(t,r,"landing")&&"grid"==n.memberLookup(o,"layout",e.autoesc),src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),i+=" "),i+=" "}return r=r.pop(),i+="</ul>",i+=" ",!n.contextOrFrameLookup(t,r,"landing")&&(n.memberLookup(o,"app_count",e.autoesc)>3&&n.memberLookup(o,"app_count",e.autoesc)<6||n.memberLookup(o,"app_count",e.autoesc)>6)&&(i+='<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_brand",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),i+='"\nclass="view-all">',i+=t.lookup("_")("View all apps"),i+="</a>"),i+="</section>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_brand"),t.setVariable("feed_brand",m),s+=" ";var g=n.makeMacro(["coll","landing"],[],function(o,a,i){r=r.push(),i=i||{},r.set("coll",o),r.set("landing",a);var s="";return s+=" ",n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"COLL_PROMO",e.autoesc)?(s+=" ",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_collection_promo")(o,a),e.autoesc),s+=" "):n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"COLL_LISTING",e.autoesc)&&(s+=" ",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_collection_listing")(o,a),e.autoesc),s+=" "),s+=" ",r=r.pop(),new n.SafeString(s)});t.addExport("feed_collection"),t.setVariable("feed_collection",g),s+=" ";var h=n.makeMacro(["coll","landing"],[],function(o,a,i){r=r.push(),i=i||{},r.set("coll",o),r.set("landing",a);var s="";s+=" ";var u;u=n.memberLookup(o,"background_color",e.autoesc),r.set("color",u,!0),r.parent||(t.setVariable("color",u),t.addExport("color")),s+=" ";var l;if(l=e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),r.set("desc",l,!0),r.parent||(t.setVariable("desc",l),t.addExport("desc")),s+='<a href="',s+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_collection",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:"collection-element"})),e.autoesc),s+='"\nclass="fanchor">\n<section class="feed-item feed-collection full ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"desc")&&!a?"mega":"",e.autoesc),s+=" ",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"desc")?"has-desc":"",e.autoesc),s+=" ",s+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc)?"has-background deferred-background":"",e.autoesc),s+=" ",s+=n.suppressValue(a?"collection-landing":"",e.autoesc),s+='"\ndata-tracking-slug="',s+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),s+='" ',n.memberLookup(o,"background_image",e.autoesc)?(s+=' style="background-image: url(',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),s+=')"\ndata-src="',s+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc),e.autoesc),s+='" '):(s+=' style="background-color: ',s+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".4"),e.autoesc),s+='" '),s+=">",!n.memberLookup(o,"background_image",e.autoesc)){s+='<ul class="app-icons">',r=r.push();var p=n.memberLookup(n.memberLookup(o,"apps",e.autoesc),"slice",e.autoesc)(0,3);if(p)for(var d=0;d<p.length;d++){var f=p[d];r.set("app",f),s+="<li>",s+=n.suppressValue(c(n.memberLookup(n.memberLookup(f,"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(f,"name",e.autoesc),f)),e.autoesc),s+="</li>"}r=r.pop(),s+="</ul>"}return s+='<div class="curve" style="background-color: ',s+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".6"),e.autoesc),s+='"></div>\n<div class="info" style="background-color: ',s+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.contextOrFrameLookup(t,r,"color"),".6"),e.autoesc),s+='">\n<h1 class="name">',s+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),s+="</h1>\n</div>",a||(s+='<div class="alt-curve" style="background-color: ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"color"),e.autoesc),s+='"></div>\n<div class="desc" style="background-color: ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"color"),e.autoesc),s+='">',s+=n.suppressValue(e.getFilter("safe").call(t,n.contextOrFrameLookup(t,r,"desc")),e.autoesc),s+="</div>"),s+="</section>\n</a>",r=r.pop(),new n.SafeString(s)});t.addExport("feed_collection_promo"),t.setVariable("feed_collection_promo",h),s+=" ";var v=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";if(i+=" ",i+=" ",n.contextOrFrameLookup(t,r,"landing")){i+=" ";var s;s=n.memberLookup(o,"app_count",e.autoesc),r.set("max_apps",s,!0),r.parent||(t.setVariable("max_apps",s),t.addExport("max_apps")),i+=" "}else if(n.memberLookup(o,"app_count",e.autoesc)<6){i+=" ";var u;u=3,r.set("max_apps",u,!0),r.parent||(t.setVariable("max_apps",u),t.addExport("max_apps")),i+=" "}else{i+=" ";var l;l=6,r.set("max_apps",l,!0),r.parent||(t.setVariable("max_apps",l),t.addExport("max_apps")),i+=" "}i+='<section class="feed-collection feed-collection-listing\nfeed-layout-',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"landing")?"list":"grid",e.autoesc),i+=' multi-app-tile mkt-tile c"\ndata-tracking-slug="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">\n<div class="feed-tile-header-wrap">\n<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_collection",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:"collection-element"})),e.autoesc),i+='"\nclass="fanchor">\n<h1 class="feed-tile-header">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),i+="</h1>\n</a>\n</div>",n.memberLookup(o,"description",e.autoesc)&&(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o)),e.autoesc),i+="</p>"),i+='<ul class="app-list">',r=r.push();var c=n.memberLookup(o,"apps",e.autoesc);if(c)for(var p=0;p<c.length;p++){var f=c[p];r.set("app",f),r.set("loop.index0",p),i+=" ",(n.contextOrFrameLookup(t,r,"landing")||n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)<n.contextOrFrameLookup(t,r,"max_apps"))&&(i+=" ",i+=n.suppressValue(d(f,n.makeKeywordArgs({price_only:!n.contextOrFrameLookup(t,r,"landing"),src:"collection-element"})),e.autoesc),i+=" "),i+=" "}return r=r.pop(),i+="</ul>",i+=" ",!n.contextOrFrameLookup(t,r,"landing")&&(n.memberLookup(o,"app_count",e.autoesc)>3&&n.memberLookup(o,"app_count",e.autoesc)<6||n.memberLookup(o,"app_count",e.autoesc)>6)&&(i+='<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_collection",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),i+='"\nclass="view-all">',i+=t.lookup("_")("View all apps"),i+="</a>"),i+="</section>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_collection_listing"),t.setVariable("feed_collection_listing",v),s+=" ";var b=n.makeMacro(["shelf","landing"],[],function(o,a,i){r=r.push(),i=i||{},r.set("shelf",o),r.set("landing",a);var s="";return s+='<a href="',s+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("feed/feed_shelf",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:"operator-shelf-element"})),e.autoesc),s+='"\nclass="op-shelf fanchor" data-tracking-slug="',s+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),s+='">\n<section class="feed-item shelf deferred-background ',s+=n.suppressValue(a?"shelf-landing":"",e.autoesc),s+='"\nstyle="background-image: url(',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),s+=')"\ndata-src="',s+=n.suppressValue(a?n.memberLookup(o,"background_image_landing",e.autoesc):n.memberLookup(o,"background_image",e.autoesc),e.autoesc),s+='"\ndata-carrier="',s+=n.suppressValue(n.memberLookup(o,"carrier",e.autoesc),e.autoesc),s+='"\ndata-region="',s+=n.suppressValue(n.memberLookup(o,"region",e.autoesc),e.autoesc),s+='">\n<div class="curve"></div>\n<div class="info">\n<h1 class="name">',s+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),s+="</h1>\n</div>\n</section>\n</a>",r=r.pop(),new n.SafeString(s)});t.addExport("feed_shelf"),t.setVariable("feed_shelf",b),s+=" ";var k=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";if(i+='<section class="main feed feed-landing collection-landing\ncollection-landing-',i+=n.suppressValue(n.memberLookup(o,"type",e.autoesc),e.autoesc),i+='">',n.memberLookup(o,"type",e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"COLL_LISTING",e.autoesc))i+=" ",i+=n.suppressValue(g(o,!0),e.autoesc),i+=" ";else{if(i+='<div class="feed" data-columns>\n<div class="detail-item header-block">',i+=n.suppressValue(g(o,!0),e.autoesc),i+=" ",n.memberLookup(o,"description",e.autoesc)&&(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),e.autoesc),i+="</p>"),i+="</div>",n.memberLookup(o,"apps",e.autoesc)){if(i+=" ",n.memberLookup(n.memberLookup(n.memberLookup(o,"apps",e.autoesc),0,e.autoesc),"group",e.autoesc)){i+=" ",r=r.push();var s=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"group_apps",e.autoesc)(n.memberLookup(o,"apps",e.autoesc));if(s)for(var u=0;u<s.length;u++){var c=s[u];r.set("group",c),i+='<div class="detail-item">\n<section class="feed-layout-grid multi-app-tile mkt-tile grouped c">\n<h1 class="feed-tile-header grouped">',i+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),i+='</h1>\n<ul class="app-list">',r=r.push();var p=n.memberLookup(c,"apps",e.autoesc);if(p)for(var f=0;f<p.length;f++){var m=p[f];r.set("app",m),i+=" ",i+=n.suppressValue(d(m,n.makeKeywordArgs({price_only:!n.contextOrFrameLookup(t,r,"landing")})),e.autoesc),i+=" "}r=r.pop(),i+="</ul>\n</section>\n</div>"}r=r.pop(),i+=" "}else{i+=" ",r=r.push();var h=n.memberLookup(o,"apps",e.autoesc);if(h)for(var v=0;v<h.length;v++){var b=h[v];r.set("app",b),i+='<div class="item result app c detail-item">',i+=n.suppressValue(l(b,n.makeKeywordArgs({src:"collection-element"})),e.autoesc),i+="</div>"}r=r.pop(),i+=" "}i+=" "}else i+=" ",i+=" ",i+=t.lookup("_")("Ruh roh! No apps here, Shaggy!"),i+=" ";i+="</div>"}return i+="</section>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_collection_landing"),t.setVariable("feed_collection_landing",k),s+=" ";var y=n.makeMacro(["shelf"],[],function(o,a){r=r.push(),a=a||{},r.set("shelf",o);var i="";if(i+='<section class="main feed feed-landing shelf-landing"\ndata-tracking-slug="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">\n<div class="detail-item header-block">',i+=n.suppressValue(b(o,!0),e.autoesc),i+=" ",n.memberLookup(o,"description",e.autoesc)&&(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),e.autoesc),i+="</p>"),i+='</div>\n<div class="feed" data-columns>',n.memberLookup(o,"apps",e.autoesc)){i+=" ",r=r.push();var s=n.memberLookup(o,"apps",e.autoesc);if(s)for(var u=0;u<s.length;u++){var c=s[u];r.set("app",c),i+='<div class="item result app c detail-item">',i+=n.suppressValue(l(c,n.makeKeywordArgs({src:"operator-shelf-element"})),e.autoesc),i+="</div>"}r=r.pop(),i+=" "}else i+=" ",i+=" ",i+=t.lookup("_")("Ruh roh! No apps here, Shaggy!"),i+=" ";return i+="</div>\n</section>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_shelf_landing"),t.setVariable("feed_shelf_landing",y),s+=" ";var _=n.makeMacro(["obj"],[],function(t,o){r=r.push(),o=o||{},r.set("obj",t);var a="";return a+=" ","app"==n.memberLookup(t,"item_type",e.autoesc)?(a+=" ",a+=n.suppressValue(f(n.memberLookup(t,"app",e.autoesc)),e.autoesc),a+=" "):"brand"==n.memberLookup(t,"item_type",e.autoesc)?(a+=" ",a+=n.suppressValue(m(n.memberLookup(t,"brand",e.autoesc)),e.autoesc),a+=" "):"collection"==n.memberLookup(t,"item_type",e.autoesc)?(a+=" ",a+=n.suppressValue(g(n.memberLookup(t,"collection",e.autoesc)),e.autoesc),a+=" "):"shelf"==n.memberLookup(t,"item_type",e.autoesc)&&(a+=" ",a+=n.suppressValue(b(n.memberLookup(t,"shelf",e.autoesc)),e.autoesc),a+=" "),a+=" ",r=r.pop(),new n.SafeString(a)});t.addExport("feed_item"),t.setVariable("feed_item",_),s+=" ",o(null,s)})})})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/forms.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro([],[],function(e){r=r.push(),e=e||{};var t="";return t+='<input type="text" name="sprout" value="potato" class="potato-captcha">\n<input type="text" name="tuber" class="potato-captcha">',r=r.pop(),new n.SafeString(t)});t.addExport("potato_captcha"),t.setVariable("potato_captcha",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/market_button.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["app","data_attrs","price_only"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("app",o),r.set("data_attrs",a),r.set("price_only",i);var u="";u+=" ",u+=" ";var l;if(l=n.contextOrFrameLookup(t,r,"has_installed")(n.memberLookup(o,"manifest_url",e.autoesc)),r.set("installed",l,!0),r.parent||(t.setVariable("installed",l),t.addExport("installed")),u+=" ",n.memberLookup(o,"payment_required",e.autoesc)&&!n.memberLookup(o,"price",e.autoesc)){u+=" ",u+=" ",u+=" ";var c;c=t.lookup("_")("Unavailable"),r.set("price",c,!0),r.parent||(t.setVariable("price",c),t.addExport("price")),u+=" "}else{u+=" ";var p;p=n.memberLookup(o,"price",e.autoesc)&&"0.00"!=n.memberLookup(o,"price",e.autoesc)?n.memberLookup(o,"price_locale",e.autoesc):t.lookup("_")("Free"),r.set("price",p,!0),r.parent||(t.setVariable("price",p),t.addExport("price")),u+=" "}return u+='<button class="button product install ',u+=n.suppressValue(n.contextOrFrameLookup(t,r,"installed")?"launch":"",e.autoesc),u+=" ",u+=n.suppressValue(n.memberLookup(o,"payment_required",e.autoesc)?"paid":"",e.autoesc),u+=" ",u+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_incompat")(o)?"incompatible":"",e.autoesc),u+='" ',u+=n.suppressValue(e.getFilter("make_data_attrs").call(t,a),e.autoesc),u+=" ",u+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_incompat")(o)?"disabled":"",e.autoesc),u+=' data-product="',u+=n.suppressValue(e.getFilter("json").call(t,o),e.autoesc),u+='">\n<em>',n.contextOrFrameLookup(t,r,"installed")&&!i?(u+=" ",u+=t.lookup("_")("Open"),u+=" "):!i&&n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_installed",e.autoesc)(n.memberLookup(o,"id",e.autoesc))||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_purchased",e.autoesc)(n.memberLookup(o,"id",e.autoesc))?(u+=" ",u+=t.lookup("_")("Install"),u+=" "):(u+=" ",u+=n.suppressValue(n.contextOrFrameLookup(t,r,"price"),e.autoesc),u+=" "),u+='</em>\n<span class="spin"></span>\n</button>',r=r.pop(),new n.SafeString(u)});t.addExport("market_button"),t.setVariable("market_button",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/market_tile.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_app_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("feed_app_tile"))return void o(new Error("cannot import 'feed_app_tile'"));var u=i.feed_app_tile;t.setVariable("feed_app_tile",u),s+=" ",e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var l=i.market_button;t.setVariable("market_button",l),s+=" ",e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var c=i.stars;t.setVariable("stars",c),s+=" ",s+=" ";var p=n.makeMacro(["app"],["feed_app","is_detail","tray","src"],function(o,a){r=r.push(),a=a||{},r.set("app",o),r.set("feed_app",a.hasOwnProperty("feed_app")?a.feed_app:n.contextOrFrameLookup(t,r,"None")),r.set("is_detail",a.hasOwnProperty("is_detail")?a.is_detail:!1),r.set("tray",a.hasOwnProperty("tray")?a.tray:!1),r.set("src",a.hasOwnProperty("src")?a.src:n.contextOrFrameLookup(t,r,"None"));var i="";i+=" ",i+=" ";var s;s=n.contextOrFrameLookup(t,r,"is_detail")?"div":"a",r.set("tag",s,!0),r.parent||(t.setVariable("tag",s),t.addExport("tag")),i+="<",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),i+=' class="product mkt-tile',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")?" feed-app":"",e.autoesc),i+='" ',n.contextOrFrameLookup(t,r,"is_detail")||(i+=' href="',i+=n.suppressValue(n.memberLookup(o,"url",e.autoesc)||e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(o,"slug",e.autoesc)]),n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),i+='"'),i+=' data-slug="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='"\ndata-id="',i+=n.suppressValue(n.memberLookup(o,"id",e.autoesc),e.autoesc),i+='" ',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"is_detail")?"":'itemscope itemtype="http://schema.org/SoftwareApplication"',e.autoesc),i+='>\n<div class="heading">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"deferred_icon")(n.memberLookup(n.memberLookup(o,"icons",e.autoesc),"64",e.autoesc)),e.autoesc),i+='<div class="info">\n<h3 itemprop="name">',i+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o),e.autoesc),i+="</h3>",n.memberLookup(o,"author",e.autoesc)&&(i+=" ",i+='<div class="author elliflow vital subdetail" itemprop="creator">',n.contextOrFrameLookup(t,r,"is_detail")?(i+='<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("search"),n.makeKeywordArgs({author:n.memberLookup(o,"author",e.autoesc)})),e.autoesc),i+='">',i+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),i+="</a>"):(i+=" ",i+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),i+=" "),i+="</div>"),i+='<div class="price vital">',i+=n.suppressValue(n.memberLookup(o,"payment_required",e.autoesc)?n.memberLookup(o,"price_locale",e.autoesc):t.lookup("_")("Free"),e.autoesc),i+="</div>",n.memberLookup(o,"slug",e.autoesc)&&(i+=" ",i+=n.suppressValue(l(o,n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(o,"manifest_url",e.autoesc),slug:n.memberLookup(o,"slug",e.autoesc)}})),e.autoesc),i+=" "),i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"is_detail")?"":n.contextOrFrameLookup(t,r,"rating_link")(),e.autoesc),i+="</div>\n</div>",n.contextOrFrameLookup(t,r,"is_detail")&&(i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating_link")(n.makeKeywordArgs({is_detail:!0})),e.autoesc),i+=" "),i+=" ",r=r.push();var c=n.contextOrFrameLookup(t,r,"app_incompat")(o);if(c)for(var p=0;p<c.length;p++){var d=c[p];r.set("notice",d),i+='<div class="bad-app">',i+=n.suppressValue(d,e.autoesc),i+="</div>"}return r=r.pop(),i+=" ",n.memberLookup(o,"is_offline",e.autoesc)&&(i+='<div class="works-offline hidden">',i+=t.lookup("_")("Works offline"),i+="</div>"),i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")?u(n.contextOrFrameLookup(t,r,"feed_app")):"",e.autoesc),i+="</",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),i+=">",n.contextOrFrameLookup(t,r,"tray")&&n.contextOrFrameLookup(t,r,"len")(n.memberLookup(o,"previews",e.autoesc))&&(i+='<div class="tray previews full ',i+=n.suppressValue(1==n.contextOrFrameLookup(t,r,"len")(n.memberLookup(o,"previews",e.autoesc))?"single":"",e.autoesc),i+='">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"preview_tray")(o,n.contextOrFrameLookup(t,r,"src")),e.autoesc),i+="</div>"),i+=" ",r=r.pop(),new n.SafeString(i)
});t.addExport("market_tile"),t.setVariable("market_tile",p),s+=" ";var d=n.makeMacro(["app","src"],[],function(o,a,i){r=r.push(),i=i||{},r.set("app",o),r.set("src",a);var s="";s+='<div class="slider shots">\n<ul class="content">',r=r.push();var u=n.memberLookup(o,"previews",e.autoesc);if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("preview",c),s+='<li itemscope itemtype="http://schema.org/ImageObject">\n<a class="screenshot thumbnail" href="',s+=n.suppressValue(n.memberLookup(c,"image_url",e.autoesc),e.autoesc),s+='">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"deferred_screenshot")(n.memberLookup(c,"thumbnail_url",e.autoesc)),e.autoesc),s+="</a>\n</li>"}r=r.pop(),s+='</ul>\n</div>\n<div class="dots">',r=r.push();var p=n.memberLookup(o,"previews",e.autoesc);if(p)for(var d=0;d<p.length;d++){var f=p[d];r.set("preview",f),s+='<b class="dot"></b>'}return r=r.pop(),s+="</div>",r=r.pop(),new n.SafeString(s)});t.addExport("preview_tray"),t.setVariable("preview_tray",d),s+=" ";var f=n.makeMacro(["src","alt"],[],function(o,a,i){r=r.push(),i=i||{},r.set("src",o),r.set("alt",a);var s="";return s+=" ",n.contextOrFrameLookup(t,r,"imgAlreadyDeferred")(o)?(s+='<img class="icon" src="',s+=n.suppressValue(o,e.autoesc),s+='" title="',s+=n.suppressValue(a||"",e.autoesc),s+='" alt="',s+=n.suppressValue(a||"",e.autoesc),s+='"\nheight="64" width="64" itemprop="image">'):(s+=" ",s+='<img class="icon deferred" src="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),s+='"\ndata-src="',s+=n.suppressValue(o,e.autoesc),s+='" title="',s+=n.suppressValue(a||"",e.autoesc),s+='" alt="',s+=n.suppressValue(a||"",e.autoesc),s+='"\nheight="60" width="60" itemprop="image">'),s+=" ",r=r.pop(),new n.SafeString(s)});t.addExport("deferred_icon"),t.setVariable("deferred_icon",f),s+=" ";var m=n.makeMacro(["src"],[],function(o,a){r=r.push(),a=a||{},r.set("src",o);var i="";return i+=" ",n.contextOrFrameLookup(t,r,"imgAlreadyDeferred")(o)?(i+='<img src="',i+=n.suppressValue(o,e.autoesc),i+='" alt="',i+=t.lookup("_")("{app_name} screenshot",n.makeKeywordArgs({app_name:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"name",e.autoesc)})),i+='"\ndraggable="false" itemprop="contentURL">'):(i+=" ",i+='<img class="deferred" src="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+='"\ndata-src="',i+=n.suppressValue(o,e.autoesc),i+='" alt="',i+=t.lookup("_")("{app_name} screenshot",n.makeKeywordArgs({app_name:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"name",e.autoesc)})),i+='"\ndraggable="false" itemprop="contentURL">'),i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("deferred_screenshot"),t.setVariable("deferred_screenshot",m),s+=" ";var g=n.makeMacro([],["is_detail"],function(o){r=r.push(),o=o||{},r.set("is_detail",o.hasOwnProperty("is_detail")?o.is_detail:!1);var a="";return a+='<div class="rating vital',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)?"":" unrated",e.autoesc),a+='" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">',a+=" ",n.contextOrFrameLookup(t,r,"is_detail")?(a+='<a href="',a+=t.lookup("url")("app/ratings",[n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"slug",e.autoesc)]),a+='" class="rating-link">',a+=n.suppressValue(c(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"average",e.autoesc)),e.autoesc),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)?(a+='<span class="cnt short">',a+=t.lookup("_")("({n})",n.makeKeywordArgs({n:'<span itemprop="reviewCount">'+e.getFilter("numberfmt").call(t,n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc))+"</span>"})),a+='</span>\n<span class="cnt long">',a+=n.suppressValue(e.getFilter("numberfmt").call(t,n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)),e.autoesc),a+=" ",a+=t.lookup("_plural")("Review","Reviews",n.makeKeywordArgs({n:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)})),a+="</span>"):(a+=" ",a+='<span class="cnt short">',a+=t.lookup("_")("(0)"),a+='</span>\n<span class="cnt long">',a+=t.lookup("_")("Not yet reviewed"),a+="</span>"),a+="</a>"):(a+=" ",a+=" ",a+=n.suppressValue(c(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"average",e.autoesc)),e.autoesc),a+=" "),a+="</div>",r=r.pop(),new n.SafeString(a)});t.addExport("rating_link"),t.setVariable("rating_link",g),s+=" ",o(null,s)})})})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/more_button.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["next_page_url","li_classes"],[],function(o,a,i){r=r.push(),i=i||{},r.set("next_page_url",o),r.set("li_classes",a);var s="";return s+='<li class="loadmore ',s+=n.suppressValue(a,e.autoesc),s+='">\n<button class="button support" data-url="',s+=n.suppressValue(e.getFilter("safe").call(t,n.contextOrFrameLookup(t,r,"apiHost")(o)+o),e.autoesc),s+='">',s+=t.lookup("_")("More"),s+='</button>\n<div class="spinner alt btn-replace"></div>\n</li>',r=r.pop(),new n.SafeString(s)});t.addExport("more_button"),t.setVariable("more_button",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/rating.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u=n.makeMacro(["this"],["detailpage","current_version"],function(o,a){r=r.push(),a=a||{},r.set("this",o),r.set("detailpage",a.hasOwnProperty("detailpage")?a.detailpage:!1),r.set("current_version",a.hasOwnProperty("current_version")?a.current_version:n.contextOrFrameLookup(t,r,"None"));var i="";return i+='<li data-report-uri="',i+=n.suppressValue(n.memberLookup(o,"report_spam",e.autoesc),e.autoesc),i+='" data-rating="',i+=n.suppressValue(n.memberLookup(o,"rating",e.autoesc),e.autoesc),i+='"\nclass="review',i+=n.suppressValue(n.memberLookup(o,"is_flagged",e.autoesc)?" flagged":"",e.autoesc),i+=' c"\nitemprop="review" itemscope itemtype="http://schema.org/Review">\n<div class="review-inner">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(n.memberLookup(o,"rating",e.autoesc),n.makeKeywordArgs({detailpage:n.contextOrFrameLookup(t,r,"detailpage"),aggregate:!1})),e.autoesc),i+='<span class="byline">',i+=t.lookup("_")("by {author}",n.makeKeywordArgs({author:'<strong itemprop="author">'+n.contextOrFrameLookup(t,r,"escape")(n.memberLookup(n.memberLookup(o,"user",e.autoesc),"display_name",e.autoesc))+"</strong>"})),i+=" ",n.memberLookup(o,"version",e.autoesc)&&n.contextOrFrameLookup(t,r,"current_version")&&n.contextOrFrameLookup(t,r,"current_version")!=n.memberLookup(n.memberLookup(o,"version",e.autoesc),"version",e.autoesc)&&(i+=" ",i+=t.lookup("_")("for previous version {version}",n.makeKeywordArgs({version:n.memberLookup(n.memberLookup(o,"version",e.autoesc),"version",e.autoesc)})),i+=" "),i+='</span>\n<div class="body" itemprop="reviewBody">',i+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("escape").call(t,n.memberLookup(o,"body",e.autoesc))),e.autoesc),i+="</div>",n.contextOrFrameLookup(t,r,"detailpage")||(i+='<ul class="actions only-if-logged-in">',n.memberLookup(o,"is_flagged",e.autoesc)&&(i+='<li class="flagged">',i+=t.lookup("_")("Flagged for review"),i+="</li>"),i+=" ",(n.memberLookup(o,"is_author",e.autoesc)||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer"))&&(i+='<li><a class="edit" data-action="edit"\nhref="',i+=t.lookup("url")("app/ratings/edit",[n.contextOrFrameLookup(t,r,"slug")]),i+='" ',i+=' data-review-id="',i+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(o,"resource_uri",e.autoesc),"split",e.autoesc)("/"),5,e.autoesc),e.autoesc),i+='">',i+=t.lookup("_")("Edit"),i+='</a></li>\n<li><a class="delete post" data-action="delete" href="#"\ndata-href="',i+=n.suppressValue(n.memberLookup(o,"resource_uri",e.autoesc),e.autoesc),i+='"\ndata-app="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),i+='">',i+=t.lookup("_")("Delete"),i+="</a></li>"),i+=" ",n.memberLookup(o,"is_author",e.autoesc)||n.memberLookup(o,"has_flagged",e.autoesc)||(i+='<li><a class="flag post" data-action="report" href="#">',i+=t.lookup("_")("Report"),i+="</a></li>"),i+='</ul>\n<time itemprop="datePublished">',i+=n.suppressValue(e.getFilter("datetime").call(t,n.memberLookup(o,"created",e.autoesc)),e.autoesc),i+="</time>"),i+="</div>\n</li>",r=r.pop(),new n.SafeString(i)});t.addExport("rating"),t.setVariable("rating",u),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/stars.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["rating"],["detailpage","aggregate"],function(o,a){r=r.push(),a=a||{},r.set("rating",o),r.set("detailpage",a.hasOwnProperty("detailpage")?a.detailpage:!1),r.set("aggregate",a.hasOwnProperty("aggregate")?a.aggregate:!0);var i="";i+=" ",o=e.getFilter("round").call(t,o),r.set("rating",o,!0),r.parent||(t.setVariable("rating",o),t.addExport("rating")),i+=" ";var s;return s=n.contextOrFrameLookup(t,r,"aggregate")?"ratingValue":"reviewRating",r.set("rating_itemprop",s,!0),r.parent||(t.setVariable("rating_itemprop",s),t.addExport("rating_itemprop")),i+='<meta itemprop="worstRating" content="1">\n<span class="stars',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"detailpage")?" large":"",e.autoesc),i+=" stars-",i+=n.suppressValue(o,e.autoesc),i+='" title="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),i+='">',i+=t.lookup("_")("Rated {stars} out of {maxstars} stars",n.makeKeywordArgs({stars:'<span itemprop="'+n.contextOrFrameLookup(t,r,"rating_itemprop")+'">'+o+"</span>",maxstars:'<span itemprop="bestRating">5</span>'})),i+="</span>",r=r.pop(),new n.SafeString(i)});t.addExport("stars"),t.setVariable("stars",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["commonplace/tests.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="tests prose">\n<h2>Unit Tests</h2>\n<progress value="0"></progress>\n<table>\n<tr>\n<th>Started</th>\n<th class="passed">Passed</th>\n<th class="failed">Failed</th>\n</tr>\n<tr>\n<td id="c_started">0</td>\n<td class="passed" id="c_passed">0</td>\n<td class="failed" id="c_failed">0</td>\n</tr>\n</table>\n<ol class="tests"></ol>\n</section>\n<style>\n.tests {\nmargin: 0 auto;\npadding: 0 20px;\nwidth: 690px;\n}\n  progress, td {\nmin-width: 150px;\n}\n  progress {\nmargin: 15px 30px 0 0;\n}\n  table {\nmargin-top: 15px;\n}\n  th, td {\ncolor: goldenrod;\npadding: 0 30px;\n}\n  th:first-child, td:first-child {\npadding-left: 0;\n}\n  th {\ntext-align: left;\n}\n  .passed {\ncolor: green;\n}\n  .failed {\ncolor: red;\n}\n  .tests span {\ncolor: #fff;\ndisplay: inline-block;\nfont-size: 11px;\nmargin-right: 5px;\nmin-width: 50px;\npadding: 2px 5px;\ntext-align: center;\n}\n</style>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/cache.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/l10n.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/navigation.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/models.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/requests.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/site_config.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/storage.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/urls.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/user.js"></script>\n<script type="text/javascript" src="/media/js/lib/marketplace-core-modules/tests/utils.js"></script>',o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["detail/abuse.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/forms.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<div class="main report-abuse modal c">\n<div>\n<div class="secondary-header">\n<h2>',s+=t.lookup("_")("Report Abuse"),s+='</h2>\n<a href="#" class="close btn-cancel">',s+=t.lookup("_")("Close"),s+='</a>\n</div>\n<form method="post" class="abuse-form form-modal">\n<p class="brform simple-field c">\n<textarea name="text" required></textarea>\n</p>\n<p class="form-footer">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"potato_captcha")(),e.autoesc),s+='<input type="hidden" name="app" value="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='">\n<button class="button" type="submit">',s+=t.lookup("_")("Send Report"),s+="</button>\n</p>\n</form>\n</div>\n</div>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["detail/content_ratings.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),pluck:"content_ratings"}),function(o){o||(o=function(e){if(e)throw e});var a="";if(a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc)){if(a+='<div class="content-ratings-wrapper main infobox c ',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),a+='">\n<div class="infobox-wrapper c">',a+="<h3>",a+=t.lookup("_")("Content Rating"),a+='</h3>\n<div class="content-ratings-left">\n<div class="content-rating c">',a+='<img data-src="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"rating_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='"\nclass="icon icon-body-',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),a+=' deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='">\n</div>',a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc)&&!n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"descriptor_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc)){a+='<ul class="content-descriptors text">',r=r.push();var i=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc);if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("descriptor_text",u),a+="<li>",a+=n.suppressValue(u,e.autoesc),a+="</li>"}r=r.pop(),a+="</ul>"}else a+=" ",a+='<span class="rating-description">',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+="</span>";a+='</div>\n<div class="content-ratings-right">';var l;if(l=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"descriptor_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("desc_icons",l,!0),r.parent||(t.setVariable("desc_icons",l),t.addExport("desc_icons")),a+=" ",n.contextOrFrameLookup(t,r,"desc_icons")){a+=" ",a+='<div class="content-descriptors icons">',r=r.push();var c=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors",e.autoesc);if(c)for(var p=0;p<c.length;p++){var d=c[p];r.set("descriptor_key",d),r.set("loop.index0",p),a+=" ";var f;f=n.memberLookup(n.contextOrFrameLookup(t,r,"desc_icons"),d,e.autoesc),r.set("icon_src",f,!0),r.parent||(t.setVariable("icon_src",f),t.addExport("icon_src")),a+=" ",n.contextOrFrameLookup(t,r,"icon_src")&&(a+='<img data-src="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"icon_src"),e.autoesc),a+='" class="icon deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='">'),a+=" "}r=r.pop(),a+="</div>"}else if(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives",e.autoesc)){a+='<div class="interactive-elements ',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"interactive_icons")?"icons":"text",e.autoesc),a+='">';var m;if(m=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"interactive_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("interactive_icons",m,!0),r.parent||(t.setVariable("interactive_icons",m),t.addExport("interactive_icons")),a+=" ",n.contextOrFrameLookup(t,r,"interactive_icons")){a+=" ",r=r.push();var g=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives",e.autoesc);if(g)for(var h=0;h<g.length;h++){var v=g[h];r.set("interactive_key",v),r.set("loop.index0",h),a+=" ",a+=" ";var b;b=n.memberLookup(n.contextOrFrameLookup(t,r,"interactive_icons"),v,e.autoesc),r.set("icon_src",b,!0),r.parent||(t.setVariable("icon_src",b),t.addExport("icon_src")),a+=" ",n.contextOrFrameLookup(t,r,"icon_src")&&(a+='<img data-src="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"icon_src"),e.autoesc),a+='" class="icon deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='">'),a+=" "}r=r.pop(),a+=" "}else{a+=" ",r=r.push();var k=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc);if(k)for(var y=0;y<k.length;y++){var _=k[y];r.set("interactive_text",_),a+=" ",a+="<p>",a+=n.suppressValue(_,e.autoesc),a+="</p>"}r=r.pop(),a+=" "}a+="</div>"}a+='</div>\n</div>\n<div class="full">';var w;w=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"detail_links",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("rating_detail_link",w,!0),r.parent||(t.setVariable("rating_detail_link",w),t.addExport("rating_detail_link")),a+=" ",n.contextOrFrameLookup(t,r,"rating_detail_link")&&(a+='<a href="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating_detail_link"),e.autoesc),a+='" class="button support" target="_blank">',a+=" ",a+=t.lookup("_")("Content Rating Details"),a+="</a>"),a+="</div>\n</div>"}return a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["detail/main.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/emaillink.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/rating.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u;u=n.contextOrFrameLookup(t,r,"api")("app",[n.contextOrFrameLookup(t,r,"slug")]),r.set("endpoint",u,!0),r.parent||(t.setVariable("endpoint",u),t.addExport("endpoint")),s+='<div class="detail" itemscope itemtype="http://schema.org/SoftwareApplication">\n<section class="main product-details listing expanded c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug"),id:"app-data"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"market_tile")(n.contextOrFrameLookup(t,r,"this"),n.makeKeywordArgs({is_detail:!0,tray:!0,src:"detail"})),e.autoesc),a+=" ",o(null,a),a},function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="product mkt-tile">\n<img class="icon deferred" src="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='" alt=""\ndata-src="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"icons",e.autoesc),"64",e.autoesc),e.autoesc),a+='" height="64" width="64" itemprop="image">\n<div class="info">\n<h3>',a+=t.lookup("_")("Loading..."),a+='</h3>\n<div class="price vital">',a+=t.lookup("_")("Loading..."),a+='</div>\n<div class="rating vital unrated">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(0),e.autoesc),a+='</div>\n</div>\n</div>\n<div class="tray previews full"></div>',o(null,a),a},null,function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<div class="detailed-error">\n<h2>',o+=t.lookup("_")("Oh no!"),o+="</h2>",403==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The app requested is not public."),o+="</p>"):404==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The app requested was not found."),o+="</p>"):451==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The app requested is not available for your region."),o+="</p>\n<p>",o+=t.lookup("_")("You may wish to contact the developer if you would like to see a version of this app for your region."),o+="</p>"):(o+="<p>",o+=t.lookup("_")("A server error occurred. Please try again later."),o+="</p>"),o+="</div>",e(null,o),o}),!0&&e.autoesc),s+='</section>\n<section class="main" id="installed">\n<div>\n<p class="installed">',s+=t.lookup("_")("Installed!"),s+='</p>\n<p class="how mac">',s+=t.lookup("_")("Launch this app from your <b>Applications</b> directory."),s+='</p>\n<p class="how windows">',s+=t.lookup("_")("Launch this app from your <b>Windows desktop</b> or <b>Start &#9658; All Programs</b>."),s+='</p>\n<p class="how linux">',s+=t.lookup("_")("Launch this app from your <b>dash</b>, <b>Application picker</b>, or <b>Applications menu</b>."),s+='</p>\n</div>\n</section>\n<div id="purchased-message"></div>',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"banner_regions",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"banner_message",e.autoesc)&&-1!=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"banner_regions",e.autoesc),"indexOf",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"user_helpers"),"region",e.autoesc)())&&(a+='<section class="main infobox regionbanner">\n<div>',a+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"banner_message",e.autoesc),n.contextOrFrameLookup(t,r,"this"))),e.autoesc),a+="</div>\n</section>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"release_notes",e.autoesc)&&(a+='<section class="main blurbs prose infobox releasenotes">\n<div>\n<h3>',a+=t.lookup("_")("Updates"),a+='</h3>\n<div class="truncated-wrapper truncated">\n<p class="releasenotes">',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"release_notes",e.autoesc),n.contextOrFrameLookup(t,r,"this"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="show-toggle" data-toggle-text="',a+=t.lookup("_")("Less&hellip;"),a+='">',a+=t.lookup("_")("More&hellip;"),a+="</a>\n</div>\n</section>"),a+=" ",a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main blurbs prose infobox">\n<div>\n<h3>',a+=t.lookup("_")("Description"),a+='</h3>\n<div class="truncated-wrapper description-wrapper truncated">\n<p class="description" itemprop="description">',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"description",e.autoesc),n.contextOrFrameLookup(t,r,"this"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="show-toggle" data-toggle-text="',a+=t.lookup("_")("Less&hellip;"),a+='">',a+=t.lookup("_")("More&hellip;"),a+="</a>",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"is_packaged",e.autoesc)&&(a+="<h3>",a+=t.lookup("_")("Version"),a+='</h3>\n<div class="package-version">',a+=t.lookup("_")("Latest version: {version}",n.makeKeywordArgs({version:n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"current_version",e.autoesc)})),a+="</div>"),a+="</div>\n</section>",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_developed",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"id",e.autoesc))||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer"))&&(a+='<section class="main actions infobox">\n<div>\n<p class="split"><a href="/developers/app/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='/edit" class="button manage action" rel="external">',a+=t.lookup("_")("Edit Listing"),a+="</a></p>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(a+='<p class="split"><a href="/reviewers/apps/review/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='" class="button action reviewer" rel="external">',a+=n.suppressValue(t.lookup("_")(2==n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"status",e.autoesc)||13==n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"status",e.autoesc)?"Approve / Reject":"Review History"),e.autoesc),a+="</a></p>"),a+="</div>\n</section>"),a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+='<section class="main reviews-wrapper c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"apiParams")("reviews",{app:n.contextOrFrameLookup(t,r,"slug")}),id:"ratings"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<div class="reviews">\n<h3>',a+=t.lookup("_")("Reviews"),a+="</h3>";var i;if(i=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"user",e.autoesc),"can_rate",e.autoesc)||!n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()||n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"user",e.autoesc),"has_rated",e.autoesc),r.set("has_second_button",i,!0),r.parent||(t.setVariable("has_second_button",i),t.addExport("has_second_button")),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"meta",e.autoesc),"total_count",e.autoesc)){a+='<ul class="ratings-placeholder-inner">',r=r.push();var s=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"objects",e.autoesc),"slice",e.autoesc)(0,2);if(s)for(var u=0;u<s.length;u++){var l=s[u];r.set("rat",l),a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating")(l,n.makeKeywordArgs({detailpage:!0,current_version:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"info",e.autoesc),"current_version",e.autoesc)})),e.autoesc),a+=" "}r=r.pop(),a+='</ul>\n<div class="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"has_second_button")?"split":"full",e.autoesc),a+='">\n<a class="button support average-rating" href="',a+=t.lookup("url")("app/ratings",[n.contextOrFrameLookup(t,r,"slug")]),a+='">\n<span>',a+=n.suppressValue(e.getFilter("numberfmt").call(t,n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"meta",e.autoesc),"total_count",e.autoesc)),e.autoesc),a+=" ",a+=t.lookup("_plural")("Review","Reviews",n.makeKeywordArgs({n:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"meta",e.autoesc),"total_count",e.autoesc)})),a+="</span>",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"info",e.autoesc),"average",e.autoesc),n.makeKeywordArgs({detailpage:!0})),e.autoesc),a+="</a>\n</div>"}else a+='<p class="not-rated">',a+=t.lookup("_")("App not yet reviewed"),a+="</p>";return a+=" ",n.contextOrFrameLookup(t,r,"has_second_button")&&(a+='<div class="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"objects",e.autoesc),"length",e.autoesc)?"split":" full",e.autoesc),a+='">',n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()&&n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"user",e.autoesc),"has_rated",e.autoesc)?(a+='<a class="button write-review support" id="edit-review" href="',a+=t.lookup("url")("app/ratings/edit",[n.contextOrFrameLookup(t,r,"slug")]),a+='"\ndata-app="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=t.lookup("_")("Edit Your Review"),a+="</a>"):(a+='<a class="button write-review support" id="add-review" href="',a+=t.lookup("url")("app/ratings/add",[n.contextOrFrameLookup(t,r,"slug")]),a+='"\ndata-app="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=n.suppressValue(t.lookup("_")(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?"Write a Review":"Sign in to Review"),e.autoesc),a+="</a>"),a+="</div>"),a+="</div>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt padded"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="</section>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e
});var a="";return a+='<section class="main infobox support c">\n<div>\n<ul class="c">',n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_email",e.autoesc)&&(a+='<li class="support-email" data-tracking="Support email">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"emaillink")(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_email",e.autoesc),t.lookup("_")("Support Email"),n.makeKeywordArgs({"class":"button support"})),e.autoesc),a+="</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_url",e.autoesc)&&(a+='<li class="support-url" data-tracking="Support site">\n<a class="button support" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_url",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Support Site"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"homepage",e.autoesc)&&(a+='<li class="homepage" data-tracking="Homepage">\n<a class="button support" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"homepage",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Homepage"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"privacy_policy",e.autoesc)&&(a+='<li class="privacy-policy" data-tracking="Privacy policy">\n<a class="button support" href="',a+=t.lookup("url")("app/privacy",[n.contextOrFrameLookup(t,r,"slug")]),a+='">',a+=t.lookup("_")("Privacy Policy"),a+="</a>\n</li>"),a+=" ",(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"public_stats",e.autoesc)||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_developed",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"id",e.autoesc)))&&(a+='<li class="statistics" data-tracking="Statistics">\n<a class="button support view-stats" rel="external" href="/statistics/app/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=t.lookup("_")("Statistics"),a+="</a>\n</li>"),a+='<li class="abuse" data-tracking="Report abuse">\n<a class="button support" href="',a+=t.lookup("url")("app/abuse",[n.contextOrFrameLookup(t,r,"slug")]),a+='">',a+=t.lookup("_")("Report Abuse"),a+="</a>\n</li>\n</ul>\n</div>\n</section>",n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"payments_enabled",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"upsell_enabled",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc)&&(a+='<section class="main upsell-wrapper c">\n<div>\n<a class="upsell" href="',a+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"app_slug",e.autoesc)]),n.makeKeywordArgs({src:"mkt-detail-upsell"})),e.autoesc),a+='">\n<img class="icon" src="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"icon_url",e.autoesc),e.autoesc),a+='">\n<div>\n<span class="avail">',a+=t.lookup("_")("Premium version available"),a+='</span>\n<span class="name">',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"name",e.autoesc),e.autoesc),a+="</span>\n</div>\n</a>\n</div>\n</section>"),a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",e.getTemplate("detail/content_ratings.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,s+="</div>",void o(null,s))})})})}))})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["detail/privacy.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="app-privacy-policy main full c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("app/privacy",[n.contextOrFrameLookup(t,r,"slug")])}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<header class="secondary-header c">\n<h2>',a+=t.lookup("_")("Privacy Policy"),a+='</h2>\n</header>\n<a href="',a+=t.lookup("url")("app",[n.contextOrFrameLookup(t,r,"slug")]),a+='" class="back-to-app">',a+=t.lookup("_")("Back to app"),a+='</a>\n<article class="island prose">',a+=n.suppressValue(e.getFilter("nl2br").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"privacy_policy",e.autoesc)),e.autoesc),a+="</article>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var r="";return r+="<article>",r+=t.lookup("_")("Loading Privacy Policy..."),r+="</article>",e(null,r),r},null,null),!0&&e.autoesc),s+="</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["detail/receipt.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/emaillink.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u;u=n.contextOrFrameLookup(t,r,"api")("app",[n.contextOrFrameLookup(t,r,"slug")]),r.set("endpoint",u,!0),r.parent||(t.setVariable("endpoint",u),t.addExport("endpoint")),s+='<div class="detail">\n<section class="main">\n<header class="secondary-header">\n<h2 class="leading">',s+=t.lookup("_")("Thank you for purchasing"),s+='</h2>\n</header>\n</section>\n<section class="main product-details listing c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug"),id:"app-data"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"market_tile")(n.contextOrFrameLookup(t,r,"this")),e.autoesc),a+=" ",o(null,a),a},function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="product mkt-tile">\n<div class="info">\n<h3>',a+=t.lookup("_")("Loading..."),a+='</h3>\n<div class="price vital">',a+=t.lookup("_")("Loading..."),a+='</div>\n<div class="rating vital unrated">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(0),e.autoesc),a+='</div>\n</div>\n</div>\n<div class="tray previews full"></div>',o(null,a),a},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("The page you were looking for was not found."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+="</section>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main infobox support c">\n<div>\n<ul class="c">',n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_email",e.autoesc)&&(a+='<li class="support-email" data-tracking="Support email">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"emaillink")(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_email",e.autoesc),t.lookup("_")("Support Email"),n.makeKeywordArgs({"class":"button support"})),e.autoesc),a+="</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_url",e.autoesc)&&(a+='<li class="support-url" data-tracking="Support site">\n<a class="button support" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"support_url",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Support Site"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"homepage",e.autoesc)&&(a+='<li class="homepage" data-tracking="Homepage">\n<a class="button support" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"homepage",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Homepage"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"privacy_policy",e.autoesc)&&(a+='<li class="privacy-policy" data-tracking="Privacy policy">\n<a class="button support" href="',a+=t.lookup("url")("app/privacy",[n.contextOrFrameLookup(t,r,"slug")]),a+='">',a+=t.lookup("_")("Privacy Policy"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"public_stats",e.autoesc)&&(a+='<li class="statistics" data-tracking="Statistics">\n<a class="button support view-stats" rel="external" href="',a+=t.lookup("url")("app",[n.contextOrFrameLookup(t,r,"slug")]),a+='/statistics">',a+=t.lookup("_")("Statistics"),a+="</a>\n</li>"),a+='<li class="abuse" data-tracking="Report abuse">\n<a class="button support" href="',a+=t.lookup("url")("app/abuse",[n.contextOrFrameLookup(t,r,"slug")]),a+='">',a+=t.lookup("_")("Report Abuse"),a+="</a>\n</li>\n</ul>\n</div>\n</section>",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="</div>",o(null,s)})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/404.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main infobox">\n<div>\n<h2>',s+=t.lookup("_")("Oh no!"),s+="</h2>\n<p>",s+=t.lookup("_")("The page you were looking for was not found."),s+="</p>\n</div>\n</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/date-error.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="error-overlay" class="system-date">\n<div class="error-message">\n<h1>',s+=t.lookup("_")("System Date Incorrect"),s+="</h1>\n<p>",s+=t.lookup("_")("Sorry, your device clock appears to be set incorrectly."),s+="</p>\n<p>",s+=t.lookup("_")("Please set today's date and time in your device settings to access the Marketplace."),s+='</p>\n<button class="global button try-again">',s+=t.lookup("_")("Try again"),s+="</button>\n</div>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/fragment.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<span class="fragment-error">\n<b>',s+=t.lookup("_")("Oh no!"),s+="</b>",s+=t.lookup("_")("An error occurred."),s+="</span>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/offline-error.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="error-overlay" class="offline">\n<div class="error-message">\n<h1>',s+=t.lookup("_")("Currently Offline"),s+="</h1>\n<p>",s+=t.lookup("_")("Sorry, you need to be online to access the Marketplace."),s+='</p>\n<button class="global button try-again">',s+=t.lookup("_")("Try again"),s+="</button>\n</div>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/pagination.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<li class="pagination-error loadmore">\n<span class="error-text">',s+=t.lookup("_")("Error loading more"),s+='</span>\n<button class="button" data-url="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_url"),e.autoesc),s+='">',s+=t.lookup("_")("Try Again"),s+='</button>\n<div class="spinner alt btn-replace"></div>\n</li>',o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_app.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-app",[n.contextOrFrameLookup(t,r,"slug")]),id:"feed_app"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main feed feed-landing feed-app-landing">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")(n.contextOrFrameLookup(t,r,"this")),e.autoesc),a+="</section>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that app. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_brand.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-brand",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"brand"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main feed feed-landing brand-landing">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_brand")(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+="</section>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that editorial brand. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_collection.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-collection",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"feed-collection"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_collection_landing")(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that collection. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_item.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ",e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<div class="feed-item-item">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_item")(n.contextOrFrameLookup(t,r,"item")),e.autoesc),s+="</div>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_shelf.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-shelf",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"shelf"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_shelf_landing")(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that operator shelf. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/edit.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),id:"main"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+=" ",a+=" ";var i;i=n.contextOrFrameLookup(t,r,"normalize")(n.contextOrFrameLookup(t,r,"this")),r.set("obj",i,!0),r.parent||(t.setVariable("obj",i),t.addExport("obj")),a+='<div class="main compose-review" data-slug="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">\n<header class="secondary-header">\n<h2>',a+=t.lookup("_")("Edit Review"),a+='</h2>\n</header>\n<form class="edit-review-form form-modal" data-uri="',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"obj"),"resource_uri",e.autoesc),e.autoesc),a+='" data-slug="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">\n<p class="simple-field rating c">\n<label for="id_rating">',a+=t.lookup("_")("Rate:"),a+='</label>\n<select name="rating" id="id_rating" required>',r=r.push();var s=n.contextOrFrameLookup(t,r,"range")(1,6);if(s)for(var u=0;u<s.length;u++){var l=s[u];r.set("i",l),a+='<option value="',a+=n.suppressValue(l,e.autoesc),a+='"',a+=n.suppressValue(l==n.memberLookup(n.contextOrFrameLookup(t,r,"obj"),"rating",e.autoesc)?" selected":"",e.autoesc),a+=">",a+=n.suppressValue(l,e.autoesc),a+="</option>"}return r=r.pop(),a+='</select>\n</p>\n<p>\n<textarea id="id_body" rows="2" cols="40" name="body" required maxlength="150">',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"obj"),"body",e.autoesc),e.autoesc),a+='</textarea>\n<div class="char-count" data-for="id_body"></div>\n</p>\n<footer class="form-footer buttons c only-logged-in">\n<div class="two-up"><a href="#" class="cancel button">',a+=t.lookup("_")("Cancel"),a+='</a></div>\n<div class="two-up"><button class="button" type="submit">',a+=t.lookup("_")("Submit"),a+='</button></div>\n</footer>\n<footer class="form-footer c only-logged-out">\n<p>',a+=t.lookup("_")("Only logged in users may edit reviews."),a+="</p>\n</footer>\n</form>\n</div>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt"></p>',e(null,t),t},null,null),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/main.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/rating.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("Reviews"),s+='</h2>\n</header>\n<a href="',s+=t.lookup("url")("app",[n.contextOrFrameLookup(t,r,"slug")]),s+='" class="back-to-app">',s+=t.lookup("_")("Back to app"),s+="</a>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"apiParams")("reviews",{app:n.contextOrFrameLookup(t,r,"slug")}),pluck:"objects",id:"ratings",paginate:".ratings-placeholder-inner"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<p id="add-review" class="primary-button">',(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"user",e.autoesc),"can_rate",e.autoesc)||!n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()||n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"user",e.autoesc),"has_rated",e.autoesc))&&(a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()&&n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"user",e.autoesc),"has_rated",e.autoesc)?(a+='<a class="button primo write-review" id="edit-review" href="',a+=t.lookup("url")("app/ratings/edit",[n.contextOrFrameLookup(t,r,"slug")]),a+='"\ndata-app="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=t.lookup("_")("Edit Review"),a+="</a>"):(a+='<a class="button primo write-review" id="write-review" href="',a+=t.lookup("url")("app/ratings/add",[n.contextOrFrameLookup(t,r,"slug")]),a+='"\ndata-app="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=n.suppressValue(t.lookup("_")(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?"Write a Review":"Sign in to Review"),e.autoesc),a+="</a>"),a+=" "),a+='</p>\n<div class="reviews reviews-listing">\n<ul class="ratings-placeholder-inner">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("rat",u),a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating")(u,n.makeKeywordArgs({current_version:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"info",e.autoesc),"current_version",e.autoesc)})),e.autoesc),a+=" "}return r=r.pop(),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>\n</div>",o(null,a),a},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("This app has no reviews."),r+="</p>",e(null,r),r},null),!0&&e.autoesc),s+="</section>",void o(null,s))})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/rating.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/rating.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("App Review"),s+="</h2>\n</header>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("review",[n.contextOrFrameLookup(t,r,"id")])}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="reviews reviews-listing single-review">\n<ul class="ratings-placeholder-inner">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating")(n.contextOrFrameLookup(t,r,"this")),e.autoesc),a+="</ul>\n</div>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("The review you requested does not exist."),r+="</p>",e(null,r),r}),!0&&e.autoesc),s+="</section>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/report.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="main report-spam modal">\n<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Please select a reason:"),s+='</h2>\n<a href="#" class="close btn-cancel">',s+=t.lookup("_")("Cancel"),s+='</a>\n</header>\n<ul class="menu alt">\n<li>\n<a class="button" href="#review_flag_reason_spam">',s+=t.lookup("_")("Spam or otherwise non-review content"),s+='</a>\n</li>\n<li>\n<a class="button" href="#review_flag_reason_language">',s+=t.lookup("_")("Inappropriate language/dialog"),s+='</a>\n</li>\n<li>\n<a class="button" href="#review_flag_reason_bug_support">',s+=t.lookup("_")("Misplaced bug report or support request"),s+='</a>\n</li>\n</ul>\n<footer>\n<button class="button cancel fat">',s+=t.lookup("_")("Cancel"),s+="</button>\n</footer>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/write.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="main compose-review modal">\n<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Write a Review"),s+='</h2>\n<a href="#" class="close btn-cancel">',s+=t.lookup("_")("Cancel"),s+='</a>\n</header>\n<form class="add-review-form form-modal" data-app="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='">\n<p class="simple-field rating c">\n<label for="id_rating">',s+=t.lookup("_")("Rate:"),s+='</label>\n<select name="rating" id="id_rating" required>',r=r.push();var u=n.contextOrFrameLookup(t,r,"range")(1,6);if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("i",c),s+='<option value="',s+=n.suppressValue(c,e.autoesc),s+='">',s+=n.suppressValue(c,e.autoesc),s+="</option>"}r=r.pop(),s+='</select>\n</p>\n<p>\n<textarea id="id_body" rows="2" cols="40" name="body" required maxlength="150"></textarea>\n<div class="char-count" data-for="id_body"></div>\n</p>\n<footer class="form-footer buttons c only-logged-in">\n<div class="two-up"><a href="#" class="cancel button">',s+=t.lookup("_")("Cancel"),s+='</a></div>\n<div class="two-up"><button class="button" type="submit">',s+=t.lookup("_")("Submit"),s+='</button></div>\n</footer>\n<footer class="form-footer c only-logged-out">\n<p>',s+=t.lookup("_")("Only logged in users may edit reviews."),s+="</p>\n</footer>\n</form>\n</div>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["search/main.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u;if(u=n.contextOrFrameLookup(t,r,"anonApiParams")("search",n.contextOrFrameLookup(t,r,"params")),r.set("api_url",u,!0),r.parent||(t.setVariable("api_url",u),t.addExport("api_url")),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"region",e.autoesc)){s+=" ",s+=" ";var l;l=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"api_url"),n.makeKeywordArgs({region:n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"region",e.autoesc)})),r.set("api_url",l,!0),r.parent||(t.setVariable("api_url",l),t.addExport("api_url")),s+=" "}if(s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"sort",e.autoesc)){s+=" ";var c;c=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"api_url"),n.makeKeywordArgs({sort:n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"sort",e.autoesc)})),r.set("api_url",c,!0),r.parent||(t.setVariable("api_url",c),t.addExport("api_url")),s+=" "}s+='<section id="search-results" class="main full c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api_url"),pluck:"objects",as:"app",paginate:"ol.listing",id:"searchresults"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<header class="secondary-header c">\n<h2 class="linefit">',a+=t.lookup("_plural")("<b>{n}</b> Result","<b>{n}</b> Results",n.makeKeywordArgs({n:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)})),a+='<span class="subtitle hide-on-mobile">',a+=t.lookup("_")('Showing <b>1</b>&ndash;<b class="total-results">{total}</b>',n.makeKeywordArgs({total:n.contextOrFrameLookup(t,r,"len")(n.contextOrFrameLookup(t,r,"this"))})),a+="</span>\n</h2>",e.getTemplate("compatibility_filtering.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);a+=s,a+='<a href="#" class="expand-toggle" title="',a+=t.lookup("_")("Expand"),a+='"></a>\n</header>\n<ol class="container listing search-listing c">',r=r.push();var u=n.contextOrFrameLookup(t,r,"processor")(n.contextOrFrameLookup(t,r,"this"));if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("result",c),a+='<li class="item result app c">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"market_tile")(c,n.makeKeywordArgs({src:"search",tray:!0})),e.autoesc),a+="</li>"}r=r.pop(),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ol>",o(null,a)})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t},function(n){n||(n=function(e){if(e)throw e});var o="";return o+='<header class="search-404 secondary-header c">',e.getTemplate("compatibility_filtering.html",function(e,a){return e?void n(e):void a.render(t.getVariables(),r.push(),function(e,r){return e?void n(e):(o+=r,o+='</header>\n<p class="no-results">',o+=t.lookup("_")("No results found"),o+="</p>",void n(null,o))})}),o},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=" ",r+=t.lookup("_")("No results found, try again later"),r+="</p>",e(null,r),r}),!0&&e.autoesc),s+="</section>",o(null,s)})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["settings/feedback.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/forms.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u;u="feedback",r.set("current_page",u,!0),r.parent||(t.setVariable("current_page",u),t.addExport("current_page")),s+='<div class="main feedback modal c">\n<header class="secondary-header hide-on-mobile c">\n<h2 class="linefit">',s+=t.lookup("_")("Feedback"),s+='</h2>\n<a href="#" class="close btn-cancel">',s+=t.lookup("_")("Close"),s+='</a>\n</header>\n<div>\n<form method="post" class="feedback-form form-modal">\n<p class="brform simple-field c">\n<textarea name="feedback" required></textarea>\n</p>\n<p class="form-footer">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"potato_captcha")(),e.autoesc),s+='<button class="button btn" type="submit">',s+=t.lookup("_")("Send"),s+='</button>\n</p>\n</form>\n<ul class="support-list">\n<li>',n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxOS",e.autoesc)?(s+='<a href="https://support.mozilla.org/products/firefox-os/marketplace" class="button support" target="_blank">',s+=t.lookup("_")("Get Help"),s+="</a>"):n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxAndroid",e.autoesc)&&(s+='<a href="https://support.mozilla.org/kb/install-android-apps-using-marketplace" class="button support" target="_blank">',s+=t.lookup("_")("Get Help"),s+="</a>"),s+="</li>\n</ul>\n</div>\n</div>",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["settings/main.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main account" id="account-settings">\n<header class="secondary-header hide-on-mobile c">\n<h2 class="linefit">',s+=t.lookup("_")("Account Settings"),s+="</h2>\n</header>";var u;u="settings",r.set("current_page",u,!0),r.parent||(t.setVariable("current_page",u),t.addExport("current_page")),s+='<form class="form-grid account-settings"',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?"":" novalidate",e.autoesc),s+=">\n<h3>",s+=t.lookup("_")("General settings"),s+='</h3>\n<div class="simple-field c only-logged-in">\n<div class="form-label label">',s+=t.lookup("_")("Email"),s+='</div>\n<div class="form-col">\n<input type="email" name="email" id="email" readonly value="',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("email"),e.autoesc),s+='">\n</div>\n</div>\n<div class="brform simple-field c only-logged-in">\n<div class="form-label">\n<label for="display_name">',s+=t.lookup("_")("Display Name"),s+='</label>\n</div>\n<div class="form-col">\n<input name="display_name" id="display_name" pattern="[^\\s].*|\\s+\\S.+" value="',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("display_name"),e.autoesc),s+='" maxlength="50" type="text" required>\n</div>\n</div>\n<div class="simple-field c">\n<div class="form-label">',s+=t.lookup("_")("Region"),s+='</div>\n<div class="form-col">\n<span class="region region-',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user_helpers"),"region",e.autoesc)("restofworld"),e.autoesc),s+='">',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"REGIONS"),n.memberLookup(n.contextOrFrameLookup(t,r,"user_helpers"),"region",e.autoesc)("restofworld"),e.autoesc),e.autoesc),s+='</span>\n</div>\n</div>\n<div class="brform simple-field c only-logged-in">\n<div class="form-label">',s+=t.lookup("_")("Recommendations"),s+='</div>\n<div class="form-col">\n<label>\n<input name="enable_recommendations" id="enable_recommendations"\ntype="checkbox"',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("enable_recommendations",!0)?" checked":"",e.autoesc),s+=">",s+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")('Yes, show me recommendations based on my installed apps. (<a href="{url}" target="_blank">Learn more</a>)'),n.makeKeywordArgs({url:"https://support.mozilla.org/kb/recommendations-marketplace"})),e.autoesc),s+='</label>\n</div>\n</div>\n<h3 class="hide-on-desktop">',s+=t.lookup("_")("Newsletter"),s+='</h3>\n<div class="brform simple-field c full-width newsletter-info hide-on-desktop">\n<p>',s+="<span>",s+=t.lookup("_")("Get Firefox News."),s+='</span>\n<a href="/newsletter-signup" class="newsletter-signup">',s+=t.lookup("_")("Sign up for our newsletter."),s+='</a>\n</p>\n</div>\n<footer>\n<p class="only-logged-in inline save-changes"><button type="submit" class="button action">',s+=t.lookup("_")("Save Changes"),s+='</button></p>\n<p class="only-logged-out extras">\n<a href="#" class="button persona register only-logged-out">',s+=t.lookup("_")("Register"),s+='</a>\n</p>\n<p class="only-logged-out extras">\n<a href="#" class="button persona only-logged-out">',s+=t.lookup("_")("Sign In"),s+='</a>\n</p>\n<p class="only-logged-in extras">\n<a href="#" class="button logout only-logged-in">',s+=t.lookup("_")("Sign Out"),s+='</a>\n</p>\n<p class="hide-on-desktop extras">\n<a href="https://wiki.mozilla.org/Marketplace/Contributing/Apps" target="_blank" class="button support">',s+=t.lookup("_")("Get Involved"),s+='</a>\n</p>\n<p class="hide-on-desktop extras">\n<a href="',s+=t.lookup("url")("privacy"),s+='" class="button support">',s+=t.lookup("_")("Privacy Policy"),s+='</a>\n</p>\n<p class="hide-on-desktop extras">\n<a href="',s+=t.lookup("url")("terms"),s+='" class="button support">',s+=t.lookup("_")("Terms of Use"),s+="</a>\n</p>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(s+='<p class="hide-on-desktop extras reviewer-tools">\n<a href="/reviewers/apps/queue/" class="button action only-logged-in" rel="external">',s+=t.lookup("_")("Reviewer Tools"),s+="</a>\n</p>"),s+="</footer>\n</form>\n</section>",o(null,s)
}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["user/purchases.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+='<section class="main account purchases c" id="account-settings">';var u;u="purchases",r.set("current_page",u,!0),r.parent||(t.setVariable("current_page",u),t.addExport("current_page")),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?(s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("installed"),pluck:"objects",as:"app",paginate:"ol.listing"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<header class="secondary-header hide-on-mobile c">\n<h2>',a+=t.lookup("_")("My Apps"),a+='<span class="subtitle">',a+=t.lookup("_")('Showing <b>1</b>&ndash;<b class="total-results">{total}</b>',n.makeKeywordArgs({total:n.contextOrFrameLookup(t,r,"len")(n.contextOrFrameLookup(t,r,"this"))})),a+='</span>\n</h2>\n<a href="#" class="expand-toggle" title="',a+=t.lookup("_")("Expand"),a+='"></a>\n</header>\n<ol class="container listing only-logged-in c">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("result",u),a+='<li class="item result app c">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"market_tile")(u,n.makeKeywordArgs({tray:!0,src:"myapps"})),e.autoesc),a+="</li>"}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ol>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<header class="secondary-header hide-on-mobile c">\n<h2>',r+=t.lookup("_")("My Apps"),r+='</h2>\n</header>\n<p class="no-results only-logged-in">',r+=t.lookup("_")("You have no apps"),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("An internal server error occurred. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" "):(s+='<header class="secondary-header hide-on-mobile c">\n<h2>',s+=t.lookup("_")("My Apps"),s+="</h2>\n</header>"),s+='<footer class="only-logged-out">\n<article class="extras">\n<p class="notice">',s+=t.lookup("_")("You must be signed in to view your apps."),s+='</p>\n<a class="button full persona register" href="#">',s+=t.lookup("_")("Register"),s+='</a>\n<a class="button full persona" href="#">',s+=t.lookup("_")("Sign In"),s+="</a>\n</article>\n</footer>\n</section>",o(null,s)})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),define("templates",["nunjucks","helpers"],function(t){return t.env=new t.Environment([],{autoescape:!0}),t.env.cache=t.templates=e,console.log("Templates loaded"),t})}(),define("notification",["defer","helpers","jquery","templates","z"],function(e,t,r,n,o){function a(e){return e?e.replace(g,function(e,t){return"<b>"+t+"</b>"}):void 0}function i(){d&&window.clearTimeout(d),f.removeClass("hidden"),p=window.setTimeout(function(){f.addClass("show")},700)}function s(){p&&window.clearTimeout(p),f.removeClass("show"),d=window.setTimeout(function(){f.addClass("hidden")},400)}function u(t){var r=[];c=e.Deferred(),c.always(s),f.attr("class",""),m.text("");var n=t.message;if(n){"classes"in t&&(r=t.classes.split(/\s+/)),t.closable&&r.push("closable"),setTimeout(function(){c.reject()},t.timeout||5e3),f.addClass(r.join(" "));var o=a(n);return o==n?m.text(n):m.html(o),i(),c.promise()}}function l(t){var i=r('<div class="modal confirmation show">');i.html(n.env.render("confirmation.html")),o.body.append(i),h.addClass("show light");var s=e.Deferred();i.on("touchend click",".confirmation-yes",function(e){e.preventDefault(),s.resolve()}).on("touchend click",".confirmation-no, .close",function(e){e.preventDefault(),s.reject()}),s.always(function(){i.remove(),r(".modal.confirmation").length||h.removeClass("show light")});var u=i.find(".content");u.text("");var l=t.message;if(l){var c=[];"classes"in t&&(c=t.classes.split(/\s+/)),t.closable&&c.push("closable"),i.addClass(c.join(" "));var p=a(l);return p===l?u.text(l):u.html(p),s.promise()}}var c,p,d,f=r('<div id="notification" class="hidden">'),m=r('<div id="notification-content">'),g=/\*([^\*]+)\*/g;f.append(m).on("touchend click",function(){c.resolve()}),o.body.append(f);var h=r(".cloak");return o.win.on("notification",function(e){u({message:e})}),{notification:u,confirmation:l}}),define("site_config",["defer","polyfill","requests","settings","underscore","utils","urls","z"],function(e,t,r,n,o,a,i,s){function u(){var t=e.Deferred(),a=s.body.data("settings"),u=s.body.data("waffle-switches");return a&&a.fxa_auth_url&&a.fxa_auth_state&&o.isArray(u)?(n.fxa_auth_url=a.fxa_auth_url,n.fxa_auth_state=a.fxa_auth_state,n.switches=u,t.resolve().promise()):(r.get(i.api.unsigned.url("site-config")).done(function(e){e.hasOwnProperty("fxa")&&(n.fxa_auth_url=l(e.fxa.fxa_auth_url),n.fxa_auth_state=e.fxa.fxa_auth_state),e.waffle.switches&&o.isArray(e.waffle.switches)&&(n.switches=e.waffle.switches),t.resolve(e)}).always(function(){t.resolve()}),t.promise())}function l(e,t){var r=c(t);return r?a.urlparams(e,{client_id:r}):e}function c(e){return p[e||window.location.origin]}var p={"http://localhost:8675":"124ae9dff020ba79","http://localhost:8676":"31b549f7dfb4de69","http://localhost:8677":"cc389d4ccd6cd34d","http://localhost:8678":"47354b86fb361c7e","http://localhost:8679":"049d4b105daa1cb9"};return{fetch:u,fxa_client_id_for_origin:c,promise:u(),update_fxa_url_client_id:l}}),define("login",["cache","capabilities","defer","jquery","log","notification","polyfill","settings","site_config","storage","underscore","urls","user","utils","requests","z"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g){function h(){V.log("Login cancelled"),g.page.trigger("login_cancel"),c.invoke(T,"reject"),T=[]}function v(){a.notification({message:gettext("You have been signed out")})}function b(){a.notification({message:gettext("You have been signed in")})}function k(){e.flush_signed(),d.clear_token(),g.body.removeClass("logged-in"),g.page.trigger("reload_chrome").trigger("before_logout"),g.context.dont_reload_on_login?V.log("Reload on logout aborted by current view"):(g.page.trigger("logged_out"),v(),require("views").reload())}function y(e){function t(){c.invoke(T,"resolve"),T=[]}var r=!d.logged_in();d.set_token(e.token,e.settings),d.update_permissions(e.permissions),d.update_apps(e.apps),V.log("Login succeeded, preparing the app"),g.body.addClass("logged-in"),n(".loading-submit").removeClass("loading-submit"),g.page.trigger("reload_chrome").trigger("logged_in"),r&&!g.context.dont_reload_on_login?require("views").reload().done(function(){t(),b()}):V.log("Reload on login aborted by current view")}function _(e){e=e||gettext("Sign in failed"),a.notification({message:e}),n(".loading-submit").removeClass("loading-submit"),g.page.trigger("login_fail"),c.invoke(T,"reject"),T=[]}function w(e,t){var r=window.screenX+Math.max(0,Math.floor((window.innerWidth-e)/2)),n=window.screenY+Math.max(0,Math.floor((window.innerHeight-t)/2));return[r,n]}function x(e){var o=320,a=600,i=w(o,a),u=r.Deferred();T.push(u);var l={register:!1};if(c.extend(l,e),t.yulelogFxA())window.top.postMessage({type:"fxa-request"},j);else if(t.fallbackFxA()){var p;d.migration_enabled()?(p="/fxa-migration",E(s.fxa_auth_url)):p=s.fxa_auth_url,l.register&&(p=f.urlparams(p,{action:"signup"})),S=window.open(p,"fxa","scrollbars=yes,width="+o+",height="+a+",left="+i[0]+",top="+i[1]);var m=setInterval(function(){!S||S.closed?(n(".loading-submit").removeClass("loading-submit").trigger("blur"),clearInterval(m)):S.focus()},150)}else V.log("Requesting login from Native FxA"),navigator.mozId.request({oncancel:h});return u.promise()}function L(e){V.log("Got assertion from FxA");var r;r=t.yulelogFxA()?j:window.location.origin;var n={assertion:e,audience:r};g.page.trigger("before_login"),m.post(p.api.url("login"),n).done(y).fail(function(e,t,r){V.warn("Assertion verification failed!",t,r);var n=e.responseText;200!=e.status&&(n=gettext("FxA login failed. A server error was encountered.")),_(n)})}function O(){var e=d.get_setting("email")||"";e?V.log("Detected user",e):V.log("No previous user detected"),V.log("Calling navigator.mozId.watch"),navigator.mozId.watch({wantIssuer:"firefox-accounts",loggedInUser:e,onready:function(){g.body.addClass("persona-loaded")},onlogin:L,onlogout:function(){g.body.removeClass("logged-in"),g.page.trigger("reload_chrome").trigger("logout")}})}function F(){window.addEventListener("message",function(e){var t=[s.api_url,window.location.origin];e.data&&e.data.auth_code&&-1!==t.indexOf(e.origin)&&C(e.data.auth_code)})}function E(e){l.setItem(N,e)}function A(){return l.getItem(N)}function C(e,t){var r={auth_response:e,state:t||s.fxa_auth_state},n=u.fxa_client_id_for_origin();n&&(r.client_id=n),g.page.trigger("before_login"),m.post(p.api.url("fxa-login"),r).done(y).fail(function(e,t,r){V.warn("FxA login failed",e,t,r),_()})}var S,V=o("login"),T=[],j="app://packaged."+window.location.host;g.body.on("click",".persona",function(e){e.preventDefault();var t=n(this);t.addClass("loading-submit"),x({register:t.hasClass("register")}).always(function(){t.removeClass("loading-submit").trigger("blur")})}).on("click",".logout",f._pd(function(){m.del(p.api.url("logout")),t.fallbackFxA()&&k()})),u.promise.done(function(){t.yulelogFxA()?(V.log("setting up yulelog-fxa"),window.addEventListener("message",function(e){e.data&&e.data.type&&e.origin===j&&(V.log("fxa message "+JSON.stringify(e.data)),"fxa-login"===e.data.type?L(e.data.assertion):"fxa-logout"===e.data.type?k():"fxa-cancel"===e.data.type&&h())}),window.top.postMessage({type:"fxa-watch",email:d.get_setting("email")||""},j)):t.fallbackFxA()?(g.body.addClass("persona-loaded"),F()):O()});var N="fxa_auth_url";return{login:x,get_fxa_auth_url:A,handle_fxa_login:C}}),define("payments",["capabilities","defer","l10n","log","notification","requests","settings","urls","z"],function(e,t,r,n,o,a,i,s){function u(e,t,r,n){c.log("Waiting for payment confirmation for ",t.name);var o=function(){c.log("Fetching payment status of "+t.name+" from API..."),a.get(i.api_url+s.api.sign(n),!0).done(function(r){c.log("Got payment status: ",t.name,":",r.status),("complete"==r.status||i.simulate_nav_pay)&&(c.log("Payment complete. Resolving deferreds..."),e.resolve(t))}).fail(function(r,n,o){c.error("Error fetching payment status: ",t.name,n,o),e.reject(null,t,"MKT_SERVER_ERROR")})},u=setInterval(o,3e3),l=setTimeout(function(){c.error("Payment took too long to complete. Rejecting: ",t.name),e.reject(null,t,"MKT_INSTALL_ERROR")},6e4);o(),e.always(function(){c.log("Clearing payment timers for: ",t.name),clearInterval(u),clearTimeout(l)})}function l(r){var n=t.Deferred();return r&&r.payment_required?(c.log("Initiating transaction"),e.navPay||i.simulate_nav_pay?a.post(s.api.url("prepare_nav_pay"),{app:r.slug}).done(function(t){c.log("Calling mozPay with JWT: ",t.webpayJWT);var o;o=e.navPay&&!i.simulate_nav_pay?navigator.mozPay([t.webpayJWT]):navigator.fakeMozPay([t.webpayJWT]),o.onsuccess=function(){c.log("navigator.mozPay success"),u(n,r,t.webpayJWT,t.contribStatusURL)},o.onerror=function(){var e;switch(c.error("`navigator.mozPay` error:",this.error.name),this.error.name){case"USER_CANCELLED":case"DIALOG_CLOSED_BY_USER":e=d("Payment cancelled.");break;default:e=d("Payment failed. Try again later.")}p({classes:"error",message:e,timeout:5e3}),n.reject(null,r,"MKT_CANCELLED")}}).fail(function(e,t,o){return 409===o?(c.warn("App already purchased (409 from API)"),void n.resolve(r)):(c.error("Error fetching JWT from API: ",t,o),p({message:d("Error while communicating with server. Try again later.")}),void n.reject(null,r,"MKT_SERVER_ERROR"))}):(c.error("`navigator.mozPay` unavailable and mocking disabled. Cancelling."),p({message:d("Your device does not support purchases.")}),n.reject(null,r,"MKT_CANCELLED")),n.promise()):n.resolve(r).promise()}var c=n("payments"),p=o.notification,d=r.gettext;return navigator.fakeMozPay=function(e){var t=c.tagged("mock"),r={onsuccess:function(){t.warning("handler did not define request.onsuccess")},onerror:function(){t.warning("handler did not define request.onerror")}};return t.log("STUB navigator.mozPay received",e),t.log("calling onsuccess() in 3 seconds..."),setTimeout(function(){t.log("calling onsuccess()"),r.onsuccess()},3e3),r},{purchase:l}}),define("nunjucks.compat",["nunjucks"],function(e){console.log("Loading nunjucks compat...");var t=e.require("runtime"),r=e.require("lib"),n=t.contextOrFrameLookup;t.contextOrFrameLookup=function(e,t,r){var o=n.apply(this,arguments);if(void 0===o)switch(r){case"True":return!0;case"False":return!1;case"None":return null}return o};var o=t.memberLookup,a={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||0>e)throw new Error("KeyError");return this.splice(e,1)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,r=0;r<this.length;r++)this[r]==e&&t++;return t},index:function(e){var t;if(-1==(t=this.indexOf(e)))throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},i={items:function(){var e=[];for(var t in this)e.push([t,this[t]]);return e},values:function(){var e=[];for(var t in this)e.push(this[t]);return e},keys:function(){var e=[];for(var t in this)e.push(t);return e},get:function(e,t){var r=this[e];return void 0===r&&(r=t),r},has_key:function(e){return this.hasOwnProperty(e)},pop:function(e,t){var r=this[e];if(void 0===r&&void 0!==t)r=t;else{if(void 0===r)throw new Error("KeyError");delete this[e]}return r},popitem:function(){for(var e in this){var t=this[e];return delete this[e],[e,t]}throw new Error("KeyError")},setdefault:function(e,t){return e in this?this[e]:(void 0===t&&(t=null),this[e]=t)},update:function(e){for(var t in e)this[t]=e[t];return null}};i.iteritems=i.items,i.itervalues=i.values,i.iterkeys=i.keys,t.memberLookup=function(e,t){return e=e||{},r.isArray(e)&&a.hasOwnProperty(t)?function(){return a[t].apply(e,arguments)}:r.isObject(e)&&i.hasOwnProperty(t)?function(){return i[t].apply(e,arguments)}:o.apply(this,arguments)}}),define("builder",["log","jquery","templates","models","requests","settings","z","nunjucks.compat"],function(e,t,r,n,o,a,i){function s(e,t,n){return(n||r.env).render(e,t||{})}function u(e,t){var r=document.implementation.createHTMLDocument("");return r.body.innerHTML=e,r.body.querySelector(t)}function l(e,t){var r=document.implementation.createHTMLDocument("");r.body.innerHTML=e;for(var n=t.parentNode;r.body.childNodes.length;){var o=r.body.childNodes[0];r.body.removeChild(o),n.insertBefore(o,t)}n.removeChild(t)}function c(e,r,n){t(e).trigger(r,n)}function p(){function e(t,r,n){if(!r)return void d.log("No element to paginate");var o=r.querySelector(".loadmore button");o&&o.addEventListener("click",function(){o.classList.add("hide"),o.parentNode.classList.remove("pagination-error");var i=o.getAttribute("data-url");t(i,o.parentNode,n).done(function(){d.log("Pagination completed"),c(g,"loaded_more")}).fail(function(){i+=(i.indexOf("?")+1?"&":"?")+"_bust="+(new Date).getTime(),l(s(a.pagination_error_template,{more_url:i}),o.parentNode),e(t,r,n)})},!1)}function t(e){c(g,"fragment_loaded",e)}function p(e){c(g,"fragment_load_failed",e)}var h=this.env=new r.Environment([],{autoescape:!0});h.dev=r.env.dev,h.cache=r.templates;var b=this.results={},k={},y=!1,_=o.pool();this.env.addExtension("defer",{run:function(r,o,a,i,s,c){var g,h="ph_"+m++,w=function(i,f,m){function x(e,t){"pluck"in o&&(e=e[o.pluck]),e&&!t&&"as"in o&&(d.groupCollapsed("Casting "+o.as+"s to model cache..."),n(o.as).cast(e),d.groupEnd());var i="";if(s&&(!e||Array.isArray(e)&&0===e.length)?i=s():(r.ctx.this=e,i=a()),m)try{i=u(i,m).innerHTML}catch(l){d.error("There was an error extracting the result from the rendered response."),i=v}return i}var L;if(L="as"in o&&"key"in o?n(o.as).get(i,o.key,_.get):_.get(i,!!o.nocache),"id"in o&&(k[o.id]=L,L.done(function(e){b[o.id]=e})),L.__cached){y=!0;var O;return L.done(function(e){if(r.ctx.response=e,O=x(e,!0),e&&"as"in o){var t=e,a="pluck"in o,s=n(o.as).uncast;if(a&&(t=t[o.pluck]),!t)return;if(Array.isArray(t))for(var u=0;u<t.length;u++)t[u]=s(t[u]);else a&&(e[o.pluck]=s(t));_.get(i).done(function(e){n(o.as).cast(e)})}}),f?l(O,f):g=O,o.paginate&&_.done(function(){setTimeout(function(){e(w,document.getElementById(h),o.paginate)})}),L}return L.done(function(n){var a=document.getElementById(h);if(a){r.ctx.response=n;var i=x(n);f?l(i,f):a.innerHTML=i,o.paginate&&e(w,a,o.paginate),t({context:r,signature:o})}}).fail(function(e,t,n,a){if(!f){var i=document.getElementById(h);if(!i)return;r.ctx.response=a,r.ctx.error=n,i.innerHTML=c?c():v}p({context:r,signature:o})}),L};return w(o.url),g||(g='<div class="loading">'+(i?i():"")+"</div>"),new f('<div id="'+h+'" class="placeholder">'+g+"</div>")}}),this.env.addExtension("fetch",{run:function(e,t,r){var n=t.url,o=_.get(n),a="f_"+m++,i="";if(o.__cached)y=!0,o.done(function(e){i=e});else{var s=function(e){t.filters&&t.filters.forEach(function(t){e=h.filters[t](e)}),document.getElementById(a).innerHTML=e};o.done(s).fail(function(){var e=t.fallback;e&&e!==n&&(o=_.get(e).done(s).fail(function(){s(v)}))})}return i||(i=r()),new f('<div id="'+a+'" class="placeholder fetchblock">'+i+"</div>")}}),this.start=function(e,r){return c(g,"build_start"),g.innerHTML=s(e,r,h),y&&t(),this},this.onload=function(e,t){return k[e].done(t),this},_.promise(this),this.terminate=_.abort,this.finish=function(){_.always(function(){c(g,"loaded")}),_.finish()};var w=function(){var e;return function(){return e||(e=i.context={})}}();this.z=function(e,t){switch(w()[e]=t,e){case"title":t?t!==a.title_suffix&&(t+=" | "+a.title_suffix):t=a.title_suffix,document.title=t;break;case"type":document.body.setAttribute("data-page-type",t)}}}var d=e("builder"),f=r.require("runtime").SafeString,m=0,g=document.getElementById("page");if(!g)return void d.error("Could not start the builder; #page not found!");var h,v=s(a.fragment_error_template);return{getBuilder:function(){return h&&(c(g,"unloading"),h.terminate()),h=new p},getLastBuilder:function(){return h}}}),define("views/homepage",["jquery","format","l10n","log","nunjucks","requests","salvattore","urls","utils","utils_local","z"],function(e,t,r,n,o,a,i,s,u,l,c){n("homepage"),r.gettext;return c.page.on("click",".loadmore.feed-item-item button",function(){var t=e(this),r=t.parent(),n=r.clone();t.remove(),a.get(t.data("url")).done(function(t){r.remove();var a=t.objects.map(function(t){return e(o.env.render("feed/feed_item.html",{item:t}))[0]}),u=document.querySelector(".home-feed");u&&i.append_elements(u,a),t.meta.next&&(n.find("button").attr("data-url",s.api.base.host(t.meta.next)+t.meta.next),u.parentNode.insertBefore(n[0],u.nextSibling)),c.page.trigger("fragment_loaded")})}),function(e,t,r){r=r||{},e.z("title",""),e.z("type","root homepage"),"src"in r&&delete r.src,e.start("feed.html",{}),e.onload("feed-items",function(){l.initSalvattore(document.querySelector(".home-feed"))})}}),define("tracking",["log","settings","storage","underscore","utils","z"],function(e,t,r,n,o,a){function i(e,t,r,n,o){window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=1*new Date;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://www.google-analytics.com/analytics.js",document.body.appendChild(a),window.ga("create",e,{storage:"none",clientId:r}),n&&window.ga("set","dimension"+o,n),window.ga("set","checkProtocolTask",function(){}),window.ga("send","pageview",t)}function s(){var e,r=n.toArray(arguments);if(t.potatolytics_enabled){if(r[0]===t.ua_tracking_id?b.unshift(r):b.push(r),v)for(;e=b.shift();)e.name="potatolytics-tracking",g.contentWindow.postMessage(e,h)}else window.ga?window.ga.apply(this,r):d.error("Potatolytics is disabled but window.ga is absent!")}function u(){return window.location.pathname+window.location.search}function l(e){return p?e:function(){}}var c=t.tracking_enabled,p=t.action_tracking_enabled,d=e("tracking"),f=r.getItem("clientID");if(!f&&c&&r.setItem("clientID",f=(Date.now()+Math.random()).toString(36)),!c)return d.log("Tracking disabled, aborting init"),{enabled:!1,actions_enabled:!1,setVar:function(){},setPageVar:function(){},trackEvent:function(){}};var m,g,h=t.iframe_potatolytics_src,v=!1,b=[];t.ua_tracking_id&&(t.potatolytics_enabled?(m=a.body.data("build-id-js"),m&&(h=o.urlparams(t.iframe_potatolytics_src,{b:m,cache:31536e3})),d.log("Setting up tracking with Potatolytics"),g=document.createElement("iframe"),g.id="iframe-potatolytics",g.src=h,g.height=0,g.width=0,g.style.borderWidth=0,document.body.appendChild(g),window.addEventListener("message",function(e){if(e.data.name)switch(e.data.name){case"potatolytics-tracking":break;case"potatolytics-loaded":d.log("Potatolytics iframe is loaded"),v=!0,s(t.ua_tracking_id,u(),f,t.tracking_site_section,t.tracking_site_section_index)}})):(d.log("Setting up UA tracking without Potatolytics"),i(t.ua_tracking_id,u(),f,t.tracking_site_section,t.tracking_site_section_index))),d.log("Tracking initialized");var k={};return a.win.on("navigating",function(e,t){if(!t){var r=u();d.log("Tracking page view",r);var o=n.extend({page:r,title:document.title},k);s("send","pageview",o),k={}}}),{enabled:!0,actions_enabled:p,setVar:l(function(e,t,r){s("set","dimension"+e,r)}),setPageVar:l(function(e,t,r){k["dimension"+e]=r}),trackEvent:l(function(){var e=Array.prototype.slice.call(arguments,0);return s.apply(this,["send","event"].concat(e)),e})}}),define("overflow",[],function(){return{init:function(){var e=$(".infobox.support");e.find("ul.c a").each(function(){return this.scrollWidth>$(this).innerWidth()?void e.addClass("overflowing"):void 0})}}}),define("views/app",["capabilities","content-ratings","l10n","log","settings","tracking","utils","z","overflow"],function(e,t,r,n,o,a,i,s){var u=r.gettext,l=n("app");return s.page.on("click","#product-rating-status .toggle",i._pd(function(){$(this).closest(".toggle").siblings("div").toggleClass("hidden")})).on("click",".show-toggle",i._pd(function(){var e=$(this),t=e.attr("data-toggle-text");e.attr("data-toggle-text",e.text()),e.text(t),e.prev(".truncated-wrapper").toggleClass("truncated")})).on("click",".approval-pitch",i._pd(function(){$("#preapproval-shortcut").trigger("submit")})).on("click",".product-details .icon",i._pd(function(e){window.location.hash="id="+$(".product").data("id"),e.stopPropagation()})),s.page.on("click",".abuse .button",function(t){e.widescreen()&&(t.preventDefault(),t.stopPropagation(),s.body.trigger("decloak"),$(".report-abuse.modal").addClass("show"))}),function(r,n){var o=n[0];r.start("detail/main.html",{iarc:t,slug:o}),s.page.one("fragment_load_failed",function(e,t){"app-data"===t.signature.id&&r.z("title",u("Oh no!"))}),require("tracking_events").track_search_term(!0),r.z("type","leaf detail"),r.z("title",u("Loading...")),r.z("pagetitle",u("App Details"));var c=!0;r.onload("app-data",function(t){r.z("title",i.translate(t.name)),s.page.trigger("populatetray"),require("overflow").init(),$(".truncated-wrapper").each(function(){var e=$(this);e.prop("scrollHeight")<=e.prop("offsetHeight")&&e.removeClass("truncated").next(".show-toggle").hide()}),e.widescreen()&&!$(".report-abuse").length&&s.page.append(require("templates").env.render("detail/abuse.html",{slug:o})),c&&(t?(a.setPageVar(6,"App name",t.name,3),a.setPageVar(7,"App ID",t.id+"",3),a.setPageVar(8,"App developer",t.author,3),a.setPageVar(9,"App view source",i.getVars().src||"direct",3),a.setPageVar(10,"App price",t.payment_required?"paid":"free",3)):l.warn("app object is falsey and is not being tracked"))}).onload("ratings",function(){var e=$(".detail .reviews li");if(e.length>=3)for(var t=0;t<e.length-2;t+=2){var r=Math.max(e.eq(t).find(".review-inner").height(),e.eq(t+1).find(".review-inner").height());e.eq(t).find(".review-inner").height(r),e.eq(t+1).find(".review-inner").height(r)}}),c=!1}}),define("forms",["z"],function(e){function t(e){e&&$(e).filter(":not([novalidate])").find("button[type=submit]").attr("disabled",!e.checkValidity())}function r(e,r){e.find("textarea, button, input").prop("disabled",!r),e.find(".ratingwidget").toggleClass("disabled",!r),r&&t(e[0])}return e.body.on("change input","input, textarea",function(e){t(e.target.form)}).on("change","select",function(e){t(e.target.form)}).on("loaded decloak",function(){$("form:not([novalidate])").each(function(){t(this)}),$("form[novalidate] button[type=submit]").removeAttr("disabled")}),{toggleSubmitFormState:r}}),define("views/app/abuse",["forms","l10n","notification","requests","urls","utils","z"],function(e,t,r,n,o,a,i){var s=t.gettext,u=r.notification;return i.page.on("submit",".abuse-form",function(t){t.preventDefault();var r=$(this),l=r.find("input[name=app]").val(),c=a.getVars(r.serialize());e.toggleSubmitFormState(r),n.post(o.api.url("app_abuse"),c).done(function(){u({message:s("Abuse reported")}),i.page.trigger("navigate",o.reverse("app",[l]))}).fail(function(){e.toggleSubmitFormState(r,!0),u({message:s("Error while submitting report")})})}),function(e,t){e.start("detail/abuse.html",{slug:t[0]}).done(function(){$(".report-abuse").removeClass("modal")}),e.z("type","leaf"),e.z("parent",o.reverse("app",[t[0]])),e.z("title",s("Report Abuse"))}}),define("views/app/privacy",["l10n","urls"],function(e,t){var r=e.gettext;return function(e,n){e.start("detail/privacy.html",{slug:n[0]}),e.z("type","leaf"),e.z("parent",t.reverse("app",[n[0]])),e.z("title",r("Privacy Policy"))}}),define("views/app/ratings",["l10n","urls"],function(e,t){var r=e.gettext;return function(e,n){var o=n[0];e.start("ratings/main.html",{slug:o}),e.z("type","leaf"),e.z("parent",t.reverse("app",[o])),e.z("title",r("Reviews"))}}),define("views/app/ratings/rating",["l10n","urls"],function(e,t){var r=e.gettext;return function(e,n){var o=n[0],a=n[1];e.start("ratings/rating.html",{slug:o,id:a}),e.z("type","leaf"),e.z("parent",t.reverse("app/ratings",[o])),e.z("title",r("App Review"))}}),define("views/app/ratings/add",["capabilities","login","l10n","urls","user","z"],function(e,t,r,n,o,a){var i=r.gettext;return a.page.on("click",".add-review-form .cancel",function(e){e.preventDefault();var t=$(this).closest(".add-review-form").attr("data-app"),r=n.reverse("app",[t]);window.location.pathname!==r&&a.page.trigger("navigate",r)}).on("click touchend",".compose-review .rating",function(){var e=document.querySelector(".compose-review textarea:invalid");e&&e.focus()}).on("focus",".compose-review textarea",function(){window.scrollTo&&!e.widescreen()&&window.scrollTo(0,200)}),function(e,t){var r=t[0];return o.logged_in()?(e.start("ratings/write.html",{slug:r}).done(function(){$(".compose-review").removeClass("modal")}),e.z("type","leaf"),e.z("parent",n.reverse("app/ratings",[r])),void e.z("title",i("Write a Review"))):void a.page.trigger("navigate",n.reverse("app",[r]))}}),define("ratingwidget",["format","jquery"],function(e,t){t.fn.ratingwidget=function(r){return this.each(function(n,o){r||(r="");var a,i=t(o),s="ratingwidget stars stars-0 "+r,u=t('<span class="'+s+'"></span>'),l="",c=function(e){u.removeClass("stars-0 stars-1 stars-2 stars-3 stars-4 stars-5").addClass("stars-"+e)},p=function(t){if(a!=t){var r=u.find(e.format('[value="{0}"]',t));r.trigger("click"),c(t),a=t}};if(t("option[selected]",i).length){var d=i.val();p(d),a=parseInt(d,10)}for(var f=1;5>=f;f++){var m=a===f?" checked":"";l+=e.format('<label data-stars="{0}">{1}<input required type="radio" name="rating"{2} value="{3}"></label>',[f,ngettext("{n} star","{n} stars",{n:f}),m,f])}u.on("click",function(e){var r=t(e.target);r.is("input[type=radio]")&&(c(a=r.attr("value")),r.val()||r.attr("checked",!0))}).on("mouseover",function(e){var t,r=e.target;(t=r.getAttribute("data-stars"))&&c(t)}).on("mouseout",function(){c(a||0)}).on("touchmove",function(e){var t=u.width(),r=u[0],n=r.getBoundingClientRect().left+window.pageXOffset-document.body.clientLeft,o=(e.originalEvent.touches[0].clientX-n)/t*5+1;o=0|Math.min(Math.max(o,1),5),p(o)}).on("touchstart","label",function(e){p(e.currentTarget.getAttribute("data-stars"))}),u.html(l),i.before(u).detach()}),this}}),define("ratings",["cache","capabilities","forms","jquery","l10n","login","models","settings","templates","tracking","underscore","utils","urls","user","z","requests","notification","ratingwidget"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m){function g(t,r){var n=d.api.base.url("reviews");e.attemptRewrite(function(e){if(p.baseurl(e)===n){var r=p.querystring(e);return"app"in r&&r.app===t?!0:void 0}},r)}function h(e){var t=n(".report-spam");t.length||(m.page.append(u.env.render("ratings/report.html")),t=n(".report-spam")),t.one("click",".menu a",p._pd(function(t){var r=e.find(".actions .flag");n(".cloak").trigger("dismiss"),r.text(y("Sending report...")),require("requests").post(require("settings").api_url+d.api.sign(e.data("report-uri")),{flag:n(t.target).attr("href").replace("#","")}).done(function(){_({message:y("Review flagged")}),r.remove()}).fail(function(){_({message:y("Report review operation failed")})})})),m.body.trigger("decloak"),t.addClass("show")}function v(t,r,n){t.addClass("deleting"),require("requests").del(s.api_url+d.api.sign(r)).done(function(){_({message:y("Review deleted")}),t.remove(),g(n,function(e){return e.objects=e.objects.filter(function(e){return e.resource_uri!==r}),e.meta.total_count-=1,e.user||(e.user={}),e.user.has_rated=!1,e});var o;(o=i("app").lookup(n))&&(o.ratings.count-=1,o.ratings.count||(o.ratings.average=0)),e.bust(d.api.params("reviews",{app:n,user:"mine"}))}).fail(function(){_({message:y("There was a problem deleting the review")})})}function b(){function e(){w=!1}function r(){if(w){w=!1;var e=n(".write-review");"edit-review"==e.attr("id")?m.page.trigger("navigate",e.attr("href")):t.widescreen()?n(".write-review").trigger("click"):m.page.trigger("navigate",e.attr("href"))}}w=!0,a.login().done(r).fail(e),m.page.one("loaded",r)}function k(e){var r=n(this);if(!f.logged_in())return e.preventDefault(),e.stopPropagation(),b();if(t.widescreen()){if("edit-review"===this.id)return;e.preventDefault(),e.stopPropagation();var o=n(".compose-review.modal");o.length||(m.page.append(u.env.render("ratings/write.html",{slug:r.data("app")})),o=n(".compose-review.modal")),m.body.trigger("decloak"),o.addClass("show"),o.find('select[name="rating"]').ratingwidget("large"),p.initCharCount()}}var y=o.gettext,_=require("notification").notification,w=!1;return m.page.on("click",".review .actions a",p._pd(function(e){var t=n(this),r=t.data("action");if(r){var o=t.closest(".review");switch(r){case"delete":v(o,t.data("href"),t.data("app"));break;case"report":h(o);break;case"edit":var a=p.urlparams(t.attr("href"),{review:t.data("review-id")});m.page.trigger("navigate",a);break;default:return}e.stopPropagation()}})).on("click",".write-review",k).on("loaded",function(){n('select[name="rating"]').ratingwidget(),p.initCharCount()}),m.body.on("submit","form.add-review-form",function(t){t.preventDefault();var o=n(this),a=o.data("app"),s=p.getVars(o.serialize());s.app=a,r.toggleSubmitFormState(o),require("requests").post(d.api.url("reviews"),s).done(function(t){g(a,function(e){return e.objects.unshift(t),e.meta.total_count+=1,e.user||(e.user={}),e.user.has_rated=!0,e
});var r,n=parseInt(s.rating,10);if(r=i("app").lookup(a)){var o=r.ratings.count;r.ratings.average=o?(r.ratings.average*o+n)/(o+1):n,r.ratings.count+=1}e.set(d.api.params("reviews",{app:a,user:"mine"}),{meta:{limit:20,next:null,offset:0,total_count:1},info:{average:n,slug:a},objects:[t]}),_({message:y("Your review was posted")}),m.page.trigger("navigate",d.reverse("app",[a])),l.trackEvent("App view interactions","click","Successful review"),l.setVar(12,"Reviewer","Reviewer",1),l.trackEvent("Write a Review","click",a,s.rating)}).fail(function(){r.toggleSubmitFormState(o,!0),_({message:y("Error while submitting review")})})}),{_rewriter:g}}),define("views/app/ratings/edit",["cache","l10n","notification","ratings","requests","settings","urls","user","utils","z"],function(e,t,r,n,o,a,i,s,u,l){function c(e){return e.objects?e.objects[0]:e}var p=t.gettext,d=r.notification,f=require("forms");return l.page.on("submit",".edit-review-form",function(t){t.preventDefault();var r=$(this),s=r.data("uri"),c=a.api_url+i.api.sign(s),m=r.data("slug"),g=u.getVars(r.serialize());f.toggleSubmitFormState(r),o.put(c,g).done(function(t){d({message:p("Review updated successfully")}),e.set(c,t),n._rewriter(m,function(e){for(var r=0;r<e.objects.length;r++)e.objects[r].resource_uri===s&&(e.objects[r].body=t.body,e.objects[r].rating=t.rating);return e}),l.page.trigger("navigate",i.reverse("app",[m]))}).fail(function(){f.toggleSubmitFormState(r,!0),d({message:p("There was a problem updating your review")})})}).on("click",".edit-review-form .cancel",function(e){e.preventDefault();var t=$(this).closest(".edit-review-form").data("slug");l.page.trigger("navigate",i.reverse("app",[t]))}),function(e,t){var r=t[0];if(!s.logged_in())return void l.page.trigger("divert",i.reverse("app",[r]));var n,o=u.getVars().review;n=o&&s.get_permission("reviewer")?i.api.url("review",[o]):i.api.params("reviews",{app:r,user:"mine"}),e.start("ratings/edit.html",{slug:r,endpoint:n,normalize:c}),e.onload("main",function(e){e.meta&&0===e.meta.total_count&&l.page.trigger("divert",i.reverse("app/ratings/add",[r]))}),e.z("type","leaf"),e.z("parent",i.reverse("app/ratings",[r])),e.z("title",p("Edit Review"))}}),define("views/app/receipt",["capabilities","l10n","login","notification","templates","urls","user","z"],function(e,t,r,n,o,a,i,s){var u=t.gettext,l=n.notification;return s.page.on("click",".abuse .button",function(t){e.widescreen()&&(t.preventDefault(),t.stopPropagation(),s.body.trigger("decloak"),$(".report-abuse.modal").addClass("show"))}),function(t,r){var n=r[0];return i.logged_in()?(t.start("detail/receipt.html",{slug:r[0]}),t.onload("app-data",function(){e.widescreen()&&!$(".report-abuse").length&&s.page.append(o.env.render("detail/abuse.html",{slug:n}))}),t.z("type","leaf"),t.z("parent",a.reverse("app",[r[0]])),void t.z("title",u("Receipt"))):(l({message:u("Please sign in to view the receipt")}),void s.page.trigger("divert",a.reverse("app",[n])))}}),define("categories",["l10n"],function(e){var t=e.gettext,r=[{slug:"games",name:t("Games")},{slug:"books",name:t("Books")},{slug:"business",name:t("Business")},{slug:"education",name:t("Education")},{slug:"entertainment",name:t("Entertainment")},{slug:"health-fitness",name:t("Health & Fitness")},{slug:"lifestyle",name:t("Lifestyle")},{slug:"maps-navigation",name:t("Maps & Navigation")},{slug:"music",name:t("Music")},{slug:"news-weather",name:t("News & Weather")},{slug:"photo-video",name:t("Photo & Video")},{slug:"productivity",name:t("Productivity")},{slug:"reference",name:t("Reference")},{slug:"shopping",name:t("Shopping")},{slug:"social",name:t("Social")},{slug:"sports",name:t("Sports")},{slug:"travel",name:t("Travel")},{slug:"utilities",name:t("Utilities")}];return r}),define("views/categories",["categories"],function(e){return function(t){t.z("type","root categories"),t.z("title",gettext("Categories")),t.start("categories.html",{categories:e})}}),define("views/category",["categories","models","tracking","underscore","urls","utils","z"],function(e,t,r,n,o){var a=t("app");return function(t,i,s){s=s||{};var u=i[0],l=n.findWhere(e,{slug:u}),c=l?l.name:"";c&&t.z("title",c),t.z("type","leaf"),t.z("show_cats",!0),t.z("cat",u),"src"in s&&delete s.src,t.start("category.html",{category:u,category_name:c,endpoint:o.api.unsigned.url("category_landing",[u],s),endpoint_name:"category_landing",sort:s.sort,app_cast:a.cast}),r.setPageVar(5,"Category",u,3)}}),define("views/credits",["l10n"],function(e){var t=e.gettext;return function(e){e.start("credits.html"),e.z("type","leaf"),e.z("title",t("Credits"))}}),define("views/debug",["cache","capabilities","compatibility_filtering","log","models","notification","regions","requests","settings","storage","user","utils","z"],function(e,t,r,n,o,a,i,s,u,l,p,d,f){{var m=n.persistent("debug","change"),g=n.persistent("mobilenetwork","change");$(document.getElementById("debug-status"))}return f.doc.on("click","#clear-localstorage",function(){l.clear(),a.notification({message:"localStorage cleared",timeout:1e3})}).on("click","#enable-offline-cache",function(){l.removeItem("offline_cache_disabled"),m.log("Offline cache enabled:",new Date),require("views").reload(),a.notification({message:"Offline cache enabled",timeout:1e3})}).on("click","#disable-offline-cache",function(){l.setItem("offline_cache_disabled",1),m.log("Offline cache disabled:",new Date),require("views").reload(),a.notification({message:"Offline cache disabled",timeout:1e3})}).on("click","#clear-offline-cache",function(){e.flush(),o("app").flush(),m.log("Offline cache cleared:",new Date),a.notification({message:"Offline cache cleared",timeout:1e3}),window.location.reload()}).on("click","#clear-cookies",function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var r=e[t].indexOf("="),n=r>-1?e[t].substr(0,r):c[t];document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}a.notification({message:"cookies cleared",timeout:1e3})}).on("click","#nukecounter",function(){l.removeItem("newscounter"),a.notification({message:"newscounter reset",timeout:1e3})}).on("click",".cache-menu a",function(t){t.preventDefault();var r=e.get($(this).data("url"));r=JSON.stringify(r,null,"  "),$("#cache-inspector").html(d.escape_(r))}).on("click","#submit-debug",function(e){e.preventDefault();var o={body:JSON.stringify({app:u.app_name,origin:window.location.protocol+"//"+window.location.host,logs:n.all,persistent_logs:n.persistent.all,capabilities:t,settings:u,report_version:1,profile:r.feature_profile})};s.post("https://ashes.paas.allizom.org/post_report",o).done(function(e){a.notification({message:"ID: "+e.id,timeout:3e4})})}).on("change","#debug-page select[name=region]",function(){var e=$(this).val(),t=p.get_setting("region_override");t!==e&&g.log("Manual region override change:",t,"→",e),p.update_settings({region_override:e}),f.page.trigger("reload_chrome"),a.notification({message:"Region updated to "+(i.REGION_CHOICES_SLUG[e]||"---")})}).on("change","#debug-page select[name=carrier]",function(){var e=$(this).val(),t=p.get_setting("carrier_override");t!==e&&g.log("Manual carrier override change:",t,"→",e),p.update_settings({carrier_override:e}),f.page.trigger("reload_chrome"),a.notification({message:"Carrier updated to "+e})}),function(o){var a=n.get_recent(100);o.start("debug.html",{carriers:require("mobilenetwork").carriers,cache:e.raw,capabilities:t,profile:r.feature_profile,recent_logs:a,persistent_logs:n.persistent.all,filter:n.filter,request_cache:l.getItem("request_cache")||{}}),o.z("type","leaf debug")}}),define("views/debug_features",["compatibility_filtering","settings","urls"],function(e,t,r){return function(t,n,o){o=o||{},o.pro=e.feature_profile,t.start("debug_features.html",{endpoint:r.api.unsigned.url("features",[],o),profile:e.feature_profile})}}),define("views/feed/feed_app",["jquery","l10n","utils","z"],function(e,t,r){var n=t.gettext;return function(e,t){e.z("type","leaf"),e.z("title",n("Loading...")),e.z("pagetitle",n("App Details"));var o=t[0];e.start("feed/feed_app.html",{landing:!0,slug:o}),e.onload("feed_app",function(t){e.z("title",r.translate(t.app.name))})}}),define("views/feed/feed_collection",["jquery","l10n","utils","utils_local","z"],function(e,t,r,n){var o=t.gettext;return function(e,t){e.z("type","leaf"),e.z("title",o("Loading...")),e.z("pagetitle",o("Collection Details"));var a=t[0];e.start("feed/feed_collection.html",{slug:a}),e.onload("feed-collection",function(t){e.z("title",r.translate(t.name)),n.initSalvattore(document.querySelector(".collection-landing [data-columns]"))})}}),define("views/feed/feed_brand",["feed","jquery","l10n","utils","z"],function(e,t,r){var n=r.gettext;return function(t,r){t.z("type","leaf"),t.z("title",n("Loading...")),t.z("pagetitle",n("Editorial Brand Details"));var o=r[0];t.start("feed/feed_brand.html",{landing:!0,slug:o}),t.onload("brand",function(r){t.z("title",e.get_brand_type(r.type,r.apps.length))})}}),define("views/feed/feed_shelf",["jquery","l10n","utils","utils_local","z"],function(e,t,r,n){var o=t.gettext;return function(e,t){e.z("type","leaf"),e.z("title",o("Loading...")),e.z("pagetitle",o("Operator Shelf Details"));var a=t[0];e.start("feed/feed_shelf.html",{landing:!0,slug:a}),e.onload("shelf",function(t){e.z("title",r.translate(t.name)),n.initSalvattore(document.querySelector(".shelf-landing [data-columns]"))})}}),define("linefit",["jquery"],function(e){e.fn.linefit=function(t){var r=7;return t=t||1,this.each(function(){this.innerHTML='<span class="linefitted">'+this.innerHTML+"</span>";for(var n=e(this).find("span"),o=n.get(0),a=parseFloat(n.css("font-size").replace("px","")),i=o.getClientRects().length;i>t&&a>r;)a-=.5,n.css("font-size",a),i=o.getClientRects().length})}}),define("views/feedback",["capabilities","compatibility_filtering","forms","l10n","linefit","notification","requests","templates","urls","utils","z"],function(e,t,r,n,o,a,i,s,u,l,c){function p(){e.widescreen()&&u.reverse("feedback")!==window.location.pathname&&($(".main.feedback:not(.modal)").length||$(".feedback.modal").length||c.page.append(s.env.render("settings/feedback.html")),c.body.trigger("decloak"))}var d=n.gettext,f=a.notification;return c.page.on("submit",".feedback-form",function(n){n.preventDefault();var o=$(this),a=l.getVars(o.serialize());a.chromeless=e.chromeless?"Yes":"No",a.from_url=window.location.pathname,a.profile=t.feature_profile,r.toggleSubmitFormState(o),i.post(u.api.url("feedback"),a).done(function(){o.find("textarea").val(""),r.toggleSubmitFormState(o,!0),$(".cloak").trigger("dismiss"),f({message:d("Feedback submitted. Thanks!")})}).fail(function(){r.toggleSubmitFormState(o,!0),f({message:d("There was a problem submitting your feedback. Try again soon.")})})}),c.body.on("click",".submit-feedback",function(e){return e.preventDefault(),e.stopPropagation(),$(".main.feedback:not(.modal)").length?void $(".simple-field textarea").trigger("focus"):(p(),void $(".feedback.modal").addClass("show"))}),function(e){e.start("settings/feedback.html").done(function(){$(".feedback").removeClass("modal"),p();var e=$(".linefit");e.length&&$(".linefit").linefit(2)}),e.z("type","root settings feedback"),e.z("title",d("Feedback")),e.z("parent",u.reverse("homepage"))}}),define("views/fxa_authorize",["capabilities","log","login","utils","z"],function(e,t,r,n,o){var a=t("view","fxa-login");return function(){var t,i=window.location.href;try{window.opener.location.protocol==window.location.protocol&&window.opener.location.host==window.location.host&&(t=!0)}catch(s){t=!1}if(t){window.opener.postMessage({auth_code:i},window.location.origin);var u="app://packaged."+window.location.host;a.log("Sending OAuth code to parent window "+u),window.opener.postMessage({auth_code:i},u),window.close()}else{var l=n.getVars().state;e.firefoxOS?(a.log("Starting login webactivity"),new MozActivity({name:"marketplace-app",data:{type:"login",auth_code:i,state:l}}),window.close()):(r.handle_fxa_login(i,l),a.log("Reusing window as Marketplace app"),o.page.trigger("navigate","/"))}}}),define("views/fxa_popup",["defer","format","l10n","login","requests","settings","urls","user","utils","z"],function(e,t,r,n,o,a,i,s,u,l){function c(e,t){var r=document.querySelectorAll('link[rel="stylesheet"]'),n=document.createElement("link");n.rel="stylesheet",n.href=t,n.addEventListener("load",function(){Array.prototype.forEach.call(r,function(e){e.parentNode.removeChild(e)}),e.z("type","standalone")}),document.head.appendChild(n)}return function(e){function p(e,t){var r=n.get_fxa_auth_url()+"&email="+encodeURIComponent(w)+"&action="+encodeURIComponent(e);t&&(r+="&preVerifyToken="+encodeURIComponent(t)),window.location=r}function d(){return o.get(i.api.unsigned.url("account_info",w))}function f(){return o.put(i.api.unsigned.url("preverify_confirmation",w))}function m(){var e=gettext("Click the verification link sent to {email} to transfer your apps to Firefox Accounts.");e=t.format(e,{email:w}),document.getElementById("verification-text").textContent=e,h("email-sent")}function g(){var e;e=gettext("signup"===u.getVars().action?"Join Firefox Marketplace":"Sign in to Firefox Marketplace"),document.getElementById("email-help-text").textContent=e,h("email"),F.focus()}function h(e){x.setAttribute("data-view-state",e)}function v(){p("signin")}function b(e){p("signup",e)}function k(){h("info")}function y(e){e&&(w=e,d().then(function(e){var t={"firefox-accounts":v,unknown:b,persona:k},r=t[e.source]||b;r()},b))}var _=a.fxa_css_path;a.local_html||(_=i.media(_)),_=u.urlparams(_,{b:l.body.data("build-id-js")}),l.body.attr("data-page-type","standalone-loading"),e.start("fx_accounts_popup.html",{title:r.gettext("Firefox Accounts")}),c(e,_);var w,x=document.getElementById("main-content"),L=document.getElementById("notice-form"),O=(L["continue-button"],document.getElementById("email-form")),F=O.email,E=document.getElementById("email-button"),A=document.getElementById("email-error");A.parentNode.removeChild(A),L.addEventListener("submit",function(e){e.preventDefault(),s.logged_in()?o.post(i.api.url("preverify_token")).then(b,b):f().then(function(e){m(e)},function(e){p(action),console.error("Failed to send email confirmation",e)})}),O.addEventListener("submit",function(e){e.preventDefault(),F.validity.valid?y(F.value):F.parentNode.appendChild(A)}),F.addEventListener("input",function(){F.validity.valid?E.classList.remove("disabled"):E.classList.add("disabled")}),x.addEventListener("click",function(e){e.target.classList.contains("back")&&(e.preventDefault(),g())}),s.logged_in()?y(s.get_setting("email")):g(),l.page.one("loaded",function(){setTimeout(function(){F.focus()})})}}),define("views/new",["format","l10n","log","urls","utils"],function(e,t,r){{var n=t.gettext;r("new")}return function(e){var t=n("Fresh and New Apps");e.z("type","root app-list new"),e.z("title",t),e.start("app_list.html",{endpoint_name:"new_popular_search",sort:"reviewed",source:"new",title:t})}}),define("newsletter",["capabilities","jquery","notification","nunjucks","requests","urls","user","user_helpers","utils","z"],function(e,t,r,n,o,a,i,s,u,l){function c(){return{user_region:s.region("restofworld"),user_email:i.get_setting("email"),user_lang:s.lang()}}function p(){return n.env.render("newsletter.html",c())}function d(e){e.hasClass("expanded")||(e.addClass("expanding").removeClass("collapsed").one("transitionend",function(){e.addClass("expanded")}),setTimeout(function(){e.removeClass("expanding")},1))}return l.body.on("focus","#newsletter-footer .email",function(){d(t(this).siblings(".newsletter-details"))}).on("click",".newsletter-signup-button",function(){d(t(this).closest("form").find(".newsletter-details"))}).on("submit",".newsletter form",u._pd(function(){var n=t(this),i=n.siblings(".success"),s=n.siblings(".processing"),c=u.getVars(n.serialize());c.newsletter="marketplace-"+e.device_platform(),n.addClass("processing-hidden"),s.show(),o.post(a.api.url("newsletter"),c).done(function(){n.remove(),s.remove(),i.show(),l.win.one("navigating",function(){t("#newsletter-footer").html(p())})}).fail(function(){s.remove(),n.removeClass("processing-hidden"),r.notification({message:gettext("There was an error submitting your newsletter sign up request")})})})),{context:c}}),define("views/newsletter_signup",["newsletter","underscore","user","user_helpers"],function(e){return function(t){var r={standalone_newsletter_signup:!0};_.extend(r,e.context()),t.start("newsletter.html",r),t.z("type","root settings")}}),define("views/popular",["l10n","log","urls","utils"],function(e,t){{var r=e.gettext;t("popular")}return function(e){var t=r("Popular All Time");e.z("type","root app-list popular"),e.z("title",t),e.start("app_list.html",{endpoint_name:"new_popular_search",source:"popular",title:t})}}),define("views/privacy",["l10n"],function(e){var t=e.gettext;return function(e){e.start("privacy.html"),e.z("type","leaf"),e.z("title",t("Privacy Policy"))}}),define("views/purchases",["l10n","linefit","urls"],function(e,t,r){var n=e.gettext;return function(e){e.start("user/purchases.html");var t=$(".linefit");t.length&&$(".linefit").linefit(2),e.z("type","root settings purchases"),e.z("title",n("My Apps")),e.z("parent",r.reverse("homepage"))}}),define("views/recommended",["l10n","log","models","urls","z"],function(e,t,r,n,o){var a=e.gettext,i=(t("recommended"),r("app"));return o.page.on("before_logout",function(){window.location.pathname===n.reverse("recommended")&&o.page.trigger("navigate",[n.reverse("homepage")])}),function(e){var t=a("Recommended");e.z("type","root app-list recommended"),e.z("title",t),e.start("app_list.html",{app_cast:i.cast,endpoint_name:"recommended",require_user:!0,source:"reco",title:t})}}),define("views/search",["capabilities","l10n","storage","tracking","urls","utils","z"],function(e,t,r,n,o,a,i){function s(e,t){return"string"==typeof e&&""!==e?e+","+t:t}function u(e){void 0!==e&&(m=e),$("ol.listing").toggleClass("expanded",e),$(".expand-toggle").toggleClass("active",m),r.setItem("expand-listings",!!e),e&&(i.page.trigger("populatetray"),$("img[data-src]:not([src])").each(function(){this.src=$(this).data("src")}))}function l(e){return e=e||{q:""},e.full_q=e.q||"",e.q=[],e.full_q.split(" ").forEach(function(t){t&&(":"===t[0]?(t=t.slice(1),"hosted"===t||"packaged"===t||"privileged"===t?e.app_type=s(e.app_type,t):"free"===t||"free-inapp"===t?e.premium_types=s(e.premium_types,t):"premium"===t||"paid"===t?e.premium_types=s(e.premium_types,"premium"):"premium-inapp"===t||"paid-inapp"===t?e.premium_types=s(e.premium_types,"premium-inapp"):"premium-other"===t||"paid-other"===t?e.premium_types=s(e.premium_types,"premium-other"):0===t.indexOf("cat=")?e.cat=t.split("=")[1]:"desktop"===t||"firefoxos"===t?e.dev=s(e.dev,t):"tablet"===t||"mobile"===t?(e.dev=s(e.dev,"android"),e.device=s(e.device,t)):0===t.indexOf("sort=")?e.sort=s(e.sort,t.split("=")[1]):"popular"===t?e.sort="downloads":"new"===t?e.sort="reviewed":0===t.indexOf("manifest=")||0===t.indexOf("manifest_url=")?e.manifest_url=t.split("=")[1]:0===t.indexOf("pro=")?e.pro=t.split("=")[1]:0===t.indexOf("languages=")||0===t.indexOf("language=")||0===t.indexOf("langs=")||0===t.indexOf("lang=")?e.languages=s(e.languages,t.split("=")[1]):0===t.indexOf("region=")?e.region=t.split("=")[1]:0===t.indexOf("offline")?e.offline="True":0===t.indexOf("online")?e.offline="False":0===t.indexOf("tarako")&&(e.tag="tarako")):e.q.push(t))}),e.q=e.q.join(" "),e.q===e.full_q&&delete e.full_q,e}function c(){return $("#search-results, #account-settings .listing").length}function p(e){return e=e?e.toLowerCase():"",function(t){switch(e){case"what does the fox say?":var r=function(e){return{name:e,author:"The Fox",previews:[],icons:{64:o.media("fireplace/img/logos/firefox-256.png")}}};t.unshift(r("Joff-tchoff-tchoffo-tchoffo-tchoff!")),t.unshift(r("Hatee-hatee-hatee-ho!")),t.unshift(r("Wa-pa-pa-pa-pa-pa-pow!")),t.unshift(r("Ring-ding-ding-ding-dingeringeding!"));break;case"hampster dance":t.forEach(function(e,t){e.icons[64]=o.media("fireplace/img/icons/eggs/h"+(t%4+1)+".gif")});break;case"rick fant rolled":t.forEach(function(e){e.url="http://www.youtube.com/watch?v=oHg5SJYRHA0"})}return t}}var d=a._pd,f=t.gettext;$("#site-header").on("click",".header-button.cancel",d(function(){$("#search-q").val("")})).on("click",".header-button, .search-clear",d(function(){$(this).hasClass("search-clear")&&$("#search-q").val("").trigger("focus")}));var m=!!r.getItem("expand-listings");return null===m&&(m=e.widescreen()),i.body.on("click",".expand-toggle",d(function(){u(m=!m),n.trackEvent("View type interactions","click",m?"Expanded view":"List view"),i.doc.trigger("scroll")})).on("submit","form#search",function(e){e.stopPropagation(),e.preventDefault();var t=$("#search-q"),r=t.val();if("do a barrel roll"===r)i.body.toggleClass("roll");else{if(":debug"===r)return i.page.trigger("navigate",o.reverse("debug")),void t.val("");if(":"===r||":help"===r)return window.open("https://github.com/mozilla/fireplace/wiki/QuickSearch-(PotatoSearch™)"),void t.val("")}t.trigger("blur"),i.page.trigger("search",{q:r})}),i.page.on("loaded",function(){var e=$("#search-q");e.val(i.context.search),c()&&u(m)}).on("reloaded_chrome",function(){c()&&u(m)}).on("loaded_more",function(){i.page.trigger("populatetray"),i.page.find(".total-results").text(i.page.find(".item.app").length)}).on("search",function(e,t){return e.preventDefault(),i.page.trigger("navigate",[a.urlparams(o.reverse("search"),t),{search_query:t.q}])}),function(e,t,r){r=l(r),"sort"in r&&"relevancy"===r.sort&&delete r.sort,e.z("type","search");var a=r.full_q||r.q;e.z("search",a),e.z("title",a||f("Search Results")),"hampster dance"===r.q&&(r.q="dance",new Audio(o.media("fireplace/hampster.ogg")).play()),e.start("search/main.html",{endpoint_name:"search",params:r,processor:p(a)}).done(function(){var t=e.results.searchresults;r.manifest_url&&1===t.objects.length&&i.page.trigger("divert",[o.reverse("app",[t.objects[0].slug])+"?src="+r.src]),t.objects.length||n.trackEvent("No results found","Search",a)})}}),define("views/settings",["cache","jquery","linefit","l10n","notification","requests","urls","user","utils","z"],function(e,t,r,n,o,a,i,s,u,l){function c(){var e=t(".account-settings");e.length&&(e.find("[name=display_name]").val(s.get_setting("display_name")),e.find("[name=email]").val(s.get_setting("email")),e.find("input#enable_recommendations").prop("checked",s.get_setting("enable_recommendations",!0)),l.page.trigger("reload_chrome"))}var p=u._pd,d=n.gettext,f=o.notification;return l.page.on("submit","form.account-settings",p(function(r){if(r.stopPropagation(),s.logged_in()){var n=t(this),o={display_name:n.find("#display_name").val(),enable_recommendations:n.find("#enable_recommendations").prop("checked")};s.update_settings(o),a.patch(i.api.url("settings"),o).done(function(){o.enable_recommendations?l.body.addClass("show-recommendations"):l.body.removeClass("show-recommendations"),c(),f({message:d("Settings saved")}),e.bust(i.api.url("settings")),e.bust(i.api.url("consumer_info"))}).fail(function(){f({message:d("Settings could not be saved")})})}})).on("logged_in",c),function(e){e.start("settings/main.html"),t(".linefit").linefit(2),e.z("type","root settings"),e.z("title",d("Account Settings")),e.z("parent",i.reverse("homepage"))}}),define("views/terms",["l10n"],function(e){var t=e.gettext;return function(e){e.start("terms.html"),e.z("type","leaf"),e.z("title",t("Terms of Use"))}}),define("assert",["underscore"],function(e){function t(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(){t.apply(this,arguments)}function n(e,r,n){try{t(e==r)}catch(o){throw new Error(n||'"'+e+'" did not match "'+r+'"')}}function o(e,r,n){try{t(e===r)}catch(o){throw new Error(n||'"'+e+'" did not exactly match "'+r+'"')}}function a(r,n,o){try{t(e.isEqual(r,n))}catch(a){throw new Error(o?o:JSON.stringify(r)+" did not match "+JSON.stringify(n))}}function i(t,r){return e.isString(t)||e.isArray(t)?-1!==t.indexOf(r):e.isObject(t)?r in t:e.contains(t,r)}function s(e,r,n){n=n||JSON.stringify(e)+" does not contain "+JSON.stringify(r),t(i(e,r),n)}function u(e,r,n){n=n||JSON.stringify(e)+" contains "+JSON.stringify(r),t(!i(e,r),n)}function l(t,r,n,o){var a={},i=e.object(e.pairs(r).map(function(t){var r=t[0];return t[0]+=e.uniqueId("_"),a[r]=t[0],e.isFunction(t[1])?t[1]=t[1]():e.isArray(t[1])&&(t[1]=e.extend({},t[1])),t})),s=require.config({context:e.uniqueId(),map:{"*":a},baseUrl:"/media/js/",paths:requirejs.s.contexts._.config.paths,shim:requirejs.s.contexts._.config.shim});e.each(i,function(e,t){define(t,e)}),s([t],function(e){try{n.apply(this,[e,r])}catch(t){o&&o(t)}})}return{assert:t,ok_:r,eq_:n,eeq_:o,feq_:a,contains:s,disincludes:u,mock:l}}),define("views/tests",{}),function(){var e=window.routes=[{pattern:"^/(app.html|index.html)?$",view_name:"homepage"},{pattern:"^/app/([^/<>\"']+)/?$",view_name:"app"},{pattern:"^/app/([^/<>\"']+)/abuse$",view_name:"app/abuse"},{pattern:"^/app/([^/<>\"']+)/privacy$",view_name:"app/privacy"},{pattern:"^/app/([^/<>\"']+)/ratings$",view_name:"app/ratings"},{pattern:"^/app/([^/<>\"']+)/ratings/add$",view_name:"app/ratings/add"},{pattern:"^/app/([^/<>\"']+)/ratings/edit$",view_name:"app/ratings/edit"},{pattern:"^/app/([^/<>\"']+)/ratings/([^/<>\"']+)$",view_name:"app/ratings/rating"},{pattern:"^/app/([^/<>\"']+)/receipt$",view_name:"app/receipt"},{pattern:"^/categories$",view_name:"categories"},{pattern:"^/category/([^/<>\"']+)$",view_name:"category"},{pattern:"^/credits$",view_name:"credits"},{pattern:"^/debug$",view_name:"debug"},{pattern:"^/debug/features$",view_name:"debug_features"},{pattern:"^/feed/app/([^/<>\"']+)/?$",view_name:"feed/feed_app"},{pattern:"^/feed/collection/([^/<>\"']+)/?$",view_name:"feed/feed_collection"},{pattern:"^/feed/editorial/([^/<>\"']+)/?$",view_name:"feed/feed_brand"},{pattern:"^/feed/shelf/([^/<>\"']+)/?$",view_name:"feed/feed_shelf"},{pattern:"^/feedback$",view_name:"feedback"},{pattern:"^/fxa-authorize$",view_name:"fxa_authorize"},{pattern:"^/fxa-migration$",view_name:"fxa_popup"},{pattern:"^/new$",view_name:"new"},{pattern:"^/newsletter-signup$",view_name:"newsletter_signup"},{pattern:"^/popular$",view_name:"popular"},{pattern:"^/privacy-policy$",view_name:"privacy"},{pattern:"^/purchases$",view_name:"purchases"},{pattern:"^/recommended$",view_name:"recommended"},{pattern:"^/search/?$",view_name:"search"},{pattern:"^/settings$",view_name:"settings"},{pattern:"^/terms-of-use$",view_name:"terms"},{pattern:"^/tests$",view_name:"tests"}];define("routes",["views/homepage","views/app","views/app/abuse","views/app/privacy","views/app/ratings","views/app/ratings/rating","views/app/ratings/add","views/app/ratings/edit","views/app/receipt","views/categories","views/category","views/credits","views/debug","views/debug_features","views/feed/feed_app","views/feed/feed_collection","views/feed/feed_brand","views/feed/feed_shelf","views/feedback","views/fxa_authorize","views/fxa_popup","views/new","views/newsletter_signup","views/popular","views/privacy","views/purchases","views/recommended","views/search","views/settings","views/terms","views/tests"],function(){for(var t=0;t<e.length;t++){var r=e[t],n=require("views/"+r.view_name);r.view=n}return e})}(),define("views/not_found",["l10n"],function(e){var t=e.gettext;return function(e){e.start("errors/404.html"),e.z("type","leaf"),e.z("title",t("Not Found"))}}),define("views",["builder","log","routes","underscore","utils","views/not_found","z"],function(e,t,r,n,o,a,i){function s(e){var t,o;(t=e.indexOf("#"))>=0&&(e=e.substr(0,t)),(o=e.indexOf("?"))>=0&&(e=e.substr(0,o)),"/"!=e[0]&&(e="/"+e),"/"!==e&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),c.log("Routing",e);for(var i in r){var s=r[i];if(void 0!==s){var u=s.regexp.exec(e);if(u)try{return[s.view,n.rest(u)]}catch(l){return c.error("Route matched but view not initialized!",l),null}}}return c.warn("Failed to match route for "+e),[a,null]}function u(t,r,n){p=arguments;var a=e.getBuilder();return t(a,r,o.getVars(),n),a.finish(),a}function l(){return i.win.trigger("unloading"),c.log("Reloading current view"),u.apply(this,p)}var c=t("views");r=r.map(function(e){return e.regexp=new RegExp(e.pattern),e});var p;return{build:u,match:s,reload:l,routes:r}}),define("navigation",["capabilities","l10n","log","notification","settings","underscore","utils","views","z"],function(e,t,r,n,o,a,i,s,u){function l(e){if(e.indexOf("?")<0)return e;var t=a.pick(i.querystring(e),o.param_whitelist),r=i.urlencode(t);return i.baseurl(e)+(r.length?"?"+r:"")}function c(){return navigator.onLine||e.phantom?!0:(n.notification({message:k("No internet connection")}),!!o.offline_capable)}function p(e,t,r){if(r){b.log("Navigation started: ",e);var n=s.match(e);if(null!==n){if(!n[1]&&_)return void(window.location.href=e);_&&u.win.trigger("navigating",[t]),s.build(n[0],n[1],r.params),_=!0,r.type=u.context.type,r.title=u.context.title;var o=0;(r.preserveScroll||t)&&r.scrollTop&&(r.docHeight&&(u.body.css("min-height",r.docHeight),u.page.one("loaded",function(){u.body.css("min-height","")})),o=r.scrollTop),v&&window.clearTimeout(v),v=window.setTimeout(function(){b.log("Setting scroll to",o),window.scrollTo(0,o)},250),r.path=l(r.path);for(var i=0;i<y.length;i++)if(y[i].path===r.path||"search"===r.type&&y[i].type===r.type){b.log("Navigation loop truncated:",y.slice(0,i)),y=y.slice(i+1);break}if(y.length||(y=[{path:"/",type:"root"}]),"root"===r.type)y=[r],$("#search-q").val("");else if(t&&y[0].path===r.path?(b.log("Shifting stack (used → or ← button)"),y.shift()):(b.log("Pushed state onto stack: ",r.path),y.unshift(r)),u.context.parent){var c=a.indexOf(a.pluck(y,"path"),u.context.parent);c>1?(y.splice(1,c-1),b.log("Closing navigation loop to parent (1 to "+(c-1)+")")):-1===c&&(y.splice(1,0,{path:u.context.parent}),b.log("Injecting parent into nav stack at 1")),b.log("New stack size: "+y.length)}}}}function d(){return c()?void(y.length>1?(y.shift(),history.replaceState(y[0],!1,y[0].path),p(y[0].path,!0,y[0])):b.warn("attempted to go ← at root!")):void b.log("← aborted; canNavigate is falsey.")}function f(e){var t=e.getAttribute("href")||e.getAttribute("action");return!t||"http"===t.substr(0,4)||"mailto:"===t.substr(0,7)||"javascript:"===t.substr(0,11)||"#"===t[0]||-1!==t.indexOf("?modified=")||e.getAttribute("target")||"external"===e.getAttribute("rel")}function m(e){b.log("Opening modal",e),y[0].closeModalName=e,history.replaceState(y[0],!1,y[0].path),history.pushState(null,e,"#"+e);var t=window.location.href+"#"+e;y.unshift({path:t,type:"modal",name:e})}function g(e){y.shift(),delete y[0].closeModalName,u.win.trigger("closeModal",e)}function h(e){"modal"===y[0].type&&y[0].name===e?(b.log("Closing modal",e),history.back()):b.log("Attempted to close modal",e,"that was not open")}var v,b=r("nav"),k=t.gettext,y=[{path:"/",type:"root"}],_=!1;return u.page.on("navigate divert",function(e,t,r,n){if(b.log("Received "+e.type+" event:",t),t){var o="divert"===e.type,a={params:r,path:t},i=window.pageYOffset,s=history.pushState;if(n&&(a.preserveScroll=n,a.scrollTop=i,a.docHeight=u.doc.height()),!c())return void b.log("Navigation aborted; canNavigate is falsey.");y.length&&i!==y[0].scrollTop&&(y[0].scrollTop=i,b.log("Updating scrollTop with replaceState"),history.replaceState(y[0],!1,y[0].path)),(!_||o)&&(b.log("Using replaceState due to "+(_?"diversion":"fresh load")),s=history.replaceState),o&&y.shift(),s.apply(history,[a,!1,t]),p(t,!1,a)}}),u.body.on("click","a",function(e){var t=this.getAttribute("href"),r=$(this),n=r.data("preserveScroll"),o="undefined"!=typeof n&&n!==!1;e.metaKey||e.ctrlKey||0!==e.button||f(this)||(e.preventDefault(),e.stopPropagation(),u.page.trigger("navigate",[t,r.data("params")||{path:t},o]))}),u.win.on("popstate",function(e){if(_){var t=e.originalEvent.state;t&&(t.closeModalName?(b.log("popstate closing modal"),g(t.closeModalName)):(b.log("popstate navigate"),p(t.path,!0,t)))}}).on("submit","form",function(){return b.error("Form submissions are not allowed."),!1}),{back:d,modal:m,closeModal:h,stack:function(){return y
},navigationFilter:f,extract_nav_url:l}}),define("tracking_events",["jquery","log","navigation","settings","tracking","z"],function(e,t,r,n,o,a){function i(e){o.trackEvent.apply(this,e),f.push(e)}function s(e){i(["Launch app",e.payment_required?"Paid":"Free",e.slug])}function u(t){return t.closest(".featured-app").length?m:t.closest(".feed-brand").length?g:t.closest(".feed-collection").length?e(".feed-collection .button.product").index(t):e(".button.product").index(t)}function l(e,t){i(["Click to install app",e.receipt_required?"paid":"free",e.name+":"+e.id,u(t)])}function c(e,t){i(["Successful app install",e.receipt_required?"paid":"free",e.name+":"+e.id,u(t)])}function p(e,t){i(["App failed to install",e.receipt_required?"paid":"free",e.name+":"+e.id,u(t)])}var d=t("tracking_events"),f=[],m=999999999,g=999999998,h=n.package_version;return h?o.setVar(15,"Package Version",h):o.setVar(15,"Package Version",0),a.body.on("click",".navbar > li > a",function(){i(["Nav Click","click",e(this).parent().data("tab")])}),a.page.on("click",".feed-collection .view-all",function(){i(["View Collection","click",e(this).closest(".feed-collection").data("tracking-slug")])}).on("click",".feed-collection .app-link",function(){i(["View App from Collection Element","click",e(this).closest(".feed-collection").data("tracking-slug")])}).on("click",".featured-app.app-link",function(){i(["View App from Featured App Element","click",e(this).data("tracking-slug")])}).on("click",".feed-brand .fanchor, .feed-brand .view-all",function(){i(["View Branded Editorial Element","click",e(this).closest(".feed-brand").data("tracking-slug")])}).on("click",".feed-brand .app-link",function(){i(["View App from Branded Editorial Element","click",e(this).closest(".feed-brand").data("tracking-slug")])}).on("click",".op-shelf.fanchor",function(){i(["View Operator Shelf Element","click",e(this).data("tracking-slug")])}).on("click",".shelf-landing a.mkt-tile",function(){i(["View App from Operator Shelf Element","click",e(this).closest(".shelf-landing").data("tracking-slug")])}).on("click",".show-toggle",function(){i(["App view interactions","click","Toggle description"])}),o.actions_enabled&&a.page.on("click",".detail .support li a.button",function(){i(["App view interaction","click",this.parentNode.getAttribute("data-tracking")])}),{track:i,track_log:f,track_search_term:function(e){for(var t=r.stack(),n=0;n<t.length;n++){var a=t[n];if(a.params&&a.params.search_query)return d.log("Found search in nav stack, tracking search term:",a.params.search_query),void o[e?"setPageVar":"setVar"](13,"Search query",a.params.search_query)}d.log("No associated search term to track.")},track_app_launch:s,track_app_install_begin:l,track_app_install_success:c,track_app_install_fail:p}}),define("apps_buttons",["apps","cache","capabilities","defer","l10n","log","login","models","notification","payments","requests","settings","tracking_events","urls","user","utils","views","z"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h,v){function b(e,t,r){k(e,t),e.addClass(r)}function k(e,t){e.removeClass("purchasing installing error spinning"),t=t||e.data("old-text"),e.find("em").text(t)}function y(e){return function(t){t.preventDefault(),t.stopPropagation();var r=$(this),n=A.lookup(r.closest("[data-slug]").data("slug"))||r.data("product");e.call(this,n)}}function _(o,a){function s(){if(d.track_search_term(),d.track_app_install_begin(o,O),O.data("old-text",O.find("em").text()).addClass("spinning"),o.is_packaged||o.payment_required||(y=setTimeout(function(){O.hasClass("spinning")&&(F.log("Spinner timeout for ",o.name),k(O),u.notification({message:E("Sorry, we had trouble fetching this app's data. Please try again later.")}))},25e3)),m.has_installed(o.id)&&!o.receipt_required)return F.log("Receipt not required (skipping record step) for",o.name),v();var e=f.api.url("record_"+(o.receipt_required?"paid":"free")),t={app:o.id,chromeless:+r.chromeless};return o.receipt_required?void c.post(e,t).done(function(e){return e.error?(F.log("Server returned error: "+e.error),void L.reject()):void v({data:{receipts:[e.receipt]}})}).fail(function(){u.notification({message:E("Install failed. Please try again later.")}),F.error("Could not generate receipt or record install for",o.name),L.reject()}):void v().done(function(){c.post(e,t)})}function v(r){return e.install(o,r||{}).done(function(e){m.update_install(o.id),t.bust(f.api.url("installed")),L.resolve(e,o,O)}).fail(function(e){e&&u.notification({message:e}),F.log("App install deferred was rejected for ",o.name),L.reject()})}if(F.log("Install requested for",o.name),o.receipt_required="free"!==o.premium_type&&"free-inapp"!==o.premium_type&&!p.simulate_nav_pay,o.receipt_required&&!m.logged_in())return F.log("Install suspended; user needs to log in"),i.login().done(function(){var e=w(o.manifest_url);_(o,e)}).fail(function(){F.log("Install cancelled; login aborted"),u.notification({message:E("Payment cancelled.")})});o.user||(F.warn("User data not available for",o.name),o.user={purchased:!1,installed:!1,developed:!1});var y,L=n.Deferred(),O=a||$(this);return m.has_purchased(o.id)&&(o.payment_required=!1),o.payment_required?(F.log("Starting payment flow for",o.name),O.data("old-text",O.find("em").text()),b(O,E("Purchasing"),"purchasing"),l.purchase(o).then(function(){F.log("Purchase flow completed for",o.name),b(O,E("Install"),"purchased"),O.data("old-text",O.find("em").text()),m.update_purchased(o.id),t.bust(f.api.url("installed")),t.attemptRewrite(function(e){return e===f.api.params("reviews",{app:o.slug})},function(e){return e.user.can_rate=!0,e}),L.always(function(){h.reload()}),s()},function(){u.notification({message:E("Payment cancelled.")}),F.log("Purchase flow rejected for",o.name),L.reject()})):(F.log("Starting app installation for",o.name),s()),L.then(function(){y&&clearTimeout(y);var e=$("#installed"),t=e.find("."+g.browser());t.length&&(e.show(),t.show()),x(o.manifest_url),d.track_app_install_success(o,O),F.log("Successful install for",o.name)},function(){k(O),d.track_app_install_fail(o,O),F.log("Unsuccessful install for",o.name)}),L.promise()}function w(e){return $('.button[data-manifest_url="'+e.replace(/"/,'\\"')+'"]')}function x(t,r){b(r||w(t),E("Open"),"launch install"),e.getInstalled()}function L(){setTimeout(function(){v.apps.forEach(function(e){$button=w(e),$button.length&&x(null,$button)})})}function O(){e.getInstalled(),$(".button.product").each(function(e,t){var r=$(t);-1===v.apps.indexOf(r.data("manifest_url"))&&(r.hasClass("launch")&&k(r,E("Install")),r.removeClass("launch"))})}var F=a("buttons"),E=o.gettext,A=s("app"),C=y(function(t){e.launch(t.manifest_url),d.track_app_launch(t)});return v.page.on("click",".product.launch",C).on("click",".button.product:not(.launch):not(.incompatible)",y(_)),{install:_,mark_btns_as_installed:L,mark_btns_as_uninstalled:O}}),define("mobilenetwork",["l10n","log","regions","tracking","user","utils"],function(e,t,r,n,o,a){function i(e,t,n){l.tagged("getNetwork").log("Trying MCC = "+e+", MNC = "+t+", SPN = "+n),e=(+e||0)+"",t=(+t||0)+"",n=(n||"").toLowerCase(),"260"===e&&"2"===t[0]&&(t=2),"732"===e&&"1"===t[0]&&(t=123),"214"===e&&("5"===t[0]&&(t=5),"7"===t[0]&&(t="7")),e=+e||0,t=+t||0;var o=d[e];return"object"==typeof o&&(o=o[t],"object"==typeof o&&(o=o[n]||o.__default)),{region:r.MOBILE_CODES[e]||null,carrier:o||null}}function s(e,t){function r(e){var t=(e||"-").split("-");return t.length<2?null:{mcc:t[0],mnc:t[1],spn:t[2]}}var n=r(e.lastKnownHomeNetwork||e.lastKnownNetwork);return t.log("lastKnownNetwork: "+e.lastKnownNetwork+", lastKnownHomeNetwork: "+e.lastKnownHomeNetwork),n?(t.log("Using network: "+n),n):(t.log("Unknown network."),{mcc:void 0,mnc:void 0,spn:void 0})}function u(e,t){function r(){return k.mcc||k.mnc||k.spn?[{mcc:k.mcc,mnc:k.mnc,spn:k.spn}]:void 0}function u(){try{return JSON.parse(k.mccs)}catch(e){}}function p(){try{if(e.mozMobileConnections){_.log("navigator.mozMobileConnections available");for(var t=[],r=e.mozMobileConnections,n=0;n<r.length;n++)t.push(s(r[n],_));return t}}catch(o){_.warn("Error accessing navigator.mozMobileConnections:",o)}}function d(){try{if(e.mozMobileConnection)return _.log("navigator.mozMobileConnection available"),[s(e.mozMobileConnection,_)]}catch(t){_.warn("Error accessing navigator.mozMobileConnection:",t)}}function f(){return _.log("navigator.mozMobileConnection(s) unavailable and no GET parameter provided"),[]}var m,g,h,v,b,k=(t||a).getVars(),y=k.carrier||o.get_setting("carrier")||null,_=l.tagged("detectMobileNetwork"),w={};e=e||window.navigator,w.carrier_sim=null,w.region_sim=null;var x=[["GET mcc/mnc",r],["GET mccs",u],["dual SIM",p],["SIM",d],["None",f]];for(v=0;v<x.length&&!m;v++)h=x[v][0],m=x[v][1]();if(m.length)for(v=0;v<m.length;v++){b=m[v],_.log("mccs["+v+"]:",b);var L=i(b.mcc,b.mnc,b.spn);if(y!==L.carrier&&c.log("Carrier changed by "+h+":",y,"→",L.carrier),L.region){g=w.region_sim=L.region,y=w.carrier_sim=L.carrier;break}}o.update_settings(w),n.setVar(11,"region",g)}var l=t("mobilenetwork"),c=t.persistent("mobilenetwork","change"),p=(e.gettext,["america_movil","carrierless","china_unicom","congstar","deutsche_telekom","etisalat","grameenphone","hutchinson_three_group","kddi","kt","megafon","mtn","qtel","singtel","smart","sprint","telecom_italia_group","telefonica","telenor","tmn","vimpelcom"]),d={202:{5:"deutsche_telekom"},214:{5:"telefonica",7:"telefonica"},216:{1:"telenor",20:"telenor",30:"deutsche_telekom",70:"deutsche_telekom"},220:{1:"telenor",2:"telenor"},230:{1:"deutsche_telekom",2:"telefonica",10:"telefonica"},231:{2:"deutsche_telekom",4:"deutsche_telekom",6:"telefonica"},232:{2:"telefonica",8:"telefonica"},234:{2:"telefonica",10:"telefonica",11:"telefonica",30:"deutsche_telekom"},260:{2:"deutsche_telekom"},262:{1:{__default:"deutsche_telekom",congstar:"congstar","congstar.de":"congstar"},2:"deutsche_telekom",7:"o2"},297:{1:"telenor",2:"deutsche_telekom",4:"deutsche_telekom"},310:{26:"deutsche_telekom",160:"deutsche_telekom",260:"deutsche_telekom",490:"deutsche_telekom"},334:{2:"america_movil",3:"telefonica",20:"america_movil"},440:{7:"kddi",8:"kddi",50:"kddi",51:"kddi",52:"kddi",53:"kddi",54:"kddi",55:"kddi",56:"kddi",70:"kddi",71:"kddi",72:"kddi",73:"kddi",74:"kddi",75:"kddi",76:"kddi",77:"kddi",78:"kddi",79:"kddi",88:"kddi",89:"kddi"},460:{1:"china_unicom"},470:{1:"grameenphone"},655:{10:"mtn"},704:{3:"telefonica"},706:{4:"telefonica"},710:{3:"telefonica"},712:{4:"telefonica"},714:{2:"telefonica",3:"america_movil"},716:{6:"telefonica",10:"america_movil"},722:{10:"telefonica",70:"telefonica",310:"america_movil",320:"america_movil",330:"america_movil"},724:{6:"telefonica",10:"telefonica",11:"telefonica",23:"telefonica"},730:{2:"telefonica"},732:{102:"telefonica",123:"telefonica"},734:{4:"telefonica"},740:{1:"america_movil"},744:{2:"america_movil",4:"telefonica"},748:{7:"telefonica",10:"america_movil"}};return u(navigator),{carriersRegions:d,carriers:p,detectMobileNetwork:u,getNetwork:i,regions:r.MOBILE_CODES}}),define("consumer_info",["defer","log","mobilenetwork","requests","settings","urls","user","user_helpers","z"],function(e,t,r,n,o,a,i,s,u){function l(e){d||s.set_region_geoip(e.region),i.logged_in()&&(void 0!==e.apps&&i.update_apps(e.apps),i.update_settings({enable_recommendations:e.enable_recommendations}))}function c(t){var r=e.Deferred();if(!d){var o=u.body.data("region");o&&(s.set_region_geoip(o),d=!0)}return t||!d||i.logged_in()?n.get(a.api.url("consumer_info")).then(l,function(){p.error("Failed to retrieve consumer info."),s.set_region_geoip("restofworld")}).always(function(){r.resolve()}):r.resolve(),r.promise()}var p=t("consumer_info"),d=!!s.region(void 0,!0);return{fetch:c,promise:c()}}),define("compatibility_filtering_select",["compatibility_filtering","jquery","log","views","z"],function(e,t,r,n,o){var a=r("compatibility_filtering_select");o.body.on("change","#compatibility_filtering",function(){var r=t(this[this.selectedIndex]).val(),o=t("#compatibility_filtering_endpoint_name").val();o?(e.set_preference(o,r),n.reload()):a.error("Tried to change filtering preferences without an endpoint")})}),define("image-deferrer",["underscore","urls","z"],function(e,t,r){function n(e){if(!e)return{x:0,y:0};var t={x:e.offsetLeft,y:e.offsetTop},r=n(e.offsetParent);for(var o in r)t[o]+=r[o];return t}function o(e){if(e=e||window,null!==e.pageXOffset)return{x:e.pageXOffset,y:e.pageYOffset};var t=e.document;return"CSS1Compat"==document.compatMode?{x:t.documentElement.scrollLeft,y:t.documentElement.scrollTop}:{x:t.body.scrollLeft,y:t.body.scrollTop}}function a(t,a){function i(){var e=o().y,t=r.win.height(),a=e-.5*t;a=0>a?0:a;var i=e+1.5*t,u=0,p=0,d=[];s.each(function(e,t){var o=n(t).y;if(o>a&&i>o)if(u++,l.push(t),t.classList.contains("deferred-background")){t.classList.remove("deferred-background");var s=t.getAttribute("data-src");t.style.backgroundImage="url("+s+")",c.push(s),++p==u&&r.page.trigger("images_loaded")}else{var f=t.cloneNode(!1);f.classList.remove("deferred"),f.onload=function(){null!==t.parentNode&&(t.parentNode.replaceChild(f,t),setTimeout(function(){f.style.opacity=1},50),c.push(f.src),++p==u&&r.page.trigger("images_loaded"))},f.src=f.getAttribute("data-src"),f.style.opacity=.5}else d.push(t)}),0===u&&r.page.trigger("images_loaded"),s=$(d)}var s,u,l=[],c=[],p=function(){s&&i()};p=a?e.debounce(p,a||200):e.throttle(p,t||100),r.win.on("scroll resize",p);var d=function(e){u=e.selector,s=l.length?e.filter(function(e){return-1===l.indexOf(s[e])}):e,p()},f=function(){d($(u))},m=function(){l=[],f()};r.win.on("unloading",m);var g=function(){return c};return{clear:m,refresh:f,setImages:d,getSrcsAlreadyLoaded:g}}return{Deferrer:a}}),define("keys",[],function(){return{SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,ENTER:13,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,HOME:36,END:35,COMMAND:91,WINDOWS_RIGHT:92,COMMAND_RIGHT:93,WINDOWS_LEFT_OPERA:219,WINDOWS_RIGHT_OPERA:220,APPLE:24}}),define("shothandles",["z"],function(e){function t(e,t){function r(){n.hide(),o.hide(),e.hasNext()&&o.show(),e.hasPrev()&&n.show()}t.find(".prev, .next").remove();var n=$('<a href="#" class="shandle prev"></a>'),o=$('<a href="#" class="shandle next"></a>');e.element.addEventListener("fsmoveend",r),r(),t[0].slider=e,t.append(n,o)}return e.body.on("click",".shandle",function(e){e.preventDefault();var t=this.parentNode.slider;this.classList.contains("prev")?t.toPrev():t.toNext()}),{attachHandles:t}}),define("lightbox",["keys","models","navigation","utils","shothandles","tracking","underscore","z"],function(e,t,r,n,o,a,i,s){function u(){console.log("Opening lightbox"),"leaf"===s.context.type?a.trackEvent("App view interactions","click","Screenshot view"):"search"===s.context.type&&a.trackEvent("Category view interactions","click","Screenshot view");var e=$(this),n=e.closest("li").index(),o=e.closest(".tray"),i=o.prev();if(i.hasClass("mkt-tile")){var u=t("app").lookup(i.data("slug")),p=u.id;p==m&&h||(m=p,g=u.previews,l()),r.modal("lightbox"),s.body.addClass("overlayed"),v.show(),setTimeout(function(){h.moveToPoint(n),c(),v.addClass("show")},0)}}function l(){k.empty(),i.each(g,function(e){var t=$('<li class="loading"><span class="throbber">');if(k.append(t),"video/webm"==e.filetype){var r=$('<video src="'+e.image_url+'" controls></video>');t.removeClass("loading"),t.append(r)}else{var n=new Image;n.onload=function(){t.removeClass("loading"),t.append(n)},n.onerror=function(){t.removeClass("loading"),t.append('<b class="err">&#x26A0;</b>')},n.src=e.image_url}}),k.length&&(h=Flipsnap(k[0]),h.element.addEventListener("fsmoveend",p,!1),o.attachHandles(h,b))}function c(){h&&(h.distance=b.width(),h.refresh())}function p(){$("video").each(function(){this.pause()})}function d(){r.closeModal("lightbox"),f()}function f(){s.body.removeClass("overlayed"),p(),v.removeClass("show"),setTimeout(function(){v.hide()},500),h&&h.element&&(h.element.removeEventListener("fsmoveend",p),h.destroy(),h=null)}var m,g,h,v=$(document.getElementById("lightbox")),b=v.find("section"),k=v.find(".content");v.addClass("shots"),s.win.on("keydown.lightboxDismiss",function(t){switch(t.which){case e.ESCAPE:v.hasClass("show")&&(t.preventDefault(),d());break;case e.LEFT:h&&(t.preventDefault(),h.toPrev());break;case e.RIGHT:h&&(t.preventDefault(),h.toNext())}}),s.win.on("resize",i.debounce(c,200)),s.page.on("click",".tray ul a",n._pd(u)),v.on("click",function(e){$(e.target).is("#lightbox")&&(d(),e.preventDefault())}).on("dragstart",function(e){e.preventDefault()}),v.find(".close").on("click",n._pd(d)),s.win.on("closeModal",function(e,t){"lightbox"===t&&f()})}),function(e){define("marketplace-elements",["document-register-element"],function(){return function(){return function(){function e(e,t){return Array.prototype.forEach.call(e,t)}function t(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r]))return e[r]}function r(e,t){return Array.prototype.map.call(e,t)}var n=window.gettext||function(e){return e},o=function(){};o.prototype=Object.create(HTMLElement.prototype,{attributeChangedCallback:{value:function(e,t,r){if(this.attributeClasses.hasOwnProperty(e)){var n=this.attributeClasses[e];null===r?this.classList.remove(n):this.classList.add(n)}}},attributeClasses:{value:{}},createdCallback:{value:function(){var e=this;Object.keys(this.attributeClasses).forEach(function(t){var r=e.attributeClasses[t];e.hasAttribute(t)&&r&&e.classList.add(r),e.__defineGetter__(t,function(){return e.getAttribute(t)||e.hasAttribute(t)}),e.__defineSetter__(t,function(r){null===r||r===!1?e.removeAttribute(t):e.setAttribute(t,r||!0)})})}}});document.registerElement("mkt-banner",{prototype:Object.create(o.prototype,{attributeClasses:{value:{success:"mkt-banner-success",dismiss:null}},createdCallback:{value:function(){o.prototype.createdCallback.call(this),this.classList.add("mkt-banner"),this.success||this.classList.add("mkt-banner-firefox"),this.rememberDismissal&&this.dismissed&&this.dismissBanner(),this.html(this.innerHTML)}},html:{value:function(e){var t=this,r=document.createElement("div");if(r.classList.add("mkt-banner-content"),r.innerHTML=e,!this.undismissable){var o=document.createElement("a");o.classList.add("close"),o.href="#",o.textContent="",o.title=n("Close"),o.addEventListener("click",function(e){e.preventDefault(),t.dismissBanner()}),r.appendChild(o)}this.innerHTML="",this.appendChild(r)}},dismissed:{get:function(){return this.storage.getItem(this.storageKey)}},dismissBanner:{value:function(){this.rememberDismissal&&this.storage.setItem(this.storageKey,!0),this.parentNode.removeChild(this)}},rememberDismissal:{get:function(){return"remember"===this.dismiss}},storage:{get:function(){return require("storage")}},storageKey:{get:function(){return"hide_"+this.id.replace(/-/g,"_")}},undismissable:{get:function(){return"off"===this.dismiss}}})}),document.registerElement("mkt-login",{prototype:Object.create(o.prototype,{createdCallback:{value:function(){if(this.isLink){var e=document.createElement("a");e.href="#",e.classList.add("persona"),e.textContent=this.textContent,this.innerHTML="",this.appendChild(e)}}},isLink:{get:function(){return this.hasAttribute("link")}}})}),document.registerElement("mkt-segmented",{prototype:Object.create(o.prototype,{createdCallback:{value:function(){function e(){o!=this&&(o&&o.removeAttribute("selected"),this.setAttribute("selected",""),o=this,n.selectedIndex=this.index,t.dispatchEvent(new Event("change")))}var t=this,n=this.querySelector("select");this.select=n,n.classList.add("mkt-segmented-select"),this.classList.add("mkt-segmented");var o,a=r(n.options,function(t,r){var n=document.createElement("button");return n.index=r,n.classList.add("mkt-segmented-button"),n.textContent=t.textContent,n.addEventListener("click",e),n});e.call(a[n.selectedIndex]),a.forEach(function(e){t.appendChild(e)})}},value:{get:function(){return this.select.value}}})}),document.registerElement("mkt-tab-control",{prototype:Object.create(o.prototype,{createdCallback:{value:function(){function e(){o!=this&&(o&&o.removeAttribute("selected"),this.setAttribute("selected",""),o=this,n.selectedIndex=this.index,t.dispatchEvent(new Event("change")))}var t=this,n=this.querySelector("select");this.select=n,n.classList.add("mkt-tab-control-select"),this.classList.add("mkt-tab-control");var o,a=r(n.options,function(t,r){var n=document.createElement("button");return n.index=r,n.classList.add("mkt-tab-control-button"),n.textContent=t.textContent,n.addEventListener("click",e),n});e.call(a[n.selectedIndex]);var i,s=t.getAttribute("control");s&&(i=document.getElementById(s),i.controller=t.id,i.setAttribute("current",t.value),t.addEventListener("change",function(){i.setAttribute("current",t.value)})),a.forEach(function(e){t.appendChild(e)})}},value:{get:function(){return this.select.value}}})}),document.registerElement("mkt-tabs",{prototype:Object.create(o.prototype,{createdCallback:{value:function(){var t=this,r=t.querySelectorAll("section");t.tabs=r;var n=t.getAttribute("current");t.classList.add("mkt-tabs"),e(r,function(e){e.classList.add("mkt-tab"),e.getAttribute("name")==n&&e.classList.add("mkt-tab-active")})}},attributeChangedCallback:{value:function(e,r,n){function o(e){return t(a.tabs,function(t){return t.getAttribute("name")==e})}var a=this;"current"==e&&(r&&o(r).classList.remove("mkt-tab-active"),n&&(o(n).classList.add("mkt-tab-active"),a.dispatchEvent(new Event("change"))))}}})})}(),window.document.registerElement}.apply(e,arguments)})}(this),define("navbar",["categories","jquery","log","navigation","nunjucks","settings","underscore","urls","user","z"],function(e,t,r,n,o,a,i,s,u,l){function c(){function e(e,t){e.addClass("active"),t.removeClass("active")}function r(e,t){var r=500;e.data("fitted")&&(r=0),setTimeout(function(){f(t)},r)}var n=t(".nav-mkt"),o=t(".nav-settings"),a=n.add(".act-tray-mobile"),i=o.add(".mkt-tray");l.body.on("click",".act-tray-mobile",function(t){t.preventDefault(),n.css("right",""),e(i,a);var o=i.find("[data-tab]:first-child a");l.page.trigger("navigate",o.attr("href")),r(o.closest(".navbar"),o.closest("li"))}).on("click",".mkt-tray",function(n){n.preventDefault(),t(".nav-settings").css("right",""),e(a,i);var o=a.find("[data-tab]:first-child a");l.page.trigger("navigate",o.attr("href")),r(o.closest(".navbar"),o.closest("li"))}).on("click",".site a",function(){e(a,i)})}function p(e){var r=e.closest(".navbar");if(r.length){var n=-1*r.offset().left,o=10,a=n,i=e.offset().left+e.width(),s=b,u=l.win.width();if(r.hasClass("nav-settings")&&(s=k,u-=t(".mkt-tray").width()),i>u)a=n+(i-u)+o,e.next().length&&(a+=y);else if(n!==b){var c=e.next();if(c.length){var p=c.offset().left,d=p+c.width();u>d&&(a=n-(u+y-d)+o)}}return s>a&&(a=s),e.closest(".navbar").css("right",a+"px"),a}}function d(e){if(e.length){var r=l.win.width();if(e.hasClass("nav-settings")&&(r-=t(".mkt-tray").width()),e.width()<r||e.attr("data-fitted"))return void e.attr("data-fitted",!0);e.attr("data-fitted",!0);for(var n=t(e.find("li")[0]),o=n.next(),a=n.offset().left+n.width(),i=o;o.length&&r>a;)o=o.next(),o.length&&(a=o.offset().left+o.width(),i=o);var s=i.offset().left;if(s>r-y)for(;s>r-y;){var u=parseInt(i.css("font-size"),10);e.find("li").css("font-size",u-1+"px"),s=i.offset().left}}}function f(e){d(e.closest(".navbar")),p(e)}function m(){var e=l.win.width();if(!(v>e))for(var r=t(".nav-mkt"),n=r.find("li"),o=r.width();o>e;){var a=parseInt(r.find("li").css("font-size"),10),i=parseInt(r.find("li").css("padding-right"),10);n.css({"font-size":a-1+"px","padding-left":i-10+"px","padding-right":i-10+"px"}),o=r.width()}}function g(){t(".act-tray-desktop").on("mouseover",function(){t(this).addClass("active")}).on("mouseout",function(){t(this).removeClass("active")}).on("click",".account-links a",function(){t(".account-links, .settings, .act-tray").removeClass("active")})}function h(){var r=n.stack();t("#site-nav").html(o.env.render("nav.html",{is_settings:l.body.attr("data-page-type")&&-1!==l.body.attr("data-page-type").indexOf("settings"),logged_in:u.logged_in(),recommendations:a.switches&&-1!==a.switches.indexOf("recommendations"),path:r.length?r[r.length-1].path:"",z:l})).addClass("secondary-header"),f(t(".navbar.active .initial-active")),m(),t(".hovercats").html(o.env.render("cat_overlay.html",{categories:e})),c()}var v=(r("navbar"),710),b=-65,k=0,y=50;return l.body.one("loaded",c),l.body.on("click",".navbar li > a",function(){var e=t(this);e.hasClass("desktop-cat-link")||p(e.closest("li"))}),g(),l.page.on("loaded",function(){t(".account-links, .act-tray .settings").removeClass("active")}),l.body.on("click",".hovercats a",function(){t(".tab-categories").addClass("link-clicked")}).on("mouseover",".tab-categories",function(){t(".tab-categories.link-clicked").removeClass("link-clicked")}).on("reloaded_chrome",g),l.page.one("loaded",h),l.win.on("resize",i.debounce(h,100)),{render:h}}),define("overlay",["keys","l10n","utils","z"],function(e,t,r,n){function o(){a.is(".show")&&($(".modal").removeClass("show"),a.attr("class","cloak").trigger("overlay_dismissed"))}var a=(t.gettext,$(".cloak"));a.on("touchmove",function(e){e.preventDefault(),e.stopPropagation()}).on("click",function(e){$(e.target).parent("body").length&&o()}).on("dismiss",function(){o()}),n.body.on("click",function(){$("#notification").removeClass("show")}).on("keydown.overlayDismiss",function(t){r.fieldFocused(t)||t.which!=e.ESCAPE||(t.preventDefault(),o())}).on("overlay_dismissed",function(){n.body.removeClass("overlayed")}).on("decloak",function(){n.body.addClass("overlayed"),a.addClass("show")}).on("click",".modal .btn-cancel, .modal .cancel",r._pd(o)),n.win.on("navigating",o)}),define("perf_events",["z"],function(e){e.page.one("reloaded_chrome",function(){e.win.trigger("moz-chrome-interactive")}).one("loaded",function(){e.win.trigger("moz-content-interactive")}).one("splash_removed",function(){e.win.trigger("moz-chrome-dom-loaded"),e.win.trigger("moz-app-visually-complete")}).one("images_loaded",function(){e.win.trigger("moz-app-loaded")})}),define("perf_helper",[],function(){function e(e){if(window.mozPerfHasListener){var t=window.performance.now();setTimeout(function(){var r={name:e,timestamp:t},n=new CustomEvent("x-moz-perf",{detail:r});window.dispatchEvent(n)})}}["moz-chrome-dom-loaded","moz-chrome-interactive","moz-app-visually-complete","moz-content-interactive","moz-app-loaded"].forEach(function(t){window.addEventListener(t,function(){e(t)},!1)}),window.PerformanceTestingHelper={dispatch:e}}),function(e){define("flipsnap",[],function(){return function(){return function(e,t,r){function n(e,t){return this instanceof n?this.init(e,t):new n(e,t)}function o(e,t){return m.touch?e.changedTouches[0][t]:e[t]}function a(e){return l(e,function(e){return p.style[e]!==r})}function i(e,t,n){var o=f[t];o?e[o]=n:e[t]!==r?(f[t]=t,e[t]=n):l(d,function(o){var a=u(o)+u(t);return e[a]!==r?(f[t]=a,e[a]=n,!0):void 0})}function s(e){if(p.style[e]!==r)return e;var t;return l(d,function(n){var o=u(n)+u(e);return p.style[o]!==r?(t="-"+n+"-"+e,!0):void 0}),t}function u(e){return e.charAt(0).toUpperCase()+e.substr(1)}function l(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r],r))return!0;return!1}function c(e,r,n,o){var a=t.createEvent("Event");a.initEvent(r,n,o),e.dispatchEvent(a)}var p=t.createElement("div"),d=["webkit","moz","o","ms"],f={},m={};m.transform3d=a(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),m.transform=a(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),m.transition=a(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),m.touch="ontouchstart"in e,m.cssAnimation=(m.transform3d||m.transform)&&m.transition;var g=m.touch?"touchstart":"mousedown",h=m.touch?"touchmove":"mousemove",v=m.touch?"touchend":"mouseup";n.prototype.init=function(e,n){var o=this;if(o.element=e,"string"==typeof e&&(o.element=t.querySelector(e)),!o.element)throw new Error("element not found");return n=n||{},o.distance=n.distance===r?null:n.distance,o.maxPoint=n.maxPoint===r?null:n.maxPoint,o.disableTouch=n.disableTouch===r?!1:n.disableTouch,o.disable3d=n.disable3d===r?!1:n.disable3d,o.currentPoint=0,o.currentX=0,o.animation=!1,o.use3d=m.transform3d,o.disable3d===!0&&(o.use3d=!1),o._setStyle(m.cssAnimation?{transitionProperty:s("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:o._getTranslate(0)}:{position:"relative",left:"0px"}),o.refresh(),o.element.addEventListener(g,o,!1),o.element.addEventListener(h,o,!1),o.element.addEventListener(v,o,!1),o},n.prototype.handleEvent=function(e){var t=this;switch(e.type){case g:t._touchStart(e);break;case h:t._touchMove(e);break;case v:t._touchEnd(e);break;case"click":t._click(e)}},n.prototype.refresh=function(){var e=this;e._maxPoint=e.maxPoint||function(){for(var t,r=e.element.childNodes,n=0,o=0,a=r.length;a>o;o++)t=r[o],1===t.nodeType&&n++;return n>0&&n--,n}(),e._distance=e.distance||e.element.scrollWidth/(e._maxPoint+1),e._maxX=-e._distance*e._maxPoint,e.moveToPoint()},n.prototype.hasNext=function(){var e=this;return e.currentPoint<e._maxPoint},n.prototype.hasPrev=function(){var e=this;return e.currentPoint>0},n.prototype.toNext=function(){var e=this;e.hasNext()&&e.moveToPoint(e.currentPoint+1)},n.prototype.toPrev=function(){var e=this;e.hasPrev()&&e.moveToPoint(e.currentPoint-1)},n.prototype.moveToPoint=function(e){var t=this,n=t.currentPoint;e===r&&(e=t.currentPoint),t.currentPoint=0>e?0:e>t._maxPoint?t._maxPoint:parseInt(e,10),m.cssAnimation?t._setStyle({transitionDuration:"350ms"}):t.animation=!0,t._setX(-t.currentPoint*t._distance),n!==t.currentPoint&&c(t.element,"fsmoveend",!0,!1)},n.prototype._setX=function(e){var t=this;t.currentX=e,m.cssAnimation?t.element.style[f.transform]=t._getTranslate(e):t.animation?t._animate(e):t.element.style.left=e+"px"},n.prototype._touchStart=function(e){var t=this;t.disableTouch||(m.cssAnimation?t._setStyle({transitionDuration:"0ms"}):t.animation=!1,t.scrolling=!0,t.moveReady=!1,t.startPageX=o(e,"pageX"),t.startPageY=o(e,"pageY"),t.basePageX=t.startPageX,t.directionX=0,t.startTime=e.timeStamp)},n.prototype._touchMove=function(e){var t=this;if(t.scrolling){var r,n,a,i,s=o(e,"pageX"),u=o(e,"pageY");t.moveReady?(e.preventDefault(),e.stopPropagation(),r=s-t.basePageX,n=t.currentX+r,(n>=0||n<t._maxX)&&(n=Math.round(t.currentX+r/3)),t._setX(n),t.directionX=0===r?t.directionX:r>0?-1:1):(a=Math.abs(s-t.startPageX),i=Math.abs(u-t.startPageY),a>5?(e.preventDefault(),e.stopPropagation(),t.moveReady=!0,t.element.addEventListener("click",t,!0)):i>5&&(t.scrolling=!1)),t.basePageX=s}},n.prototype._touchEnd=function(){var e=this;if(e.scrolling){e.scrolling=!1;var t=-e.currentX/e._distance;t=e.directionX>0?Math.ceil(t):e.directionX<0?Math.floor(t):Math.round(t),e.moveToPoint(t),setTimeout(function(){e.element.removeEventListener("click",e,!0)},200)}},n.prototype._click=function(e){e.stopPropagation(),e.preventDefault()},n.prototype._setStyle=function(e){var t=this,r=t.element.style;for(var n in e)i(r,n,e[n])},n.prototype._animate=function(e){var t=this,r=t.element,n=+new Date,o=parseInt(r.style.left,10),a=e,i=350,s=function(e,t){return-(e/=t)*(e-2)},u=setInterval(function(){var e,t,l=new Date-n;l>i?(clearInterval(u),t=a):(e=s(l,i),t=e*(a-o)+o),r.style.left=t+"px"},10)},n.prototype.destroy=function(){var e=this;e.element.removeEventListener(g,e),e.element.removeEventListener(h,e),e.element.removeEventListener(v,e)},n.prototype._getTranslate=function(e){var t=this;return t.use3d?"translate3d("+e+"px, 0, 0)":"translate("+e+"px, 0)"},e.Flipsnap=n}(window,window.document),e.Flipsnap=Flipsnap}.apply(e,arguments)})}(this),define("previews",["flipsnap","log","models","templates","capabilities","shothandles","underscore","z"],function(e,t,r,n,o,a,i,s){function u(){function t(){l.filter(".current").removeClass("current"),l.eq(u.currentPoint).addClass("current")}var r=$(this);if(r.prev().hasClass("mkt-tile")&&!r.hasClass("single")&&!r.hasClass("init")){var n=r.find("li").length,i=r.find(".content"),s=n*p-15;
i.css({width:s+"px",margin:"0 "+(r.width()-c)/2+"px"}),r.addClass("init");var u=e(r.find(".content")[0],{distance:p});this.slider=u;var l=r.find(".dots .dot");u.element.addEventListener("fsmoveend",t,!1),u.moveToPoint(~~(r.width()/p/2)-1),d.push(u),t(),n>3&&o.widescreen()&&a.attachHandles(u,r.find(".slider"))}}var l=t("previews"),c=150,p=165,d=[];s.page.on("click",".dot",function(){l.log("Dot clicked, repositioning trays");var e=$(this);e.closest(".tray")[0].slider.moveToPoint(e.index())}),s.doc.on("saferesize.tray",function(){$(".tray").each(function(){var e=$(this);e.find(".content").css("margin","0 "+(e.width()-c)/2+"px")});for(var e,t=0;e=d[t++];)e.refresh()}),s.win.on("unloading.tray",function(){for(var e,t=0;e=d[t++];)e.destroy();d=[]}),s.page.on("dragstart dragover",function(e){e.preventDefault()}).on("populatetray",function(){l.log("Populating trays"),$(".listing.expanded .mkt-tile + .tray").each(u)})}),define("webactivities",["capabilities","log","login","urls","utils","z"],function(e,t,r,n,o,a){function i(e,t){s.log('Handled "'+e+'" activity: '+JSON.stringify(t));var i,u=t.src&&o.slugify(t.src)||"activity-"+e;switch(e){case"marketplace-app":if("login"===t.type){r.handle_fxa_login(t.auth_code,t.state);break}var l=t.slug,c=t.manifest_url||t.manifest;l?(i=n.reverse("app",[l]),a.page.trigger("navigate",[o.urlparams(i,{src:u})])):c&&a.page.trigger("search",{q:":manifest="+c,src:u});break;case"marketplace-app-rating":i=n.reverse("app/ratings/add",[t.slug]),a.page.trigger("navigate",[o.urlparams(i,{src:u})]);break;case"marketplace-category":i=n.reverse("category",[t.slug]),a.page.trigger("navigate",[o.urlparams(i,{src:u})]);break;case"marketplace-search":a.page.trigger("search",{q:t.query,src:u})}}var s=t("webactivities");e.webactivities&&navigator.mozSetMessageHandler("activity",function(e){i(e.source.name,e.source.data)}),window.addEventListener("message",function(e){if(e.data&&e.data.name&&e.data.data){s.log("Received post message from "+e.origin+": "+JSON.stringify(e.data));try{i(e.data.name,e.data.data)}catch(t){}}},!1),window.self!==window.top&&(s.log("postMessaging to *: loaded"),window.top.postMessage("loaded","*"))}),console.log("Mozilla(R) FP-MKT (R) 1.0"),console.log("   (C)Copyright Mozilla Corp 1998-2014"),console.log(""),console.log("64K High Memory Area is available."),define("main",["underscore","jquery","polyfill","document-register-element","helpers","helpers_local","apps_buttons","cache","capabilities","consumer_info","compatibility_filtering_select","content-ratings","forms","image-deferrer","l10n","lightbox","log","login","marketplace-elements","models","navbar","navigation","newsletter","overlay","perf_events","perf_helper","previews","ratings","regions","requests","settings","site_config","storage","templates","tracking","tracking_events","urls","user","user_helpers","utils","utils_local","views","webactivities","z"],function(e){var t=require("apps"),r=require("apps_buttons"),n=require("capabilities"),o=require("consumer_info"),a=require("format"),i=require("jquery"),s=require("settings"),u=require("site_config"),l=require("l10n"),c=require("newsletter"),p=require("templates"),d=require("regions"),f=require("urls"),m=require("user"),g=require("utils"),h=require("utils_local"),v=require("z"),b=require("log")("mkt"),k=l.gettext;n.firefoxOS&&"mozId"in navigator&&null!==navigator.mozId&&(b.log("Native Persona is available"),window.navigator.id=navigator.id=navigator.mozId);var y=performance.now();b.log("Dependencies resolved, starting init"),b.log("Package version: "+(s.package_version||"N/A"));var _=["cs","de","el","en-US","es","hr","hu","it","pl","pt-BR","sr","zh-CN"],w=_.indexOf(navigator.l10n.language)>=0?navigator.l10n.language:"en-US",x=f.media("/docs/{type}/"+w+".html?20141001");if(s.persona_tos=a.format(x,{type:"terms"}),s.persona_privacy=a.format(x,{type:"privacy"}),v.body.addClass("html-"+l.getDirection()),s.body_classes&&v.body.addClass(s.body_classes),h.isSystemDateRecent()?h.checkOnline().fail(function(){b.log("We are offline. Showing offline message"),v.body.addClass("error-overlaid").append(p.env.render("errors/offline-error.html")).on("click",".offline .try-again",function(){b.log("Re-checking online status"),h.checkOnline().done(function(){b.log("Reloading"),window.location.reload()}).fail(function(){b.log("Still offline")})})}):v.body.addClass("error-overlaid").append(p.env.render("errors/date-error.html")).on("click",".system-date .try-again",function(){h.isSystemDateRecent()&&window.location.reload()}),v.page.one("loaded",function(){b.log("Hiding splash screen ("+((performance.now()-y)/1e3).toFixed(6)+"s)");i("#splash-overlay").addClass("hide");v.body.removeClass("overlayed").addClass("loaded"),setTimeout(function(){v.page.trigger("splash_removed")},1500)}),n.chromeless&&window.addEventListener("keydown",function(e){82==e.keyCode&&e.metaKey&&window.location.reload()}),n.webApps){var L="app:"===window.location.protocol?"iframe-install-loaded":"loaded";v.page.one(L,function(){t.getInstalled().done(function(){v.page.trigger("mozapps_got_installed"),r.mark_btns_as_installed()});var e=s.manifest_url;e&&t.checkForUpdate(e).done(function(r){r&&(v.body.on("click","#marketplace-update-banner a.download-button",g._pd(function(){var r=i(this);r.closest("mkt-banner").get(0).dismiss="",r.addClass("spin"),t.applyUpdate(e).done(function(){i("#marketplace-update-banner span").text(k("The next time you start the Firefox Marketplace app, you’ll see the updated version!")),r.remove()})})),i("#site-nav").after(p.env.render("marketplace-update.html")))})}),document.addEventListener("visibilitychange",function(){document.hidden||(m.logged_in()&&o.fetch(!0),t.getInstalled().done(r.mark_btns_as_uninstalled))},!1)}v.page.on("reload_chrome",function(){b.log("Reloading chrome");var t=require("user_helpers"),r={user_region:t.region("restofworld"),z:v};e.extend(r,c.context()),i("#site-header").html(p.env.render("header.html",r)),i("#site-footer").html(p.env.render("footer.html",r)),window["incompatibility-banner"]||navigator.mozApps||navigator.userAgent.match(/googlebot/i)||(b.log("Adding incompatibility banner"),i("#site-nav").after(p.env.render("incompatible.html")));var a=m.logged_in();a||v.body.removeClass("show-recommendations"),u.promise.then(function(){(n.nativeFxA()||n.yulelogFxA())&&v.body.addClass("native-fxa");var e=document.getElementById("fx-accounts-banner");e&&e.dismissBanner(),m.canMigrate()&&i("#site-nav").after(p.env.render("fx-accounts-banner.html",{logged_in:a}))}),i.when(u,o).then(function(){a&&m.get_setting("enable_recommendations")&&-1!==s.switches.indexOf("recommendations")&&v.body.addClass("show-recommendations")}),o.promise.then(function(){var e=t.region("restofworld");e!==r.user_region&&(b.log("Region has changed from "+r.user_region+" to "+e+" since we rendered the footer, updating region in footer."),i("#site-footer span.region").removeClass("region-"+r.user_region).addClass("region-"+e).text(d.REGION_CHOICES_SLUG[e]))}),v.body.toggleClass("logged-in",a),v.page.trigger("reloaded_chrome")}).trigger("reload_chrome"),v.page.on("before_login before_logout",function(){require("cache").purge()}),v.body.on("click",".site-header .back",function(e){e.preventDefault(),b.log("← button pressed"),require("navigation").back()});var O=require("image-deferrer"),F=O.Deferrer(100,null),E=O.Deferrer(null,200);v.page.one("loaded",function(){F.setImages(i(".icon.deferred")),E.setImages(i(".screenshot .deferred, .deferred-background"))}).on("loaded loaded_more navigate fragment_loaded",function(){F.refresh(),E.refresh()}),require("nunjucks").require("globals").imgAlreadyDeferred=function(e){var t=F.getSrcsAlreadyLoaded(),r=E.getSrcsAlreadyLoaded(),n=t.concat(r);return-1!==n.indexOf(e)},window.addEventListener("resize",e.debounce(function(){v.doc.trigger("saferesize")},200),!1),o.promise.done(function(){b.log("Triggering initial navigation"),v.spaceheater?v.page.trigger("loaded"):v.page.trigger("navigate",[window.location.pathname+window.location.search])}),require("requests").on("deprecated",function(){throw v.page.trigger("divert",[f.reverse("deprecated")]),new Error("Cancel navigation; deprecated client")}),b.log("Initialization complete")}),require(["main"]);